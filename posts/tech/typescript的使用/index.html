<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Typescript的使用 | XP&#39;s Blog</title>
<meta name="keywords" content="typescript">
<meta name="description" content="TS基础 变量的声明: 在typescript中定义变量需要指定 标志符 的类型 完整的声明格式如下: 声明了类型后typescript就会进行类型检测, 声明的类型可以称之为类型注解 var/let/const 标志符: 数据类型 - 赋值 // string: Typescript中的字符串类型^^ // String: Javascript的字符串包装类的类型">
<meta name="author" content="
作者:&nbsp;XP">
<link rel="canonical" href="https://sirius00.github.io/posts/tech/typescript%E7%9A%84%E4%BD%BF%E7%94%A8/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a6c679e0d2f6e83a8f1aad1f7a2cdc96085c188647e679dbc62800f83be6bad2.css" integrity="sha256-psZ54NL26DqPGq0feizclghcGIZH5nnbxigA&#43;DvmutI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
        onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sirius00.github.io/img/cat.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://sirius00.github.io/img/cat.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sirius00.github.io/img/cat.png">
<link rel="apple-touch-icon" href="https://sirius00.github.io/img/cat.png">
<link rel="mask-icon" href="https://sirius00.github.io/img/cat.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="Typescript的使用" />
<meta property="og:description" content="TS基础 变量的声明: 在typescript中定义变量需要指定 标志符 的类型 完整的声明格式如下: 声明了类型后typescript就会进行类型检测, 声明的类型可以称之为类型注解 var/let/const 标志符: 数据类型 - 赋值 // string: Typescript中的字符串类型^^ // String: Javascript的字符串包装类的类型" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sirius00.github.io/posts/tech/typescript%E7%9A%84%E4%BD%BF%E7%94%A8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-22T10:51:44+08:00" />
<meta property="article:modified_time" content="2023-02-22T10:51:44+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Typescript的使用"/>
<meta name="twitter:description" content="TS基础 变量的声明: 在typescript中定义变量需要指定 标志符 的类型 完整的声明格式如下: 声明了类型后typescript就会进行类型检测, 声明的类型可以称之为类型注解 var/let/const 标志符: 数据类型 - 赋值 // string: Typescript中的字符串类型^^ // String: Javascript的字符串包装类的类型"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "📚文章",
          "item": "https://sirius00.github.io/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "👨🏻‍💻 技术",
          "item": "https://sirius00.github.io/posts/tech/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Typescript的使用",
      "item": "https://sirius00.github.io/posts/tech/typescript%E7%9A%84%E4%BD%BF%E7%94%A8/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Typescript的使用",
  "name": "Typescript的使用",
  "description": "TS基础 变量的声明: 在typescript中定义变量需要指定 标志符 的类型 完整的声明格式如下: 声明了类型后typescript就会进行类型检测, 声明的类型可以称之为类型注解 var/let/const 标志符: 数据类型 - 赋值 // string: Typescript中的字符串类型^^ // String: Javascript的字符串包装类的类型",
  "keywords": [
    "typescript"
  ],
  "articleBody": "TS基础 变量的声明: 在typescript中定义变量需要指定 标志符 的类型\n完整的声明格式如下:\n声明了类型后typescript就会进行类型检测, 声明的类型可以称之为类型注解\nvar/let/const 标志符: 数据类型 - 赋值\n// string: Typescript中的字符串类型^^\n// String: Javascript的字符串包装类的类型^^\nvar name: string = \"测试\" let age: number = 18 const height = 1.8 const message: String = \" Hello\" export {} 基础类型 boolean、 number、 string undefined和null类型 any、 unknown和void类型 不清楚什么类型,可以使用any类型.这些值可能来自动态的内容,比如用户输入或第三方库\nunknown 类型代表任何类型，它的定义和 any 定义很像，但是它是一个安全类型，使用 unknown 做任何事情都是不合法的。\nvoid类型与 any 类型相反，它表示没有任何类型。比如函数没有明确返回值，默认返回 Void 类型\nnever类型\n表示的是那些永远不存在的值的类型\n有些情况下值会永不存在，比如，\n如果一个函数执行时抛出了异常，那么这个函数永远不存在返回值，因为抛出异常会直接中断程序运行。 函数中执行无限循环的代码，使得程序永远无法运行到函数返回值那一步。 // 异常 function fn(msg: string): never { throw new Error(msg) } // 死循环 千万别这么写，会内存溢出 function fn(): never { while (true) {} } //使用场景 function handle(message: string | number ) { switch (typeof(message)) { case 'string': console.log('string处理方式') break case 'number': console.log('number处理方式') break default: const check: never = message } } never类型是任何类型的子类型,也可以赋值个以任何类型\n没有类型是never类型的子类型,没有类型可以赋值给never类型(除了never类型本身之外).即使any也不可以赋值给never\n数组类型 // 不好的习惯: 一个数组中在Typescript开发中, 最好存放的数据类型是固定的 const names: Array\u003cstring\u003e = [] //不推荐的写法 const name2 : string[] = [] // 推荐写法 names.push(123) //报错 用接口表示数组: interface NumberArray { [index: number]: number; } let fibonacci: NumberArray = [1, 1, 2, 3, 5]; 嵌套数组:\nany在数组中应用:\nlet list: any[] = ['xcatliu', 25, { website: 'http://xcatliu.com' }]; 元组类型(tuple) 元组类型允许表示一个已知元素数量和类型的数组,各元素的类型不必相同\n// 1.数组的弊端 // const info: any[] = ['why', 18, 1.88] // const name = info[0] // console.log(name.length) //2.元组的特点 // const info: [string, number, number] = ['why', 12, 1.88] // const name = info[0] // console.log(name.length) // export {} //3.应用场景 // function useState(state: any) { // let current = state // const change = (newState: any) =\u003e { // current = newState // } // const tuple: [any, (newState: any) =\u003e void] = [current, change] // return tuple // } //优化 function useState\u003cT\u003e(state: T) { let current = state const change = (newState: T) =\u003e { current = newState } const tuple: [T, (newState: T) =\u003e void] = [current, change] return tuple } const [counter, setCounrt] = useState(10) const [title, setTitle] = useState('123') 可以对元组类型使用数组的方法,比如使用push时,不会有越界报错\n??和!!的作用\n!!的作用:\n将一个其他类型变量转换成boolean类型\nconst message = \"hello\" // const flag = Boolean(message) // console.log(flag); // 将变量转为boolean类型 const flag = !!message console.log(flag) ??的作用:\n空值合并操作符(??)是一个逻辑操作符, 当操作符的左侧是null 或者 undefined时, 返回其右侧操作数, 否则返回左侧操作数\nlet message: string | null = \"hello\" const content = message ?? \"你好啊\" console.log(content) 函数类型 基本内容: TS定义函数类型需要定义输入参数类型和输出类型\n输出类型也可以忽略,因为ts能够根据返回语句自动推断出返回值类型\n函数没有明确返回值,默认返回Void类型\n函数表达式写法:\nlet add2 = (x: number, y: number): number { return x+y } 函数类型: // 1. 函数作为参数时, 在参数中如何编写类型 function foo() {} type FooFnType = () =\u003e void //定义函数类型 function bar (fn: FooFnType) { fn() } bar(foo) // 2. 定义常量时, 编写函数的类型 type AddFnType = (num1: number, num2: number) =\u003e number const add: AddFnType = (num1: number, num2: number) =\u003e { return num1 + num2 } 可选参数: 参数后面加个问号, 表示这个参数是可选的\n可选参数要放在函数入参的最后面,不然会编译出错\nlet add2 = (x: number, y: number, z?: number): number { return x+y } add(1,2,3) add(1,2) 默认参数: 跟js写法一样,在入参里定义初始值. 和可选参数不同的是,默认参数可以不放在函数入参的最后面 如果带默认值的参数不是最后一个参数,用户必须明确的传入undefined值来获得默认值 add(undefined, 100) 函数赋值: 函数重载: 比如我们实现一个add函数, 如果传入参数是数字, 就返回数字相加, 如果传入参数是字符串, 就返回字符串拼接\nfunction add(x: number[]): number function add(x: string[]): string function add(x: any[]): any { if (typeof x[0] === 'string') { return x.join() } if (typeof x[0] === 'number') { return x.reduce((acc, cur) =\u003e acc + cur) } } 在ts中, 实现函数重载,需要多次声明这个函数,前几次是函数定义,列出所有的情况,最后一次是函数实现,需要比较宽泛的类型\n不同参数个数: 假设这个 add 函数接受更多的参数个数，比如还可以传入一个参数 y，如果传了y，就把 y 也加上或拼接上，就可以这么写，\nfunction add(x: number[]): number function add(x: string[]): string function add(x: number[], y: number[]): number function add(x: string[], y: string[]): string function add(x: any[], y?: any[]): any { if (Array.isArray(y) \u0026\u0026 typeof y[0] === 'number') { return x.reduce((acc, cur) =\u003e acc + cur) + y.reduce((acc, cur) =\u003e acc + cur) } if (Array.isArray(y) \u0026\u0026 typeof y[0] === 'string') { return x.join() + ',' + y.join() } if (typeof x[0] === 'string') { return x.join() } if (typeof x[0] === 'number') { return x.reduce((acc, cur) =\u003e acc + cur) } } console.log(add([1,2,3])) // 6 console.log(add(['lin', '18'])) // 'lin,18' console.log(add([1,2,3], [1,2,3])) // 12 console.log(add(['lin', '18'], ['man', 'handsome'])) // 'lin,18,man,handsome' interface 基本概念: interface 不是 JS 中的关键字，所以 TS 编译成 JS 之后，这些 interface 是不会被转换过去的，都会被删除掉，interface 只是在 TS 中用来做静态检查。\ninterface(接口)是TS设计出来用于定义对象类型的, 可以对对象的形状进行描述\n定义interface一般首字母大写\ninterface Person { name: string age: number } const p1: Person = { name: 'lin', age: 18 } 属性必须和类型定义的时候完全一致,少写了属性会报错 可选属性: 跟函数的可选参数是类似的,在属性上加个**?** , 这个属性就是可选的 interface Person { name: string age?: number } const p1: Person = { name: 'lin', } 只读属性: 如果希望某个属性不被改变, 可以这么写:\ninterface Person { readonly id: number name: string age: number } interfce描述函数类型:\ninterface ISum { (x:number,y:number):number } const add:ISum = (num1, num2) =\u003e { return num1 + num2 } 自定义属性(可索引的类型): 在上文中,属性必须和类型定义的时候完全一致, 如果一个对象上有多个不确定的属性,该怎么办?\ninterface RandomKey { [propName: string]: string } const obj: RandomKey = { a: 'hello', b: 'lin', c: 'welcome', } 如果把属性名定义为number 类型, 就是一个类数组了, 看上去和数组一模一样,当然不是真数组,数组上的方法他是没有的\ninterface LikeArray { [propName: number]: string } const arr: LikeArray = ['hello', 'lin'] arr[0] // 可以使用下标来访问值 duck typing(鸭子类型): interface 还有一个响亮的名字: duck typing (鸭子类型)\n只要数据满足了nterface定义的类型, ts就能编译通过, 如下:\ninterface FunctionWithProps { (x: number): number fnName: string } FunctionWithProps 接口描述了一个函数类型,还向这个函数类型添加了name属性, 这看上去完全是四不像, 但是这个定义是完全可以工作的\nconst fn: FunctionWithProps = (x) =\u003e { return x } fn.fnName = 'hello world' 接口的实现: interface ISwim { swimming: () =\u003e void } interface IEat { eating: () =\u003e void } class Animal { } class Fish extends Animal implements ISwim, IEat { swimming () { console.log(\"Fish Swimming\") } eating() { console.log(\"Fish Eating\") } } 字面量赋值: 类 基本概念: JS 是靠原型和原型链来实现面向对象编程的，es6 新增了语法糖 class。\nTS 通过 public、private、protected 三个修饰符来增强了 JS 中的类。\n基本写法: 定义一个Person类, 有属性name 和方法 speak\nclass Person{ name: string constructor( name : string) { this.name = name } speak() { console.log(`${this.name} is speaking`) } } const p1 = new Person('lin') // 新建实例 p1.name //访问属性和方法 p1.speak() 继承: 使用extends关键字实现继承, 定义一个Student类继承自Person类\nclass Student extends Person { study () { console.log(`${this.name} needs study`) } } const s1 = new Student('lin') s1.study() super关键字: 上例中Student 没有定义自己的属性,可以不写 super, 但是如果Student类有自己的属性, 就要用super关键字来把父类的属性继承过来,比如,Student类新增一个grade属性 , 不写super 会报错:\nclass Student extends Person { grade: number constructor(name: string,grade:number) { super(name) this.grade = grade } } const s1 = new Student('lin', 100) 多态: 子类对父类方法进行了重写, 子类和父类调用同一个方法时会不一样\nclass Student extends Person { speak () { return `Studnet ${super.speak()}` } } ts中一般对抽象方法实现多态\npublic: 公有的, 一个类里默认所有的方法和属性都是public private 规范: 在变量的名字之前加下划线 ``\n私有的,只属于这个类自己, 他的实例和继承他的子类都访问不到\nclass Person { private name: string public constructor(name: string) { this.name = name } public speak() { console.log(`${this.name} is speaking`) } } 实例访问name 会报错 继承他的子类, 访问name 属性 会报错 protected 受保护的, 继承他的子类可以访问, 实例不能访问\nclass Person { protected name: string public constructor(name: string) { this.name = name } public speak() { console.log(`${this.name} is speaking`) } } 实例访问name属性, 会报错 子类可以访问 static 静态属性与静态方法不需要实例化就可以访问，访问时直接通过类名来调用，静态方法不能访问当前类里的属性，只能访问当前类里的静态属性。\nclass Person{ public name:String; constructor(name:String){ this.name = name; } run(){ console.log(`${this.name}在运动`) } work(){ console.log(`${this.name}在工作`) } // 静态属性 static age:number = 30; // 静态方法 static eat(){ console.log(`他在喝水`); // 静态方法不能访问当前类里的属性 // 只能访问类里的静态属性 console.log(Person.age); } }; Person.eat(); // 他在喝水 // 30 static 是静态属性, 可以理解为 是类上的一些常量, 实例不能访问\nclass Circle { static pi = 3.14 public radius: number public constructor(radius: number) { this.radius = radius } public calcLength() { return Circle.pi * this.radius * 2 // 计算周长，直接访问 Circle.pi } } getters–setters 基本使用:\nclass Person{ private _name: string constructor(name: string) { this._name = name } //访问器 setter/getters set name (newName) { this._name = newName } get name () { return this._name } } const p = new Person(\"why\") p.name = \"condewhy\" console.log(p.name) 抽象类 + 所谓抽象类,就是指**只能被继承,不能被实例化的类** + 两个特点: + 抽象类不允许被实例化 + 抽象类中的方法必须被子类实现 + 抽象类用一个 **abstract** 关键字来定义 + 正确用法: ```js abstract class Animal { constructor(name:string) { this.name = name } public name: string public abstract sayHi():void } class Dog extends Animal { constructor(name:string) { super(name) } public sayHi() { console.log('wang') } } ``` + 抽象方法和多态: + 多态指的是，父类定义一个抽象方法，在**多个子类中有不同的实现**，运行的时候不同的子类就对应不同的操作，比如: ```js abstract class Animal { constructor(name:string) { this.name = name } public name: string public abstract sayHi():void } class Dog extends Animal { constructor(name:string) { super(name) } public sayHi() { console.log('wang') } } class Cat extends Animal { constructor(name:string) { super(name) } public sayHi() { console.log('miao') } } ``` this类型 类的成员方法直接返回一个this, 这样就可以很方便的实现链式调用\n链式调用:\nclass StudyStep { step1() { console.log('listen') return this } step2() { console.log('write') return this } } const s = new StudyStep() s.step1().step2() // 链式调用 灵活调用子类父类方法\n在继承的时候,this既可以表示父类型,也可以表示子类型\nclass StudyStep { step1() { console.log('listen') return this } step2() { console.log('write') return this } } class MyStudyStep extends StudyStep { next() { console.log('before done, study next!') return this } } const m = new MyStudyStep() m.step1().next().step2().next() // 父类型和子类型上的方法都可随意调用 这就保持了父类和子类之间接口调用的连贯性\ninterface和class 的关系 interface同样可以用来约束class, 要实现约束, 需要用到 implements 关键字\nimplements: implements是 实现的意思, class 实现interface.\n比如手机有播放功能,可以这样写:\ninterface MusicInterface{ playMusic(): void } class Cellphone implements MusicInterface{ playMusic() {} } 定义了约束之后,class 必须满足接口上的所有条件 处理公共的属性和方法 不同的类有一些公有的属性和方法,使用继承很难完成,\n使用implements实现方式:\ninterface MusicInterface { playMusic(): void } class Car implements MusicInterface { playMusic() {} } class Cellphone implements MusicInterface { playMusic() {} } 这样 Car 类和 Cellphone 类都约束了播放音乐的功能。 结束构造函数和静态属性 使用implements只能约束实例上的属性和方法,要约束构造函数和静态属性, 需要这么写\ninterface CircleStatic { new (radius: number): void pi: number } const Circle:CircleStatic = class Circle { static pi: 3.14 public radius: number public constructor(radius: number) { this.radius = radius } } 枚举 基本使用 enum Direction { Up, Down, Left, Right } 这样就定义了一个数字枚举, 两个特点:\n数字递增\nconsole.log(Direction.Up) // 0 console.log(Direction.Down) // 1 console.log(Direction.Left) // 2 console.log(Direction.Right) // 3 如果枚举第一个元素赋有初值,就会从初始值开始递增\nenum Direction { Up = 6, Down, Left, Right } console.log(Direction.Up) // 6 console.log(Direction.Down) // 7 console.log(Direction.Left) // 8 console.log(Direction.Right) // 9 反向映射\nconsole.log(Direction[0]) // Up console.log(Direction[1]) // Down console.log(Direction[2]) // Left console.log(Direction[3]) // Right 反向映射的原理 枚举是如何实现反向映射的,编译后的代码\nvar Direction; (function (Direction) { Direction[Direction[\"Up\"] = 6] = \"Up\"; Direction[Direction[\"Down\"] = 7] = \"Down\"; Direction[Direction[\"Left\"] = 8] = \"Left\"; Direction[Direction[\"Right\"] = 9] = \"Right\"; })(Direction || (Direction = {})); 主体代码是被包裹在一个自执行函数里, 封装了自己独特的作用域\nDierction[\"Up\"] = 6 // 返回6 执行 Direction[Direction[\"Up\"] = 6] = \"Up\"; 相当于执行 Direction[\"Up\"] = 6 Direction[6] = \"Up\" 这就实现了枚举的反向映射\n手动赋值 定义一个枚举类型来管理外卖状态\nenum ItemStatus { Buy = 1, Send, Receive } console.log(ItemStatus['Buy']) // 1 console.log(ItemStatus['Send']) // 2 console.log(ItemStatus['Receive']) // 3 但有时候后端给你返回的数据状态是乱的，就需要我们手动赋值。\n比如后端说 Buy 是 100，Send 是 20，Receive 是 1，就可以这么写，\nenum ItemStatus { Buy = 100, Send = 20, Receive = 1 } console.log(ItemStatus['Buy']) // 100 console.log(ItemStatus['Send']) // 20 console.log(ItemStatus['Receive']) // 1 计算成员 枚举中的成员可以被计算,比如经典的使用位运算合并权限, 可以这么写:\nenum FileAccess { Read = 1 \u003c\u003c 1, Write = 1 \u003c\u003c 2, ReadWrite = Read | Write, } console.log(FileAccess.Read) // 2 -\u003e 010 console.log(FileAccess.Write) // 4 -\u003e 100 console.log(FileAccess.ReadWrite) // 6 -\u003e 110 字符串枚举 字符串枚举的意义在于,提供有具体意义的字符串, 可以更容易的理解代码和调试\nenum Direction { Up = \"UP\", Down = \"DOWN\", Left = \"LEFT\", Right = \"RIGHT\", } const value = 'UP' if (value === Direction.Up) { // do something } 常量枚举 常量枚举可以避免在额外生成的代码上的开销和额外的非直接的对枚举成员的访问 小结 枚举的意义在于，可以定义一些带名字的常量集合，清晰地表达意图和语义，更容易地理解代码和调试。 常用于和后端联调时，区分后端返回的一些代表状态语义的数字或字符串，降低阅读代码时的心智负担。 类型推论 基本概念: TypeScript里，在有些没有明确指出类型的地方，类型推论会帮助提供类型。 这种推断发生在初始化变量和成员，设置默认参数值和决定函数返回值时。 定义时不赋值 定义时不赋值，就会被 TS 自动推导成 any 类型，之后随便怎么赋值都不会报错。 初始化变量 因为赋值的时候赋的是一个字符串类型，所以 TS 自动推导出 userName 是 string 类型。 这个时候，再更改 userName 时，就必须是 string 类型，是其他类型就报错 设置默认参数值 比如，定义一个打印年龄的函数，默认值是 18\nfunction printAge(num = 18) { console.log(num) return num } 那么 TS 会自动推导出 printAge 的入参类型，传错了类型会报错。\n决定函数返回值 比如一个函数不写返回值，ts自动推导出返回值类型是void 最佳通用类型 当需要从几个表达式中推断类型时候，会使用这些表达式的类型来推断出一个最合适的通用类型。 小结 类型推论虽然能为我们提供帮助，但既然写了 TS，除非是函数默认返回类型为 void 这种大家都知道的，其他的最好每个地方都定义好类型。 TS进阶 高级类型(一) 联合类型 基本概念:\n如果希望一个变量可以支持多种类型, 就可以使用联合类型(union types)\n例如, 一个变量既支持number类型, 又支持string类型, 就可以这么写\nlet num: number | string num = 8 num = 'eight' 当TS不确定一个联合类型的变量到底是那个类型的时候, 只能访问他们共有的属性和方法\n交叉类型 如果要对对象形式进行扩展,可以使用交叉类型 \u0026\n比如Person有name属性和age属性, 而Student在name 和age的基础上还有grade属性, 就可以这样写:\ninterface Person { name: string age: number } type Student = Person \u0026 { grade: number } 这和类的继承是一样的, 这样Student就继承了Person的属性\n联合类型 | 是指可以取几种类型中的任意一种，而交叉类型 \u0026 是指把几种类型合并起来。\n交叉类型和 interface 的 extends 非常类似，都是为了实现对象形状的组合和扩展。\n类型别名(type aliase) 类型别名会给一个类型起个新名字。 类型别名有时和接口很像，但是可以作用于原始值，联合类型，元组以及其它任何你需要手写的类型。\n用法如下:\ntype Name = string // 基本类型 type arrItem = number | string // 联合类型 const arr: arrItem[] = [1,'2', 3] type Person = { name: Name } type Student = Person \u0026 { grade: number } // 交叉类型 type Teacher = Person \u0026 { major: string } type StudentAndTeacherList = [Student, Teacher] // 元组类型 const list:StudentAndTeacherList = [ { name: 'lin', grade: 100 }, { name: 'liu', major: 'Chinese' } ] 比如下面这个例子，getName 这个函数接收的参数可能是字符串，可能是函数，就可以这么写。\ntype Name = string type NameResolver = () =\u003e string type NameOrResolver = Name | NameResolver // 联合类型 function getName(n: NameOrResolver): Name { if (typeof n === 'string') { return n } else { return n() } } 这样调用时传字符串和函数都可以 getName('lin') getName(() =\u003e 'lin') type和interface的区别:\n两者相同点:\n都可以定义一个对象或函数\ntype addType = (num1: number , num2: number) =\u003e number interface addType { (num1: number, num2: number): number } const add: addType = (num1, num2) =\u003e { return num1 + num2 } 都允许继承\ninterface 使用 extends 实现继承， type 使用交叉类型实现继承 两者不同点:\ninterface(接口)是ts设计出来用于定义对象类型的,可以对对象的形状进行描述 type是类型别名, 用于给各种类型定义别名, 让ts写起来更简洁、 清晰 type可以声明基本类型、 联合类型、 元组,interface不行 interface 可以合并重复声明, type不行 合并重复声明:\ninterface Person { name: string } interface Person { // 重复声明 interface，就合并了 age: number } const person: Person = { name: 'lin', age: 18 } 类型保护 如果有一个getLength函数, 入参是联合类型number | string,返回的参数是length\nfunction getLength(arg: number | string): number { return arg.length } 报错如图:\n这个时候类型保护(Type GUards) 出现了, 就可以使用typeof关键字来判断类型\n我们把getlength函数改造一下,就可以精确的访问到string类型的length\nfunction getLength(arg: number | string): number { if(typeof arg === 'string') { return arg.length } else { return arg.toString().length } } 之所以叫类型保护, 就是为了能够在不同的分支条件中缩小范围, 这样我们代码出错的几率就大大降低\n类型缩小: 常见的类型缩小:\ntypeof 平等缩小(===, !==) instanceof in 通过类似于typeof padding === \"number\" 的判断语句, 来改变typescript的执行路径;在给定的执行路径中,我们可以缩小比声明时更小的类型, 这个过程称为缩小\n使用实例:\n//typeof 类型缩小 type IDType = number | string function printID(id: IDType) { if (typeof id === 'string') { console.log(id.toUpperCase); }else{ console.log(id); } } //平等的类型缩小 (=== == !== !=/switch) // instanceof function printTime(time: string | Date) { if (time instanceof Date) { console.log(time.toUTCString()); } } class Student { studying() {} } class Teacher { teaching() {} } function work(p: Student | Teacher) { if (p instanceof Student) { p.studying() }else { p.teaching() } } // in type Fish ={ swimming: () =\u003e void } type Dog = { running: () =\u003e void } function walk(animal: Fish | Dog) { if ('swimming' in animal) { animal.swimming() }else{ animal.running() } } 类型断言 类型断言不是类型转换, 把一个类型断言成一个联合类型中不存在的类型会报错\n类型断言语法:\n// 类型断言 as // const el = document.getElementById(\"why\") as HTMLImageElement // el.src = \"url地址\" class Person { } class Student extends Person { studying() { } } function sayHello (p: Person) { (p as Student).studying() } const stu = new Student() sayHello(stu) 使用类型断言来告诉TS,我比你更清楚这个参数的类型是什么, 你别报错\nfunction getLength(arg: number | string): number { const str = arg as string if (str.length) { return str.length } else { const number = arg as number return number.toString().length } } 非空类型断言:\nfunction printMessage(message?: string) { console.log(message!.length) } printMessage(\"aaa\") 可选链的使用:\n可选链使用可选链操作符 ?. 他的作用是, 当对象的属性不存在时, 会短路,直接返回undefined, 如果存在,那么才会继续执行 字面量类型 有时候我们需要定义一些常量, 就需要用到字面量类型\n// \"hello\" 也是可以作为类型的,叫做字面型变量 const message: \"hello\" = \"hello\" // 字面量类型的意义,就是必须结合联合类型 type ButtonSize = 'mini' | 'small' | 'normal' | 'large' type Sex = '男' | '女' let nan: sex = '男' 字面量推理 基本使用:\ntype Method = 'GET' | 'POST' function request(url:string, method: Method) {} // type Request = { // url: string, // method: Method //} // const options = { // url: \"https://www.baidu.com\", // method: \"POST\" // } // request(options.url, options.method) const options = { url: \"https://www.baidu.com\", method: \"POST\" } request(options.url, options.method as Method) 泛型 好文: https://juejin.cn/post/6844904184894980104#heading-7 基本概念: 其中 T 代表 Type，在定义泛型时通常用作第一个类型变量名称。但实际上 T 可以用任何有效名称代替。除了 T 之外，以下是常见泛型变量代表的意思：\nT: Type的缩写, 类型 K（Key）：表示对象中的键类型； V（Value）：表示对象中的值类型； E（Element）：表示元素类型。Element缩写, 元素 O: Object的缩写,对象 其实并不是只能定义一个类型变量,我们可以引入希望定义的任何数量的类型变量. 比如我们引入一个新的类型变量U,用于扩展我们定义的indetify函数\nfunction idnetify\u003cT, U\u003e(value: T, message: U) : T { console.log(message); return value; } console.log(indetify\u003cNumber, string\u003e(68, 'sem')) 类型传递过程:\n泛型的基本使用 泛型接口:\n首先创建一个用于 identity 函数通用Identifies接口:\ninterface Identities \u003cV, M\u003e { vlaue: V, message: M } 之后我们将Identities 接口作为identity函数的返回类型:\nfucntion identity\u003cT, U\u003e(value: T, message: U ):Identities\u003cT, U\u003e { console.log(value + \":\" + typeof(value)) console.log(message + \":\" + typeof(message)) let indetities: Identities\u003cT, U\u003e = { value, message } return identities; } console.log(indetity(68, \"sem\")) //输出结果 68: number Semlinker: string {value: 68, message: \"Semlinker\"} 泛型类:\n在类中使用泛型也很简单,我们只需要在类名后面,使用****的语法定义任意多个类型变量\ninterface GenericInterface\u003cU\u003e { value: U getIdentity : () =\u003e U } class IdentityClass \u003cT\u003e implements GenericInterface \u003cT\u003e { value : T constructor (value: T) { this.value = value } constructor (value): T { return this.value } } const myNumberClass = new IndetityClass\u003cNumber\u003e(68) console.log(myNumberClass.getIdentity()) const myStringClass = new IdentityClass\u003cstring\u003e(\"Semlinker!\"); console.log(myStringClass.getIdentity()); // Semlinker! 接下来我们以实例化 myNumberClass 为例，来分析一下其调用过程：在实例化 IdentityClass 对象时，我们传入 Number 类型和构造函数参数值 68；之后在 IdentityClass 类中，类型变量 T 的值变成 Number 类型；IdentityClass 类实现了 GenericInterface，而此时 T 表示 Number 类型，因此等价于该类实现了 GenericInterface 接口；而对于 GenericInterface 接口来说，类型变量 U 也变成了 Number。这里我有意使用不同的变量名，以表明类型值沿链向上传播，且与变量名无关。 在什么时候使用泛型?(通常在决定是否使用泛型时, 有两个标准):当你的函数、接口或类将处理多种数据类型的时候;当函数、接口或类在多个地方使用该数据类型的时候\n处理函数参数\n泛型的语法是**\u003c\u003e**里写类型参数, 一般可以用 T 表示\nfunction print\u003cT\u003e(arg:T):T { console.log(arg) return arg } 泛型中的T就像一个占位符、 或者说一个变量, 在使用的时候可以把定义的类型像参数一样传入, 他可以原封不动的输出\n我们在使用的时候,可以有两种方式指定类型\n定义要使用的类型\nTS类型推断, 自动推导出类型\nprint\u003cstring\u003e ('hello') // 定义T为string print('hello') // ts类型推断, 自动推导类型为string type和Interface都可以定义函数类型,也可以用泛型来写,\ntype写法如下:\ntype Print = \u003cT\u003e(arg: T) =\u003e T const printFn:Print = function print(arg) { console.log(arg) return arg } interface写法如下:\ninterface Iprint\u003cT\u003e { (arg: T): T } function print\u003cT\u003e(arg:T) { console.log(arg) return arg } const myPrint: Iprint\u003cnumber\u003e = print 默认参数\n如果要给泛型加默认参数,可以这么写:\ninterface Iprint\u003cT = number\u003e { (arg: T): T } function print\u003cT\u003e(arg:T) { console.log(arg) return arg } const myPrint: Iprint = print 处理多个函数参数\n现在有这么一个函数,传入一个只有两项的元组,减缓元组的第0项和第1项,返回这个元组\nfunction swap(tuple) { return [tuple[1], tuple[0]] } 这样写,我们就丧失了类型, 用泛型来改造一下\n我们用T代表第0项的类型, 用U代表第1项的类型\nfucntion swap\u003cT, U\u003e(tuple: [T, U]): [U, T] { return [tuple[1], tuple[0]] } 这样就实现了元组的第一个元素和第二个元素的类型的控制\n函数副作用操作\n泛型不仅可以很方便的约束函数的参数类型, 还可以用在函数执行副作用操作时\n比如我们有一个通用的异步方法, 想根据不同的url请求返回不同类型的数据\nfunction request (url : string){ return fetch(url).then(res =\u003e rs.json()) } 调一个获取用户信息的接口:\nreqeust ('user/info').then(res =\u003e { console.log(res) // 返回res any 类型 }) 我们希望调用api 都清晰的知道返回类型是什么数据结构,就可以这样\ninterface UserInfo { name: string age: number } function request\u003cT\u003e(url:string): Promise\u003cT\u003e { return fetch(url).then(res =\u003e res.json()) } request\u003cUserInfo\u003e('user/info').then(res =\u003e{ console.log(res) }) 约束泛型(泛型约束): 有时我们可能希望限制每个类型变量接受的类型数量，这就是泛型约束的作用 确保属性存在\n如我们在处理字符串或数组时, 我们会假设length属性是可用的\nfunction indetity \u003cT\u003e (arg: T): T{ console.log(arg.length); //error } 在这种情况下,编译器是不知道T确实含有length属性的, 尤其是在可以将任何类型赋给类型变量T的情况下, 我们需要做的就是让类型变量extends一个含有我们所需属性的接口:\ninterface Length { length: number } function identity\u003cT extends Length\u003e(arg: T) : T { console.log(arg.length); // 可以获取length属性 return arg } 我们还可以使用**,**分隔开多种约束类型, 比如. 上述情况,还可以显式的将变量设置为数组类型:\nfunction identity\u003cT\u003e(arg: T[]): T[] { console.log(arg.length) return arg; } //or function identity\u003cT\u003e(arg: Array\u003cT\u003e): Array\u003cT\u003e { console.log(arg.length); return arg; } 检查对象上的键是否存在\nkeyof操作符: 该操作符可以用于获取某种类型的所有键,其返回类型是联合类型, 如下:\ninterface Person { name: string; age: number; location: string } type K1 = keyof Person; // \"name\" | \"age\" | \"location\" type K2 = keyof Person[]; // number | \"length\" | \"push\" | \"concat\" | ... type K3 = keyof { [x: string]: Person }; // string | number 结合前面介绍的 extends 约束，即限制输入的属性名包含在 keyof 返回的联合类型中。具体的使用方式如下：\nfunction getProperty\u003cT, K extends keyof T\u003e(obj: T, key: K): T[K] { return obj[key]; } 如何使用getProperty()函数:\nfunction getProperty\u003cT, K extends keyof T\u003e(obj: T, key: K): T[K] { return obj[key]; } 泛型条件类型 条件类型会以一个条件表达式进行类型检测,从而在两种类型中选择其一:\nT extends U ? x:y 以上表达式的意思是: 若T能够赋值给U,那么类型是x, 否则为y 在条件类型表达式中, 我们通常会结合 infre关键字, 实现类型抽取\ninterface Dictionary\u003cT = any\u003e { [key: string]: T; } type StrDict = Dictionary\u003cstring\u003e type DictMember\u003cT\u003e = T extends Dictionary\u003cinfer V\u003e ? V : never type StrDictMember = DictMember\u003cStrDict\u003e // string 泛型的一些应用 小结 高级类型(二) 索引类型 映射类型 条件类型 工具类型 类型体操是什么 TS声明文件 declare .d.ts 使用第三方库 自己写声明文件 参考文章：\nhttps://juejin.cn/post/7068081327857205261\n",
  "wordCount" : "9028",
  "inLanguage": "en",
  "datePublished": "2023-02-22T10:51:44+08:00",
  "dateModified": "2023-02-22T10:51:44+08:00",
  "author":[{
    "@type": "Person",
    "name": "XP"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sirius00.github.io/posts/tech/typescript%E7%9A%84%E4%BD%BF%E7%94%A8/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "XP's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sirius00.github.io/img/cat.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>



<script async src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>


<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sirius00.github.io/" accesskey="h" title="XP&#39;s Blog (Alt + H)">
            <img src="https://sirius00.github.io/img/cat.png" alt="logo" aria-label="logo"
                 height="35">XP&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sirius00.github.io/search" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                <span>🔍 搜索</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/" title="🏠 主页">
                <span>🏠 主页</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/posts" title="📚 文章">
                <span>📚 文章</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/tags" title="🧩 标签">
                <span>🧩 标签</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/archives/" title="⏱️ 时间轴">
                <span>⏱️ 时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/about" title="🙋🏻‍♂️ 关于">
                <span>🙋🏻‍♂️ 关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://sirius00.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://sirius00.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://sirius00.github.io/posts/tech/">👨🏻‍💻 技术</a></div>
            <h1 class="post-title">
                Typescript的使用
            </h1>
            <div class="post-meta">创建:&nbsp;<span title='2023-02-22 10:51:44 +0800 CST'>2023-02-22</span>&nbsp;|&nbsp;更新:&nbsp;2023-02-22&nbsp;|&nbsp;字数:&nbsp;9028字&nbsp;|&nbsp;时长:&nbsp;19分钟&nbsp;|&nbsp;
作者:&nbsp;XP



                &nbsp;|&nbsp;标签: &nbsp;
                <ul class="post-tags-meta">
                    <a href="https://sirius00.github.io/tags/%E5%89%8D%E7%AB%AF/">前端</a>
                </ul>

                
                <span id="busuanzi_container_page_pv">
                &nbsp;| 访问: <span id="busuanzi_value_page_pv"></span>
            </span>

</div>
        </header> 
        <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">文章目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#ts%e5%9f%ba%e7%a1%80" aria-label="TS基础">TS基础</a><ul>
                        
                <li>
                    <a href="#%e5%8f%98%e9%87%8f%e7%9a%84%e5%a3%b0%e6%98%8e" aria-label="变量的声明:">变量的声明:</a></li>
                <li>
                    <a href="#%e5%9f%ba%e7%a1%80%e7%b1%bb%e5%9e%8b" aria-label="基础类型">基础类型</a><ul>
                        
                <li>
                    <a href="#boolean-number-string" aria-label="boolean、 number、 string">boolean、 number、 string</a></li>
                <li>
                    <a href="#undefined%e5%92%8cnull%e7%b1%bb%e5%9e%8b" aria-label="undefined和null类型">undefined和null类型</a></li>
                <li>
                    <a href="#any-unknown%e5%92%8cvoid%e7%b1%bb%e5%9e%8b" aria-label="any、 unknown和void类型">any、 unknown和void类型</a></li>
                <li>
                    <a href="#%e6%95%b0%e7%bb%84%e7%b1%bb%e5%9e%8b" aria-label="数组类型">数组类型</a></li>
                <li>
                    <a href="#%e5%85%83%e7%bb%84%e7%b1%bb%e5%9e%8btuple" aria-label="元组类型(tuple)">元组类型(tuple)</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e7%b1%bb%e5%9e%8b" aria-label="函数类型">函数类型</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e5%86%85%e5%ae%b9" aria-label="基本内容:">基本内容:</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e7%b1%bb%e5%9e%8b-1" aria-label="函数类型:">函数类型:</a></li>
                <li>
                    <a href="#%e5%8f%af%e9%80%89%e5%8f%82%e6%95%b0" aria-label="可选参数:">可选参数:</a></li>
                <li>
                    <a href="#%e9%bb%98%e8%ae%a4%e5%8f%82%e6%95%b0" aria-label="默认参数:">默认参数:</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e8%b5%8b%e5%80%bc" aria-label="函数赋值:">函数赋值:</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e9%87%8d%e8%bd%bd" aria-label="函数重载:">函数重载:</a></li>
                <li>
                    <a href="#%e4%b8%8d%e5%90%8c%e5%8f%82%e6%95%b0%e4%b8%aa%e6%95%b0" aria-label="不同参数个数:">不同参数个数:</a></li></ul>
                </li>
                <li>
                    <a href="#interface" aria-label="interface">interface</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" aria-label="基本概念:">基本概念:</a></li>
                <li>
                    <a href="#%e5%8f%af%e9%80%89%e5%b1%9e%e6%80%a7" aria-label="可选属性:">可选属性:</a></li>
                <li>
                    <a href="#%e5%8f%aa%e8%af%bb%e5%b1%9e%e6%80%a7" aria-label="只读属性:">只读属性:</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%b1%9e%e6%80%a7%e5%8f%af%e7%b4%a2%e5%bc%95%e7%9a%84%e7%b1%bb%e5%9e%8b" aria-label="自定义属性(可索引的类型):">自定义属性(可索引的类型):</a></li>
                <li>
                    <a href="#duck-typing%e9%b8%ad%e5%ad%90%e7%b1%bb%e5%9e%8b" aria-label="duck typing(鸭子类型):">duck typing(鸭子类型):</a></li>
                <li>
                    <a href="#%e6%8e%a5%e5%8f%a3%e7%9a%84%e5%ae%9e%e7%8e%b0" aria-label="接口的实现:">接口的实现:</a></li>
                <li>
                    <a href="#%e5%ad%97%e9%9d%a2%e9%87%8f%e8%b5%8b%e5%80%bc" aria-label="字面量赋值:">字面量赋值:</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%b1%bb" aria-label="类">类</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5-1" aria-label="基本概念:">基本概念:</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e5%86%99%e6%b3%95" aria-label="基本写法:">基本写法:</a></li>
                <li>
                    <a href="#%e7%bb%a7%e6%89%bf" aria-label="继承:">继承:</a></li>
                <li>
                    <a href="#super%e5%85%b3%e9%94%ae%e5%ad%97" aria-label="super关键字:">super关键字:</a></li>
                <li>
                    <a href="#%e5%a4%9a%e6%80%81" aria-label="多态:">多态:</a></li>
                <li>
                    <a href="#public" aria-label="public:">public:</a></li>
                <li>
                    <a href="#private" aria-label="private">private</a></li>
                <li>
                    <a href="#protected" aria-label="protected">protected</a></li>
                <li>
                    <a href="#static" aria-label="static">static</a></li>
                <li>
                    <a href="#getters--setters" aria-label="getters&amp;ndash;setters">getters&ndash;setters</a></li>
                <li>
                    <a href="#%e6%8a%bd%e8%b1%a1%e7%b1%bb" aria-label="抽象类">抽象类</a></li>
                <li>
                    <a href="#this%e7%b1%bb%e5%9e%8b" aria-label="this类型">this类型</a></li></ul>
                </li>
                <li>
                    <a href="#interface%e5%92%8cclass-%e7%9a%84%e5%85%b3%e7%b3%bb" aria-label="interface和class 的关系">interface和class 的关系</a><ul>
                        
                <li>
                    <a href="#implements" aria-label="implements:">implements:</a></li>
                <li>
                    <a href="#%e5%a4%84%e7%90%86%e5%85%ac%e5%85%b1%e7%9a%84%e5%b1%9e%e6%80%a7%e5%92%8c%e6%96%b9%e6%b3%95" aria-label="处理公共的属性和方法">处理公共的属性和方法</a></li>
                <li>
                    <a href="#%e7%bb%93%e6%9d%9f%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e5%92%8c%e9%9d%99%e6%80%81%e5%b1%9e%e6%80%a7" aria-label="结束构造函数和静态属性">结束构造函数和静态属性</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9e%9a%e4%b8%be" aria-label="枚举">枚举</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="基本使用">基本使用</a></li>
                <li>
                    <a href="#%e5%8f%8d%e5%90%91%e6%98%a0%e5%b0%84%e7%9a%84%e5%8e%9f%e7%90%86" aria-label="反向映射的原理">反向映射的原理</a></li>
                <li>
                    <a href="#%e6%89%8b%e5%8a%a8%e8%b5%8b%e5%80%bc" aria-label="手动赋值">手动赋值</a></li>
                <li>
                    <a href="#%e8%ae%a1%e7%ae%97%e6%88%90%e5%91%98" aria-label="计算成员">计算成员</a></li>
                <li>
                    <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%9e%9a%e4%b8%be" aria-label="字符串枚举">字符串枚举</a></li>
                <li>
                    <a href="#%e5%b8%b8%e9%87%8f%e6%9e%9a%e4%b8%be" aria-label="常量枚举">常量枚举</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93" aria-label="小结">小结</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%b1%bb%e5%9e%8b%e6%8e%a8%e8%ae%ba" aria-label="类型推论">类型推论</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5-2" aria-label="基本概念:">基本概念:</a></li>
                <li>
                    <a href="#%e5%ae%9a%e4%b9%89%e6%97%b6%e4%b8%8d%e8%b5%8b%e5%80%bc" aria-label="定义时不赋值">定义时不赋值</a></li>
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e5%8f%98%e9%87%8f" aria-label="初始化变量">初始化变量</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e9%bb%98%e8%ae%a4%e5%8f%82%e6%95%b0%e5%80%bc" aria-label="设置默认参数值">设置默认参数值</a></li>
                <li>
                    <a href="#%e5%86%b3%e5%ae%9a%e5%87%bd%e6%95%b0%e8%bf%94%e5%9b%9e%e5%80%bc" aria-label="决定函数返回值">决定函数返回值</a></li>
                <li>
                    <a href="#%e6%9c%80%e4%bd%b3%e9%80%9a%e7%94%a8%e7%b1%bb%e5%9e%8b" aria-label="最佳通用类型">最佳通用类型</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93-1" aria-label="小结">小结</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#ts%e8%bf%9b%e9%98%b6" aria-label="TS进阶">TS进阶</a><ul>
                        
                <li>
                    <a href="#%e9%ab%98%e7%ba%a7%e7%b1%bb%e5%9e%8b%e4%b8%80" aria-label="高级类型(一)">高级类型(一)</a></li>
                <li>
                    <a href="#%e8%81%94%e5%90%88%e7%b1%bb%e5%9e%8b" aria-label="联合类型">联合类型</a></li>
                <li>
                    <a href="#%e4%ba%a4%e5%8f%89%e7%b1%bb%e5%9e%8b" aria-label="交叉类型">交叉类型</a></li>
                <li>
                    <a href="#%e7%b1%bb%e5%9e%8b%e5%88%ab%e5%90%8dtype-aliase" aria-label="类型别名(type aliase)">类型别名(type aliase)</a></li>
                <li>
                    <a href="#%e7%b1%bb%e5%9e%8b%e4%bf%9d%e6%8a%a4" aria-label="类型保护">类型保护</a></li>
                <li>
                    <a href="#%e7%b1%bb%e5%9e%8b%e7%bc%a9%e5%b0%8f" aria-label="类型缩小:">类型缩小:</a></li>
                <li>
                    <a href="#%e7%b1%bb%e5%9e%8b%e6%96%ad%e8%a8%80" aria-label="类型断言">类型断言</a></li>
                <li>
                    <a href="#%e5%ad%97%e9%9d%a2%e9%87%8f%e7%b1%bb%e5%9e%8b" aria-label="字面量类型">字面量类型</a></li>
                <li>
                    <a href="#%e5%ad%97%e9%9d%a2%e9%87%8f%e6%8e%a8%e7%90%86" aria-label="字面量推理">字面量推理</a></li>
                <li>
                    <a href="#%e6%b3%9b%e5%9e%8b" aria-label="泛型">泛型</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5-3" aria-label="基本概念:">基本概念:</a></li>
                <li>
                    <a href="#%e6%b3%9b%e5%9e%8b%e7%9a%84%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="泛型的基本使用">泛型的基本使用</a></li>
                <li>
                    <a href="#%e7%ba%a6%e6%9d%9f%e6%b3%9b%e5%9e%8b%e6%b3%9b%e5%9e%8b%e7%ba%a6%e6%9d%9f-%e6%9c%89%e6%97%b6%e6%88%91%e4%bb%ac%e5%8f%af%e8%83%bd%e5%b8%8c%e6%9c%9b%e9%99%90%e5%88%b6%e6%af%8f%e4%b8%aa%e7%b1%bb%e5%9e%8b%e5%8f%98%e9%87%8f%e6%8e%a5%e5%8f%97%e7%9a%84%e7%b1%bb%e5%9e%8b%e6%95%b0%e9%87%8f%e8%bf%99%e5%b0%b1%e6%98%af%e6%b3%9b%e5%9e%8b%e7%ba%a6%e6%9d%9f%e7%9a%84%e4%bd%9c%e7%94%a8" aria-label="约束泛型(泛型约束): 有时我们可能希望限制每个类型变量接受的类型数量，这就是泛型约束的作用">约束泛型(泛型约束): 有时我们可能希望限制每个类型变量接受的类型数量，这就是泛型约束的作用</a></li>
                <li>
                    <a href="#%e6%b3%9b%e5%9e%8b%e6%9d%a1%e4%bb%b6%e7%b1%bb%e5%9e%8b" aria-label="泛型条件类型">泛型条件类型</a></li>
                <li>
                    <a href="#%e6%b3%9b%e5%9e%8b%e7%9a%84%e4%b8%80%e4%ba%9b%e5%ba%94%e7%94%a8" aria-label="泛型的一些应用">泛型的一些应用</a></li>
                <li>
                    <a href="#%e5%b0%8f%e7%bb%93-2" aria-label="小结">小结</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%ab%98%e7%ba%a7%e7%b1%bb%e5%9e%8b%e4%ba%8c" aria-label="高级类型(二)">高级类型(二)</a></li>
                <li>
                    <a href="#ts%e5%a3%b0%e6%98%8e%e6%96%87%e4%bb%b6" aria-label="TS声明文件">TS声明文件</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
            const id = encodeURI(element.getAttribute('id')).toLowerCase();
            if (element === activeElement){
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
            } else {
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
            }
        })
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        
        <div class="post-content"><h2 id="ts基础">TS基础<a hidden class="anchor" aria-hidden="true" href="#ts基础">#</a></h2>
<h3 id="变量的声明">变量的声明:<a hidden class="anchor" aria-hidden="true" href="#变量的声明">#</a></h3>
<p>在typescript中定义变量需要指定 <strong>标志符</strong> 的类型</p>
<p>完整的声明格式如下:</p>
<ul>
<li>
<p>声明了类型后typescript就会进行<strong>类型检测</strong>, 声明的类型可以称之为<strong>类型注解</strong></p>
</li>
<li>
<p>var/let/const  <strong>标志符: 数据类型 - 赋值</strong></p>
</li>
<li>
<p>// string: Typescript中的字符串类型^^</p>
</li>
<li>
<p>// String: Javascript的字符串包装类的类型^^</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;测试&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.8</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> String <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; Hello&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> {}
</span></span></code></pre></div></li>
</ul>
<h3 id="基础类型">基础类型<a hidden class="anchor" aria-hidden="true" href="#基础类型">#</a></h3>
<h4 id="boolean-number-string">boolean、 number、 string<a hidden class="anchor" aria-hidden="true" href="#boolean-number-string">#</a></h4>
<h4 id="undefined和null类型">undefined和null类型<a hidden class="anchor" aria-hidden="true" href="#undefined和null类型">#</a></h4>
<h4 id="any-unknown和void类型">any、 unknown和void类型<a hidden class="anchor" aria-hidden="true" href="#any-unknown和void类型">#</a></h4>
<ul>
<li>
<p>不清楚什么类型,可以使用any类型.这些值可能来自动态的内容,比如用户输入或第三方库</p>
</li>
<li>
<p>unknown 类型代表任何类型，它的定义和 any 定义很像，但是它是一个安全类型，使用 unknown 做任何事情都是不合法的。</p>
</li>
<li>
<p>void类型与 any 类型相反，它表示没有任何类型。比如函数没有明确返回值，默认返回 Void 类型</p>
</li>
<li>
<p><em>never类型</em></p>
<ul>
<li>
<p>表示的是那些永远不存在的值的类型</p>
</li>
<li>
<p>有些情况下值会永不存在，比如，</p>
<ul>
<li>如果一个函数执行时抛出了异常，那么这个函数永远不存在返回值，因为抛出异常会直接中断程序运行。</li>
<li>函数中执行无限循环的代码，使得程序永远无法运行到函数返回值那一步。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// 异常
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fn</span>(<span style="color:#a6e22e">msg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span> { 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#a6e22e">msg</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 死循环 千万别这么写，会内存溢出
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fn</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span> { 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//使用场景
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handle</span>(<span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">number</span> ) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">switch</span> (<span style="color:#66d9ef">typeof</span>(<span style="color:#a6e22e">message</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;string&#39;</span><span style="color:#f92672">:</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;string处理方式&#39;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#39;number&#39;</span><span style="color:#f92672">:</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;number处理方式&#39;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">check</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">message</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p>never类型是任何类型的子类型,也可以赋值个以任何类型</p>
</li>
<li>
<p>没有类型是never类型的子类型,没有类型可以赋值给never类型(除了never类型本身之外).即使any也不可以赋值给never</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="数组类型">数组类型<a hidden class="anchor" aria-hidden="true" href="#数组类型">#</a></h4>
<ul>
<li><img loading="lazy" src="https://firebasestorage.googleapis.com/v0/b/firescript-577a2.appspot.com/o/imgs%2Fapp%2Fxp%2FDAKPbBHvAF.22.16.png?alt=media&amp;token=8b9b6825-3e6d-435e-b226-03368795c9fa" alt="img"  />
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// 不好的习惯: 一个数组中在Typescript开发中, 最好存放的数据类型是固定的
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">names</span><span style="color:#f92672">:</span> Array<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">string</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> []   <span style="color:#75715e">//不推荐的写法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">name2</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[] <span style="color:#f92672">=</span> []         <span style="color:#75715e">// 推荐写法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">names</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">123</span>)  <span style="color:#75715e">//报错
</span></span></span></code></pre></div><ul>
<li>用接口表示数组:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">NumberArray</span> {
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">index</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>]<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">fibonacci</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">NumberArray</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>];
</span></span></code></pre></div><ul>
<li>
<p>嵌套数组:</p>
</li>
<li>
<p>any在数组中应用:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">list</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>[] <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;xcatliu&#39;</span>, <span style="color:#ae81ff">25</span>, { <span style="color:#a6e22e">website</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;http://xcatliu.com&#39;</span> }];
</span></span></code></pre></div><h4 id="元组类型tuple">元组类型(tuple)<a hidden class="anchor" aria-hidden="true" href="#元组类型tuple">#</a></h4>
<ul>
<li>
<p>元组类型允许表示一个已知元素数量和类型的数组,各元素的类型不必相同</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// 1.数组的弊端
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// const info: any[] = [&#39;why&#39;, 18, 1.88]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// const name  = info[0]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// console.log(name.length)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//2.元组的特点
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// const info: [string, number, number] = [&#39;why&#39;, 12, 1.88]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// const name = info[0]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// console.log(name.length)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// export {}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//3.应用场景
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// function useState(state: any) {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   let current = state
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//   const change = (newState: any) =&gt; {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//     current = newState
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//   const tuple: [any, (newState: any) =&gt; void] = [current, change]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//   return tuple
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//优化
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">useState</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">state</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">current</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">state</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">change</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">newState</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">current</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newState</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">tuple</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">T</span>, (<span style="color:#a6e22e">newState</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>) =&gt; <span style="color:#66d9ef">void</span>] <span style="color:#f92672">=</span> [<span style="color:#a6e22e">current</span>, <span style="color:#a6e22e">change</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">tuple</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">counter</span>, <span style="color:#a6e22e">setCounrt</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">setTitle</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#e6db74">&#39;123&#39;</span>)
</span></span></code></pre></div></li>
<li>
<p>可以对元组类型使用数组的方法,比如使用push时,不会有越界报错</p>
</li>
<li>
<p>??和!!的作用</p>
<p>!!的作用:</p>
<ul>
<li>
<p>将一个其他类型变量转换成boolean类型</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">message</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// const flag = Boolean(message)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// console.log(flag);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 将变量转为boolean类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">flag</span> <span style="color:#f92672">=</span> <span style="color:#f92672">!!</span><span style="color:#a6e22e">message</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">flag</span>)
</span></span></code></pre></div></li>
</ul>
<p>??的作用:</p>
<ul>
<li>
<p>空值合并操作符(??)是一个逻辑操作符, 当操作符的左侧是null 或者 undefined时, 返回其右侧操作数, 否则返回左侧操作数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">message</span> <span style="color:#f92672">??</span> <span style="color:#e6db74">&#34;你好啊&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">content</span>)
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="函数类型">函数类型<a hidden class="anchor" aria-hidden="true" href="#函数类型">#</a></h3>
<h4 id="基本内容">基本内容:<a hidden class="anchor" aria-hidden="true" href="#基本内容">#</a></h4>
<ul>
<li>
<p>TS定义函数类型需要定义输入参数类型和输出类型</p>
</li>
<li>
<p>输出类型也可以忽略,因为ts能够根据返回语句自动推断出返回值类型</p>
</li>
<li>
<p>函数没有明确返回值,默认返回Void类型</p>
</li>
<li>
<p>函数表达式写法:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">add2</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span><span style="color:#f92672">+</span><span style="color:#a6e22e">y</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h4 id="函数类型-1">函数类型:<a hidden class="anchor" aria-hidden="true" href="#函数类型-1">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// 1. 函数作为参数时, 在参数中如何编写类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">foo</span>() {}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">FooFnType</span> <span style="color:#f92672">=</span> () =&gt; <span style="color:#66d9ef">void</span>  <span style="color:#75715e">//定义函数类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">bar</span> (<span style="color:#a6e22e">fn</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">FooFnType</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fn</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bar</span>(<span style="color:#a6e22e">foo</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2. 定义常量时, 编写函数的类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">AddFnType</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">num1</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>, <span style="color:#a6e22e">num2</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>) =&gt; <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">AddFnType</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">num1</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>, <span style="color:#a6e22e">num2</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">num1</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">num2</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="可选参数">可选参数:<a hidden class="anchor" aria-hidden="true" href="#可选参数">#</a></h4>
<ul>
<li>
<p>参数后面加个问号, 表示这个参数是可选的</p>
</li>
<li>
<p>可选参数要放在函数入参的最后面,不然会编译出错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">add2</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>, <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>, <span style="color:#a6e22e">z</span><span style="color:#f92672">?:</span> <span style="color:#a6e22e">number</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span><span style="color:#f92672">+</span><span style="color:#a6e22e">y</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">add</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">add</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)
</span></span></code></pre></div></li>
</ul>
<h4 id="默认参数">默认参数:<a hidden class="anchor" aria-hidden="true" href="#默认参数">#</a></h4>
<ul>
<li>跟js写法一样,在入参里定义初始值. 和可选参数不同的是,默认参数可以不放在函数入参的最后面</li>
<li>如果带默认值的参数不是最后一个参数,用户必须明确的传入<strong>undefined</strong>值来获得默认值</li>
<li><code>add(undefined, 100)</code></li>
</ul>
<h4 id="函数赋值">函数赋值:<a hidden class="anchor" aria-hidden="true" href="#函数赋值">#</a></h4>
<h4 id="函数重载">函数重载:<a hidden class="anchor" aria-hidden="true" href="#函数重载">#</a></h4>
<p>比如我们实现一个add函数, 如果传入参数是数字, 就返回数字相加, 如果传入参数是字符串, 就返回字符串拼接</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">x</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;string&#39;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">join</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">x</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;number&#39;</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">acc</span>, <span style="color:#a6e22e">cur</span>) =&gt; <span style="color:#a6e22e">acc</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">cur</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在ts中, 实现函数重载,需要多次声明这个函数,前几次是函数定义,列出所有的情况,最后一次是函数实现,需要比较宽泛的类型</p>
<h4 id="不同参数个数">不同参数个数:<a hidden class="anchor" aria-hidden="true" href="#不同参数个数">#</a></h4>
<p>假设这个 add 函数接受更多的参数个数，比如还可以传入一个参数 y，如果传了y，就把 y 也加上或拼接上，就可以这么写，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>[], <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[], <span style="color:#a6e22e">y</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>[], <span style="color:#a6e22e">y</span><span style="color:#f92672">?:</span> <span style="color:#a6e22e">any</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">y</span>) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">y</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;number&#39;</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">acc</span>, <span style="color:#a6e22e">cur</span>) =&gt; <span style="color:#a6e22e">acc</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">cur</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span>.<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">acc</span>, <span style="color:#a6e22e">cur</span>) =&gt; <span style="color:#a6e22e">acc</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">cur</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">y</span>) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">y</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;string&#39;</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">join</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span>.<span style="color:#a6e22e">join</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">x</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;string&#39;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">join</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">x</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;number&#39;</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>.<span style="color:#a6e22e">reduce</span>((<span style="color:#a6e22e">acc</span>, <span style="color:#a6e22e">cur</span>) =&gt; <span style="color:#a6e22e">acc</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">cur</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">add</span>([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]))      <span style="color:#75715e">// 6
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">add</span>([<span style="color:#e6db74">&#39;lin&#39;</span>, <span style="color:#e6db74">&#39;18&#39;</span>]))  <span style="color:#75715e">// &#39;lin,18&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">add</span>([<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>], [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>])) <span style="color:#75715e">// 12
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">add</span>([<span style="color:#e6db74">&#39;lin&#39;</span>, <span style="color:#e6db74">&#39;18&#39;</span>], [<span style="color:#e6db74">&#39;man&#39;</span>, <span style="color:#e6db74">&#39;handsome&#39;</span>])) <span style="color:#75715e">// &#39;lin,18,man,handsome&#39;
</span></span></span></code></pre></div><h3 id="interface">interface<a hidden class="anchor" aria-hidden="true" href="#interface">#</a></h3>
<h4 id="基本概念">基本概念:<a hidden class="anchor" aria-hidden="true" href="#基本概念">#</a></h4>
<blockquote>
<p>interface 不是 JS 中的关键字，所以 TS 编译成 JS 之后，这些 interface 是不会被转换过去的，都会被删除掉，interface 只是在 TS 中用来做静态检查。</p>
</blockquote>
<p>interface(接口)是TS设计出来用于定义对象类型的, 可以对对象的形状进行描述</p>
<p>定义interface一般首字母大写</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">p1</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lin&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>属性必须和类型定义的时候完全一致,少写了属性会报错</li>
</ul>
<h4 id="可选属性">可选属性:<a hidden class="anchor" aria-hidden="true" href="#可选属性">#</a></h4>
<ul>
<li>跟函数的可选参数是类似的,在属性上加个**?**  , 这个属性就是可选的</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">?:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">p1</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lin&#39;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="只读属性">只读属性:<a hidden class="anchor" aria-hidden="true" href="#只读属性">#</a></h4>
<ul>
<li>
<p>如果希望某个属性不被改变, 可以这么写:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">readonly</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>interfce描述函数类型:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">ISum</span> {
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span><span style="color:#a6e22e">number</span>,<span style="color:#a6e22e">y</span><span style="color:#f92672">:</span><span style="color:#a6e22e">number</span>)<span style="color:#f92672">:</span><span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">:</span><span style="color:#a6e22e">ISum</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">num1</span>, <span style="color:#a6e22e">num2</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">num1</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">num2</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h4 id="自定义属性可索引的类型">自定义属性(可索引的类型):<a hidden class="anchor" aria-hidden="true" href="#自定义属性可索引的类型">#</a></h4>
<ul>
<li>
<p>在上文中,属性必须和类型定义的时候完全一致, 如果一个对象上有多个不确定的属性,该怎么办?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">RandomKey</span> {
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">propName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>]<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obj</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">RandomKey</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">a</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;hello&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">b</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lin&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">c</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;welcome&#39;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>如果把属性名定义为number 类型, 就是一个类数组了, 看上去和数组一模一样,<strong>当然不是真数组,数组上的方法他是没有的</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">LikeArray</span> {
</span></span><span style="display:flex;"><span>    [<span style="color:#a6e22e">propName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>]<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">arr</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">LikeArray</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;hello&#39;</span>, <span style="color:#e6db74">&#39;lin&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">arr</span>[<span style="color:#ae81ff">0</span>]  <span style="color:#75715e">// 可以使用下标来访问值
</span></span></span></code></pre></div></li>
</ul>
<h4 id="duck-typing鸭子类型">duck typing(鸭子类型):<a hidden class="anchor" aria-hidden="true" href="#duck-typing鸭子类型">#</a></h4>
<p>interface 还有一个响亮的名字: <strong>duck typing</strong> (鸭子类型)</p>
<p>只要数据满足了nterface定义的类型, ts就能编译通过, 如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">FunctionWithProps</span> {
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">fnName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>FunctionWithProps 接口描述了一个函数类型,还向这个函数类型添加了name属性, 这看上去完全是四不像, 但是这个定义是完全可以工作的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fn</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">FunctionWithProps</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">x</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fn</span>.<span style="color:#a6e22e">fnName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hello world&#39;</span>
</span></span></code></pre></div><h4 id="接口的实现">接口的实现:<a hidden class="anchor" aria-hidden="true" href="#接口的实现">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">ISwim</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">swimming</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">void</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">IEat</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">eating</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">void</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Animal</span> {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fish</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Animal</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">ISwim</span>, <span style="color:#a6e22e">IEat</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">swimming</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Fish Swimming&#34;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">eating</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Fish Eating&#34;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="字面量赋值">字面量赋值:<a hidden class="anchor" aria-hidden="true" href="#字面量赋值">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"></code></pre></div><h3 id="类">类<a hidden class="anchor" aria-hidden="true" href="#类">#</a></h3>
<h4 id="基本概念-1">基本概念:<a hidden class="anchor" aria-hidden="true" href="#基本概念-1">#</a></h4>
<p>JS 是靠原型和原型链来实现面向对象编程的，es6 新增了语法糖 class。</p>
<p>TS 通过 <strong>public、private、protected</strong> 三个修饰符来增强了 JS 中的类。</p>
<h4 id="基本写法">基本写法:<a hidden class="anchor" aria-hidden="true" href="#基本写法">#</a></h4>
<p>定义一个Person类, 有属性name 和方法 speak</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span>( <span style="color:#a6e22e">name</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">speak</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> is speaking`</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">p1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Person</span>(<span style="color:#e6db74">&#39;lin&#39;</span>)  <span style="color:#75715e">// 新建实例
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">name</span>  <span style="color:#75715e">//访问属性和方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">speak</span>()
</span></span></code></pre></div><h4 id="继承">继承:<a hidden class="anchor" aria-hidden="true" href="#继承">#</a></h4>
<p>使用<strong>extends</strong>关键字实现继承, 定义一个Student类继承自Person类</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">study</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> needs study`</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">s1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Student</span>(<span style="color:#e6db74">&#39;lin&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">s1</span>.<span style="color:#a6e22e">study</span>()
</span></span></code></pre></div><h4 id="super关键字">super关键字:<a hidden class="anchor" aria-hidden="true" href="#super关键字">#</a></h4>
<p>上例中Student 没有定义自己的属性,可以不写 <strong>super</strong>, 但是如果Student类有自己的属性, 就要用super关键字来把父类的属性继承过来,比如,Student类新增一个grade属性 , 不写super 会报错:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">grade</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>,<span style="color:#a6e22e">grade</span><span style="color:#f92672">:</span><span style="color:#a6e22e">number</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>(<span style="color:#a6e22e">name</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">grade</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">grade</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">s1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Student</span>(<span style="color:#e6db74">&#39;lin&#39;</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h4 id="多态">多态:<a hidden class="anchor" aria-hidden="true" href="#多态">#</a></h4>
<ul>
<li>
<p>子类对父类方法进行了重写, 子类和父类调用同一个方法时会不一样</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>  <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">speak</span> () {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`Studnet </span><span style="color:#e6db74">${</span><span style="color:#66d9ef">super</span>.<span style="color:#a6e22e">speak</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div></li>
<li>
<p>ts中一般对抽象方法实现多态</p>
</li>
</ul>
<h4 id="public">public:<a hidden class="anchor" aria-hidden="true" href="#public">#</a></h4>
<ul>
<li>公有的, 一个类里默认所有的方法和属性都是public</li>
</ul>
<h4 id="private">private<a hidden class="anchor" aria-hidden="true" href="#private">#</a></h4>
<ul>
<li>
<p>规范: 在变量的名字之前加下划线 ``</p>
</li>
<li>
<p><strong>私有的,只属于这个类自己, 他的实例和继承他的子类都访问不到</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">speak</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> is speaking`</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">实例访问name</span> <span style="color:#a6e22e">会报错</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">继承他的子类</span>, <span style="color:#a6e22e">访问name</span> <span style="color:#a6e22e">属性</span> <span style="color:#a6e22e">会报错</span>
</span></span></code></pre></div></li>
</ul>
<h4 id="protected">protected<a hidden class="anchor" aria-hidden="true" href="#protected">#</a></h4>
<ul>
<li>
<p>受保护的, <strong>继承他的子类可以访问, 实例不能访问</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">speak</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> is speaking`</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">实例访问name属性</span>, <span style="color:#a6e22e">会报错</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">子类可以访问</span>
</span></span></code></pre></div></li>
</ul>
<h4 id="static">static<a hidden class="anchor" aria-hidden="true" href="#static">#</a></h4>
<ul>
<li>
<p><strong>静态属性与静态方法不需要实例化就可以访问，访问时直接通过类名来调用，静态方法不能访问当前类里的属性，只能访问当前类里的静态属性。</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span>String;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span>String){
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">run</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">在运动`</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">work</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">在工作`</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 静态属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span><span style="color:#a6e22e">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 静态方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">eat</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`他在喝水`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 静态方法不能访问当前类里的属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// 只能访问类里的静态属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Person</span>.<span style="color:#a6e22e">age</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Person</span>.<span style="color:#a6e22e">eat</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 他在喝水
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 30
</span></span></span></code></pre></div></li>
<li>
<p>static 是静态属性, 可以理解为 是类上的一些常量, <strong>实例不能访问</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">pi</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3.14</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">radius</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radius</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">calcLength</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Circle</span>.<span style="color:#a6e22e">pi</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">radius</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>  <span style="color:#75715e">// 计算周长，直接访问 Circle.pi
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h4 id="getters--setters">getters&ndash;setters<a hidden class="anchor" aria-hidden="true" href="#getters--setters">#</a></h4>
<ul>
<li>
<p>基本使用:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">_name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//访问器 setter/getters
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">set</span> <span style="color:#a6e22e">name</span> (<span style="color:#a6e22e">newName</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">newName</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">get</span> <span style="color:#a6e22e">name</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_name</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Person</span>(<span style="color:#e6db74">&#34;why&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;condewhy&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">name</span>)
</span></span></code></pre></div></li>
</ul>
<h4 id="抽象类">抽象类<a hidden class="anchor" aria-hidden="true" href="#抽象类">#</a></h4>
<pre><code>+ 所谓抽象类,就是指**只能被继承,不能被实例化的类**

+ 两个特点:

  + 抽象类不允许被实例化
  + 抽象类中的方法必须被子类实现

+ 抽象类用一个 **abstract** 关键字来定义

+ 正确用法:

  ```js
  abstract class Animal {
      constructor(name:string) {
          this.name = name
      }
      public name: string
      public abstract sayHi():void
  }
  
  
  class Dog extends Animal {
      constructor(name:string) {
          super(name)
      }
      public sayHi() {
          console.log('wang')
      }
  }
  ```

  

+ 抽象方法和多态:

  + 多态指的是，父类定义一个抽象方法，在**多个子类中有不同的实现**，运行的时候不同的子类就对应不同的操作，比如:

    ```js
    abstract class Animal {
        constructor(name:string) {
            this.name = name
        }
        public name: string
        public abstract sayHi():void
    }
    
    
    class Dog extends Animal {
        constructor(name:string) {
            super(name)
        }
        public sayHi() {
            console.log('wang')
        }
    }
    
    
    class Cat extends Animal {
        constructor(name:string) {
            super(name)
        }
        public sayHi() {
            console.log('miao')
        }
    }
    ```
</code></pre>
<h4 id="this类型">this类型<a hidden class="anchor" aria-hidden="true" href="#this类型">#</a></h4>
<ul>
<li>
<p>类的成员方法直接返回一个<strong>this</strong>, 这样就可以很方便的实现链式调用</p>
</li>
<li>
<p>链式调用:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StudyStep</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">step1</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;listen&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">step2</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;write&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">StudyStep</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">step1</span>().<span style="color:#a6e22e">step2</span>()    <span style="color:#75715e">// 链式调用
</span></span></span></code></pre></div></li>
<li>
<p>灵活调用子类父类方法</p>
<ul>
<li>
<p>在继承的时候,this既可以表示父类型,也可以表示子类型</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">StudyStep</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">step1</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;listen&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">step2</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;write&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyStudyStep</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">StudyStep</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">next</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;before done, study next!&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>   
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">m</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">MyStudyStep</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">step1</span>().<span style="color:#a6e22e">next</span>().<span style="color:#a6e22e">step2</span>().<span style="color:#a6e22e">next</span>()  <span style="color:#75715e">// 父类型和子类型上的方法都可随意调用
</span></span></span></code></pre></div></li>
<li>
<p>这就保持了父类和子类之间接口调用的连贯性</p>
</li>
</ul>
</li>
</ul>
<h3 id="interface和class-的关系">interface和class 的关系<a hidden class="anchor" aria-hidden="true" href="#interface和class-的关系">#</a></h3>
<p>interface同样可以用来约束class, 要实现约束, 需要用到 <strong>implements</strong> 关键字</p>
<h4 id="implements">implements:<a hidden class="anchor" aria-hidden="true" href="#implements">#</a></h4>
<ul>
<li>
<p>implements是 实现的意思, class 实现interface.</p>
</li>
<li>
<p>比如手机有播放功能,可以这样写:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">MusicInterface</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">playMusic</span>()<span style="color:#f92672">:</span> <span style="color:#66d9ef">void</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Cellphone</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">MusicInterface</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">playMusic</span>() {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>定义了约束之后,class 必须满足接口上的所有条件</li>
</ul>
</li>
</ul>
<h4 id="处理公共的属性和方法">处理公共的属性和方法<a hidden class="anchor" aria-hidden="true" href="#处理公共的属性和方法">#</a></h4>
<ul>
<li>
<p>不同的类有一些公有的属性和方法,使用继承很难完成,</p>
</li>
<li>
<p>使用implements实现方式:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">MusicInterface</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">playMusic</span>()<span style="color:#f92672">:</span> <span style="color:#66d9ef">void</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Car</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">MusicInterface</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">playMusic</span>() {}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Cellphone</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">MusicInterface</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">playMusic</span>() {}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>这样 Car 类和 Cellphone 类都约束了播放音乐的功能。</li>
</ul>
</li>
</ul>
<h4 id="结束构造函数和静态属性">结束构造函数和静态属性<a hidden class="anchor" aria-hidden="true" href="#结束构造函数和静态属性">#</a></h4>
<ul>
<li>
<p>使用implements只能约束实例上的属性和方法,要约束构造函数和静态属性, 需要这么写</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">CircleStatic</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">new</span> (<span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>)<span style="color:#f92672">:</span> <span style="color:#66d9ef">void</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">pi</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Circle</span><span style="color:#f92672">:</span><span style="color:#a6e22e">CircleStatic</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Circle</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">pi</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3.14</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">radius</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">radius</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radius</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h3 id="枚举">枚举<a hidden class="anchor" aria-hidden="true" href="#枚举">#</a></h3>
<h4 id="基本使用">基本使用<a hidden class="anchor" aria-hidden="true" href="#基本使用">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Direction</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">Up</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Down</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Left</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这样就定义了一个<strong>数字枚举</strong>, 两个特点:</p>
<ul>
<li>
<p>数字递增</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Up</span>)        <span style="color:#75715e">// 0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Down</span>)      <span style="color:#75715e">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Left</span>)      <span style="color:#75715e">// 2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Right</span>)     <span style="color:#75715e">// 3
</span></span></span></code></pre></div><ul>
<li>
<p>如果枚举第一个元素赋有初值,就会从初始值开始递增</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Direction</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Up</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Down</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Left</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Right</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Up</span>)        <span style="color:#75715e">// 6
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Down</span>)      <span style="color:#75715e">// 7
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Left</span>)      <span style="color:#75715e">// 8
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Right</span>)     <span style="color:#75715e">// 9
</span></span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>反向映射</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>[<span style="color:#ae81ff">0</span>])      <span style="color:#75715e">// Up
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>[<span style="color:#ae81ff">1</span>])      <span style="color:#75715e">// Down
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>[<span style="color:#ae81ff">2</span>])      <span style="color:#75715e">// Left
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">Direction</span>[<span style="color:#ae81ff">3</span>])      <span style="color:#75715e">// Right
</span></span></span></code></pre></div></li>
</ul>
<h4 id="反向映射的原理">反向映射的原理<a hidden class="anchor" aria-hidden="true" href="#反向映射的原理">#</a></h4>
<ul>
<li>
<p>枚举是如何实现反向映射的,编译后的代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">var</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#a6e22e">Direction</span>;
</span></span><span style="display:flex;"><span>(<span style="color:#66d9ef">function</span><span style="color:#960050;background-color:#1e0010"> </span>(<span style="color:#a6e22e">Direction</span>)<span style="color:#960050;background-color:#1e0010"> </span>{
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">    </span><span style="color:#a6e22e">Direction</span>[<span style="color:#a6e22e">Direction</span>[<span style="color:#e6db74">&#34;Up&#34;</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#ae81ff">6</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#e6db74">&#34;Up&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">    </span><span style="color:#a6e22e">Direction</span>[<span style="color:#a6e22e">Direction</span>[<span style="color:#e6db74">&#34;Down&#34;</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#ae81ff">7</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#e6db74">&#34;Down&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">    </span><span style="color:#a6e22e">Direction</span>[<span style="color:#a6e22e">Direction</span>[<span style="color:#e6db74">&#34;Left&#34;</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#ae81ff">8</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#e6db74">&#34;Left&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">    </span><span style="color:#a6e22e">Direction</span>[<span style="color:#a6e22e">Direction</span>[<span style="color:#e6db74">&#34;Right&#34;</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#ae81ff">9</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#e6db74">&#34;Right&#34;</span>;
</span></span><span style="display:flex;"><span>})(<span style="color:#a6e22e">Direction</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">||</span><span style="color:#960050;background-color:#1e0010"> </span>(<span style="color:#a6e22e">Direction</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span>{}));
</span></span></code></pre></div></li>
<li>
<p>主体代码是被包裹在一个自执行函数里, 封装了自己独特的作用域</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">Dierction</span>[<span style="color:#e6db74">&#34;Up&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>   <span style="color:#75715e">// 返回6
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">执行</span> <span style="color:#a6e22e">Direction</span>[<span style="color:#a6e22e">Direction</span>[<span style="color:#e6db74">&#34;Up&#34;</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#ae81ff">6</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#e6db74">&#34;Up&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">相当于执行</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Direction</span>[<span style="color:#e6db74">&#34;Up&#34;</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Direction</span>[<span style="color:#ae81ff">6</span>]<span style="color:#960050;background-color:#1e0010"> </span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010"> </span><span style="color:#e6db74">&#34;Up&#34;</span>
</span></span></code></pre></div></li>
<li>
<p>这就实现了枚举的反向映射</p>
</li>
</ul>
<h4 id="手动赋值">手动赋值<a hidden class="anchor" aria-hidden="true" href="#手动赋值">#</a></h4>
<ul>
<li>
<p>定义一个枚举类型来管理外卖状态</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">ItemStatus</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Buy</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Send</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Receive</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">ItemStatus</span>[<span style="color:#e6db74">&#39;Buy&#39;</span>])      <span style="color:#75715e">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">ItemStatus</span>[<span style="color:#e6db74">&#39;Send&#39;</span>])     <span style="color:#75715e">// 2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">ItemStatus</span>[<span style="color:#e6db74">&#39;Receive&#39;</span>])  <span style="color:#75715e">// 3
</span></span></span></code></pre></div></li>
<li>
<p>但有时候后端给你返回的数据状态是乱的，就需要我们手动赋值。</p>
</li>
<li>
<p>比如后端说 Buy 是 100，Send 是 20，Receive 是 1，就可以这么写，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">ItemStatus</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Buy</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Send</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Receive</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">ItemStatus</span>[<span style="color:#e6db74">&#39;Buy&#39;</span>])      <span style="color:#75715e">// 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">ItemStatus</span>[<span style="color:#e6db74">&#39;Send&#39;</span>])     <span style="color:#75715e">// 20
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">ItemStatus</span>[<span style="color:#e6db74">&#39;Receive&#39;</span>])  <span style="color:#75715e">// 1
</span></span></span></code></pre></div></li>
</ul>
<h4 id="计算成员">计算成员<a hidden class="anchor" aria-hidden="true" href="#计算成员">#</a></h4>
<ul>
<li>
<p>枚举中的成员可以被计算,比如经典的使用位运算合并权限, 可以这么写:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">FileAccess</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Read</span>    <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Write</span>   <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ReadWrite</span>  <span style="color:#f92672">=</span> <span style="color:#a6e22e">Read</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">Write</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">FileAccess</span>.<span style="color:#a6e22e">Read</span>)       <span style="color:#75715e">// 2   -&gt; 010
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">FileAccess</span>.<span style="color:#a6e22e">Write</span>)      <span style="color:#75715e">// 4   -&gt; 100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">FileAccess</span>.<span style="color:#a6e22e">ReadWrite</span>)  <span style="color:#75715e">// 6   -&gt; 110
</span></span></span></code></pre></div></li>
</ul>
<h4 id="字符串枚举">字符串枚举<a hidden class="anchor" aria-hidden="true" href="#字符串枚举">#</a></h4>
<ul>
<li>
<p>字符串枚举的意义在于,提供有具体意义的字符串, 可以更容易的理解代码和调试</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Direction</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Up</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;UP&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Down</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;DOWN&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Left</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;LEFT&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Right</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;RIGHT&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;UP&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">value</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">Direction</span>.<span style="color:#a6e22e">Up</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// do something
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div></li>
</ul>
<h4 id="常量枚举">常量枚举<a hidden class="anchor" aria-hidden="true" href="#常量枚举">#</a></h4>
<ul>
<li>常量枚举可以避免在额外生成的代码上的开销和额外的非直接的对枚举成员的访问</li>
</ul>
<h4 id="小结">小结<a hidden class="anchor" aria-hidden="true" href="#小结">#</a></h4>
<ul>
<li>枚举的意义在于，可以定义一些带名字的常量集合，清晰地表达意图和语义，更容易地理解代码和调试。</li>
<li>常用于和后端联调时，区分后端返回的一些代表状态语义的数字或字符串，降低阅读代码时的心智负担。</li>
</ul>
<h3 id="类型推论">类型推论<a hidden class="anchor" aria-hidden="true" href="#类型推论">#</a></h3>
<h4 id="基本概念-2">基本概念:<a hidden class="anchor" aria-hidden="true" href="#基本概念-2">#</a></h4>
<ul>
<li>TypeScript里，在有些没有明确指出类型的地方，类型推论会<strong>帮助提供类型</strong>。</li>
<li>这种推断发生在初始化变量和成员，设置默认参数值和决定函数返回值时。</li>
</ul>
<h4 id="定义时不赋值">定义时不赋值<a hidden class="anchor" aria-hidden="true" href="#定义时不赋值">#</a></h4>
<ul>
<li>定义时不赋值，就会被 TS 自动推导成 any 类型，之后随便怎么赋值都不会报错。</li>
</ul>
<h4 id="初始化变量">初始化变量<a hidden class="anchor" aria-hidden="true" href="#初始化变量">#</a></h4>
<ul>
<li>因为赋值的时候赋的是一个字符串类型，所以 TS 自动推导出 userName 是 string 类型。</li>
<li>这个时候，再更改 userName 时，就必须是 string 类型，是其他类型就报错</li>
</ul>
<h4 id="设置默认参数值">设置默认参数值<a hidden class="anchor" aria-hidden="true" href="#设置默认参数值">#</a></h4>
<ul>
<li>
<p>比如，定义一个打印年龄的函数，默认值是 18</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">printAge</span>(<span style="color:#a6e22e">num</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">18</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">num</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">num</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>那么 TS 会自动推导出 printAge 的入参类型，传错了类型会报错。</p>
</li>
</ul>
<h4 id="决定函数返回值">决定函数返回值<a hidden class="anchor" aria-hidden="true" href="#决定函数返回值">#</a></h4>
<ul>
<li>比如一个函数不写返回值，ts自动推导出返回值类型是void</li>
</ul>
<h4 id="最佳通用类型">最佳通用类型<a hidden class="anchor" aria-hidden="true" href="#最佳通用类型">#</a></h4>
<ul>
<li>当需要从几个表达式中推断类型时候，会使用这些表达式的类型来推断出一个最合适的通用类型。</li>
</ul>
<h4 id="小结-1">小结<a hidden class="anchor" aria-hidden="true" href="#小结-1">#</a></h4>
<ul>
<li>类型推论虽然能为我们提供帮助，但既然写了 TS，除非是函数默认返回类型为 void 这种大家都知道的，其他的最好每个地方都定义好类型。</li>
</ul>
<h2 id="ts进阶">TS进阶<a hidden class="anchor" aria-hidden="true" href="#ts进阶">#</a></h2>
<h3 id="高级类型一">高级类型(一)<a hidden class="anchor" aria-hidden="true" href="#高级类型一">#</a></h3>
<h3 id="联合类型">联合类型<a hidden class="anchor" aria-hidden="true" href="#联合类型">#</a></h3>
<ul>
<li>
<p>基本概念:</p>
<p>如果希望一个变量可以支持多种类型, 就可以使用联合类型(union types)</p>
</li>
<li>
<p>例如, 一个变量既支持number类型, 又支持string类型, 就可以这么写</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">num</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">num</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">num</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;eight&#39;</span>
</span></span></code></pre></div></li>
<li>
<p>当TS不确定一个联合类型的变量到底是那个类型的时候, 只能访问他们共有的属性和方法</p>
</li>
</ul>
<h3 id="交叉类型">交叉类型<a hidden class="anchor" aria-hidden="true" href="#交叉类型">#</a></h3>
<ul>
<li>
<p>如果要对对象形式进行扩展,可以使用交叉类型 <strong>&amp;</strong></p>
</li>
<li>
<p>比如Person有name属性和age属性, 而Student在name 和age的基础上还有grade属性, 就可以这样写:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">&amp;</span> { <span style="color:#a6e22e">grade</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> }
</span></span></code></pre></div><p>这和类的继承是一样的, 这样Student就继承了Person的属性</p>
</li>
<li>
<p>联合类型 | 是指可以取几种类型中的任意一种，而交叉类型 &amp; 是指把几种类型合并起来。</p>
</li>
<li>
<p>交叉类型和 interface 的 extends 非常类似，都是为了实现对象形状的组合和扩展。</p>
</li>
</ul>
<h3 id="类型别名type-aliase">类型别名(type aliase)<a hidden class="anchor" aria-hidden="true" href="#类型别名type-aliase">#</a></h3>
<ul>
<li>
<blockquote>
<p>类型别名会给一个类型起个新名字。 类型别名有时和接口很像，但是可以作用于原始值，联合类型，元组以及其它任何你需要手写的类型。</p>
</blockquote>
</li>
<li>
<p>用法如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">string</span>                              <span style="color:#75715e">// 基本类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">arrItem</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">string</span>                  <span style="color:#75715e">// 联合类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">arr</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">arrItem</span>[] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#39;2&#39;</span>, <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">=</span> { 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Name</span> 
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">&amp;</span> { <span style="color:#a6e22e">grade</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>  }       <span style="color:#75715e">// 交叉类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Teacher</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">&amp;</span> { <span style="color:#a6e22e">major</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>  } 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">StudentAndTeacherList</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">Student</span>, <span style="color:#a6e22e">Teacher</span>]  <span style="color:#75715e">// 元组类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">list</span><span style="color:#f92672">:</span><span style="color:#a6e22e">StudentAndTeacherList</span> <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lin&#39;</span>, <span style="color:#a6e22e">grade</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span> }, 
</span></span><span style="display:flex;"><span>  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;liu&#39;</span>, <span style="color:#a6e22e">major</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Chinese&#39;</span> }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div></li>
<li>
<p>比如下面这个例子，getName 这个函数接收的参数可能是字符串，可能是函数，就可以这么写。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">NameResolver</span> <span style="color:#f92672">=</span> () =&gt; <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">NameOrResolver</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Name</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">NameResolver</span>          <span style="color:#75715e">// 联合类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getName</span>(<span style="color:#a6e22e">n</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">NameOrResolver</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Name</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;string&#39;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">n</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">n</span>()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">这样调用时传字符串和函数都可以</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">getName</span>(<span style="color:#e6db74">&#39;lin&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">getName</span>(() =&gt; <span style="color:#e6db74">&#39;lin&#39;</span>)
</span></span></code></pre></div></li>
<li>
<p>type和interface的区别:</p>
<ul>
<li>
<p>两者相同点:</p>
<ul>
<li>
<p>都可以定义一个对象或函数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">addType</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">num1</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> , <span style="color:#a6e22e">num2</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>) =&gt; <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">addType</span> {
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">num1</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>, <span style="color:#a6e22e">num2</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">addType</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">num1</span>, <span style="color:#a6e22e">num2</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">num1</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">num2</span>
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div></li>
<li>
<p>都允许继承</p>
<ul>
<li>interface 使用 extends 实现继承， type 使用交叉类型实现继承</li>
</ul>
</li>
</ul>
</li>
<li>
<p>两者不同点:</p>
<ul>
<li>interface(接口)是ts设计出来用于定义对象类型的,可以对对象的形状进行描述</li>
<li>type是<strong>类型别名</strong>, 用于给各种类型定义别名, 让ts写起来更简洁、 清晰</li>
<li>type可以声明基本类型、 联合类型、 元组,interface不行</li>
<li>interface 可以合并重复声明, type不行</li>
</ul>
</li>
<li>
<p>合并重复声明:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Person</span> {         <span style="color:#75715e">// 重复声明 interface，就合并了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">person</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Person</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;lin&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="类型保护">类型保护<a hidden class="anchor" aria-hidden="true" href="#类型保护">#</a></h3>
<ul>
<li>
<p>如果有一个getLength函数, 入参是联合类型number | string,返回的参数是length</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getLength</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>.<span style="color:#a6e22e">length</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>报错如图:</p>
<ul>
<li><img loading="lazy" src="https://firebasestorage.googleapis.com/v0/b/firescript-577a2.appspot.com/o/imgs%2Fapp%2Fxp%2FCg9x-e7rJK.png?alt=media&amp;token=7d743621-1b03-4e62-a50a-84fd211f542" alt="img"  />
</li>
</ul>
</li>
<li>
<p>这个时候类型保护(Type GUards) 出现了,  就可以使用<strong>typeof</strong>关键字来判断类型</p>
</li>
<li>
<p>我们把getlength函数改造一下,就可以精确的访问到string类型的length</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getLength</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">arg</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;string&#39;</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>.<span style="color:#a6e22e">length</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>.<span style="color:#a6e22e">toString</span>().<span style="color:#a6e22e">length</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>之所以叫类型保护, 就是为了能够在不同的分支条件中缩小范围, 这样我们代码出错的几率就大大降低</p>
</li>
</ul>
<h3 id="类型缩小">类型缩小:<a hidden class="anchor" aria-hidden="true" href="#类型缩小">#</a></h3>
<ul>
<li>
<p>常见的类型缩小:</p>
<ul>
<li>typeof</li>
<li>平等缩小(===, !==)</li>
<li>instanceof</li>
<li>in</li>
</ul>
</li>
<li>
<p>通过类似于<code>typeof padding === &quot;number&quot;</code> 的判断语句, 来改变typescript的执行路径;在给定的执行路径中,我们可以缩小比声明时更小的类型, 这个过程称为<strong>缩小</strong></p>
</li>
<li>
<p>使用实例:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">//typeof 类型缩小
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">IDType</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">printID</span>(<span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">IDType</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">id</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;string&#39;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">toUpperCase</span>);
</span></span><span style="display:flex;"><span>  }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">id</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//平等的类型缩小 (=== == !== !=/switch)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// instanceof
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">printTime</span>(<span style="color:#a6e22e">time</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span> <span style="color:#f92672">|</span> Date) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">time</span> <span style="color:#66d9ef">instanceof</span> Date) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">toUTCString</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">studying</span>() {}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Teacher</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">teaching</span>() {}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">work</span>(<span style="color:#a6e22e">p</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Student</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">Teacher</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">p</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Student</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">studying</span>()
</span></span><span style="display:flex;"><span>  }<span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">teaching</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// in
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Fish</span> <span style="color:#f92672">=</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">swimming</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">void</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Dog</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">running</span><span style="color:#f92672">:</span> () =&gt; <span style="color:#66d9ef">void</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">walk</span>(<span style="color:#a6e22e">animal</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Fish</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">Dog</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#39;swimming&#39;</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">animal</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">animal</span>.<span style="color:#a6e22e">swimming</span>()
</span></span><span style="display:flex;"><span>  }<span style="color:#66d9ef">else</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">animal</span>.<span style="color:#a6e22e">running</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
<h3 id="类型断言">类型断言<a hidden class="anchor" aria-hidden="true" href="#类型断言">#</a></h3>
<ul>
<li>
<blockquote>
<p>类型断言不是类型转换, 把一个类型断言成一个联合类型中不存在的类型会报错</p>
</blockquote>
</li>
<li>
<p>类型断言语法:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// 类型断言 as 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// const el = document.getElementById(&#34;why&#34;) as HTMLImageElement
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// el.src = &#34;url地址&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Student</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">studying</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sayHello</span> (<span style="color:#a6e22e">p</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Person</span>) {
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">p</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">Student</span>).<span style="color:#a6e22e">studying</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">stu</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Student</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">sayHello</span>(<span style="color:#a6e22e">stu</span>)
</span></span></code></pre></div></li>
<li>
<p>使用类型断言来告诉TS,我比你更清楚这个参数的类型是什么, 你别报错</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getLength</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">str</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">arg</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">str</span>.<span style="color:#a6e22e">length</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">str</span>.<span style="color:#a6e22e">length</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">number</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">arg</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">number</span>.<span style="color:#a6e22e">toString</span>().<span style="color:#a6e22e">length</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>非空类型断言:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">printMessage</span>(<span style="color:#a6e22e">message</span><span style="color:#f92672">?:</span> <span style="color:#a6e22e">string</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">message</span><span style="color:#f92672">!</span>.<span style="color:#a6e22e">length</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">printMessage</span>(<span style="color:#e6db74">&#34;aaa&#34;</span>)
</span></span></code></pre></div></li>
<li>
<p>可选链的使用:</p>
<ul>
<li>可选链使用可选链操作符   <strong>?.</strong></li>
<li>他的作用是, 当对象的属性不存在时, 会短路,直接返回undefined, 如果存在,那么才会继续执行</li>
</ul>
</li>
</ul>
<h3 id="字面量类型">字面量类型<a hidden class="anchor" aria-hidden="true" href="#字面量类型">#</a></h3>
<ul>
<li>
<p>有时候我们需要定义一些常量, 就需要用到字面量类型</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// &#34;hello&#34; 也是可以作为类型的,叫做字面型变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;hello&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 字面量类型的意义,就是必须结合联合类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">ButtonSize</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mini&#39;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;small&#39;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;normal&#39;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;large&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Sex</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;男&#39;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;女&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">nan</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">sex</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;男&#39;</span>
</span></span></code></pre></div></li>
</ul>
<h3 id="字面量推理">字面量推理<a hidden class="anchor" aria-hidden="true" href="#字面量推理">#</a></h3>
<ul>
<li>
<p>基本使用:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Method</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;GET&#39;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;POST&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">request</span>(<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span><span style="color:#a6e22e">string</span>, <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Method</span>) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// type Request = {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   url: string,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   method: Method
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// const options = {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   url: &#34;https://www.baidu.com&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//   method: &#34;POST&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// request(options.url, options.method)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;https://www.baidu.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;POST&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">request</span>(<span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">url</span>, <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">method</span> <span style="color:#a6e22e">as</span> <span style="color:#a6e22e">Method</span>)
</span></span></code></pre></div></li>
</ul>
<h3 id="泛型">泛型<a hidden class="anchor" aria-hidden="true" href="#泛型">#</a></h3>
<ul>
<li>好文: <a href="https://juejin.cn/post/6844904184894980104#heading-7">https://juejin.cn/post/6844904184894980104#heading-7</a></li>
</ul>
<h4 id="基本概念-3">基本概念:<a hidden class="anchor" aria-hidden="true" href="#基本概念-3">#</a></h4>
<ul>
<li>
<p><img loading="lazy" src="https://firebasestorage.googleapis.com/v0/b/firescript-577a2.appspot.com/o/imgs%2Fapp%2Fxp%2FK92PjCwwdD.png?alt=media&amp;token=28a1df14-7624-40d5-9c4f-0223571792" alt="img"  />
</p>
</li>
<li>
<p>其中 T 代表 <strong>Type</strong>，在定义泛型时通常用作第一个类型变量名称。但实际上 T 可以用任何有效名称代替。除了 T 之外，以下是常见泛型变量代表的意思：</p>
<ul>
<li>T: Type的缩写, 类型</li>
<li>K（Key）：表示对象中的键类型；</li>
<li>V（Value）：表示对象中的值类型；</li>
<li>E（Element）：表示元素类型。Element缩写, 元素</li>
<li>O: Object的缩写,对象</li>
</ul>
</li>
<li>
<p>其实并不是只能定义一个类型变量,我们可以引入希望定义的任何数量的类型变量. 比如我们引入一个新的类型变量<strong>U</strong>,用于扩展我们定义的indetify函数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">idnetify</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">U</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">U</span>) <span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">value</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">indetify</span><span style="color:#f92672">&lt;</span>Number, <span style="color:#a6e22e">string</span><span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">68</span>, <span style="color:#e6db74">&#39;sem&#39;</span>))
</span></span></code></pre></div></li>
<li>
<p><img loading="lazy" src="https://firebasestorage.googleapis.com/v0/b/firescript-577a2.appspot.com/o/imgs%2Fapp%2Fxp%2F9rYI1vg6UP.png?alt=media&amp;token=c22de7a1-8a48-4b66-a312-fde32c60082" alt="img"  />
</p>
</li>
<li>
<p>类型传递过程:</p>
</li>
</ul>
<h4 id="泛型的基本使用">泛型的基本使用<a hidden class="anchor" aria-hidden="true" href="#泛型的基本使用">#</a></h4>
<ul>
<li>
<p>泛型接口:</p>
<ul>
<li>
<p>首先创建一个用于 <strong>identity</strong> 函数通用<strong>Identifies</strong>接口:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Identities</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">V</span>, <span style="color:#a6e22e">M</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">vlaue</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">V</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">M</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>之后我们将<strong>Identities</strong> 接口作为identity函数的返回类型:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">fucntion</span> <span style="color:#a6e22e">identity</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">U</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">U</span> )<span style="color:#f92672">:</span><span style="color:#a6e22e">Identities</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">U</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;:&#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">typeof</span>(<span style="color:#a6e22e">value</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">message</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;:&#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">typeof</span>(<span style="color:#a6e22e">message</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">indetities</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Identities</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">U</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">value</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">message</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">identities</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">indetity</span>(<span style="color:#ae81ff">68</span>, <span style="color:#e6db74">&#34;sem&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">//输出结果
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">68</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Semlinker</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>{<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">68</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Semlinker&#34;</span>}
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>泛型类:</p>
<ul>
<li>
<p>在类中使用泛型也很简单,我们只需要在类名后面,使用**&lt;T, &hellip;&gt;**的语法定义任意多个类型变量</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">GenericInterface</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">U</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">U</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">getIdentity</span> <span style="color:#f92672">:</span> () =&gt; <span style="color:#a6e22e">U</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">IdentityClass</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">GenericInterface</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">value</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span> (<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">constructor</span> (<span style="color:#a6e22e">value</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myNumberClass</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">IndetityClass</span><span style="color:#f92672">&lt;</span>Number<span style="color:#f92672">&gt;</span>(<span style="color:#ae81ff">68</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">myNumberClass</span>.<span style="color:#a6e22e">getIdentity</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myStringClass</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">IdentityClass</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">string</span><span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;Semlinker!&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">myStringClass</span>.<span style="color:#a6e22e">getIdentity</span>()); <span style="color:#75715e">// Semlinker!
</span></span></span></code></pre></div><ul>
<li>接下来我们以实例化 myNumberClass 为例，来分析一下其调用过程：在实例化 IdentityClass 对象时，我们传入 Number 类型和构造函数参数值 68；之后在 IdentityClass 类中，类型变量 T 的值变成 Number 类型；IdentityClass 类实现了 GenericInterface，而此时 T 表示 Number 类型，因此等价于该类实现了 GenericInterface 接口；而对于 GenericInterface 接口来说，类型变量 U 也变成了 Number。这里我有意使用不同的变量名，以表明类型值沿链向上传播，且与变量名无关。</li>
</ul>
</li>
<li>
<p>在什么时候使用泛型?(通常在决定是否使用泛型时, 有两个标准):当你的函数、接口或类将处理多种数据类型的时候;当函数、接口或类在多个地方使用该数据类型的时候</p>
</li>
</ul>
</li>
<li>
<p>处理函数参数</p>
<ul>
<li>
<p>泛型的语法是**&lt;&gt;**里写类型参数, 一般可以用 <strong>T</strong> 表示</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span><span style="color:#a6e22e">T</span>)<span style="color:#f92672">:</span><span style="color:#a6e22e">T</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>泛型中的T就像一个占位符、 或者说一个变量, 在使用的时候可以把定义的类型<strong>像参数一样传入</strong>, 他可以<strong>原封不动的输出</strong></p>
</li>
<li>
<p>我们在使用的时候,可以有两种方式指定类型</p>
<ul>
<li>
<p>定义要使用的类型</p>
</li>
<li>
<p>TS类型推断, 自动推导出类型</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">print</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">string</span><span style="color:#f92672">&gt;</span> (<span style="color:#e6db74">&#39;hello&#39;</span>) <span style="color:#75715e">// 定义T为string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#39;hello&#39;</span>)         <span style="color:#75715e">// ts类型推断, 自动推导类型为string
</span></span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>type和Interface都可以定义函数类型,也可以用泛型来写,</p>
<ul>
<li>
<p>type写法如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">Print</span> <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>) =&gt; <span style="color:#a6e22e">T</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">printFn</span><span style="color:#f92672">:</span><span style="color:#a6e22e">Print</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">print</span>(<span style="color:#a6e22e">arg</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>interface写法如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Iprint</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span><span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myPrint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Iprint</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">number</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">print</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
</li>
<li>
<p>默认参数</p>
<ul>
<li>
<p>如果要给泛型加默认参数,可以这么写:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Iprint</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">number</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    (<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">print</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span><span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myPrint</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Iprint</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">print</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>处理多个函数参数</p>
<ul>
<li>
<p>现在有这么一个函数,传入一个只有两项的元组,减缓元组的第0项和第1项,返回这个元组</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">swap</span>(<span style="color:#a6e22e">tuple</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [<span style="color:#a6e22e">tuple</span>[<span style="color:#ae81ff">1</span>], <span style="color:#a6e22e">tuple</span>[<span style="color:#ae81ff">0</span>]]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这样写,我们就丧失了类型, 用泛型来改造一下</p>
<p>我们用T代表第0项的类型, 用U代表第1项的类型</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">fucntion</span> <span style="color:#a6e22e">swap</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">U</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">tuple</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">U</span>])<span style="color:#f92672">:</span> [<span style="color:#a6e22e">U</span>, <span style="color:#a6e22e">T</span>] {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> [<span style="color:#a6e22e">tuple</span>[<span style="color:#ae81ff">1</span>], <span style="color:#a6e22e">tuple</span>[<span style="color:#ae81ff">0</span>]]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这样就实现了元组的第一个元素和第二个元素的类型的控制</p>
</li>
</ul>
</li>
<li>
<p>函数副作用操作</p>
<ul>
<li>
<p>泛型不仅可以很方便的约束函数的参数类型, 还可以用在函数执行副作用操作时</p>
</li>
<li>
<p>比如我们有一个通用的异步方法, 想根据不同的url请求返回不同类型的数据</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">request</span> (<span style="color:#a6e22e">url</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">res</span> =&gt; <span style="color:#a6e22e">rs</span>.<span style="color:#a6e22e">json</span>())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>调一个获取用户信息的接口:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">reqeust</span> (<span style="color:#e6db74">&#39;user/info&#39;</span>).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">res</span> =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">res</span>)   <span style="color:#75715e">// 返回res any 类型
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>})
</span></span></code></pre></div></li>
<li>
<p>我们希望<strong>调用api 都清晰的知道返回类型是什么数据结构</strong>,就可以这样</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">UserInfo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">request</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span><span style="color:#a6e22e">string</span>)<span style="color:#f92672">:</span> Promise<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#a6e22e">url</span>).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">res</span> =&gt; <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">json</span>())
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">request</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">UserInfo</span><span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#39;user/info&#39;</span>).<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">res</span> =&gt;{
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">res</span>)
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h4 id="约束泛型泛型约束-有时我们可能希望限制每个类型变量接受的类型数量这就是泛型约束的作用">约束泛型(泛型约束): 有时我们可能希望限制每个类型变量接受的类型数量，这就是泛型约束的作用<a hidden class="anchor" aria-hidden="true" href="#约束泛型泛型约束-有时我们可能希望限制每个类型变量接受的类型数量这就是泛型约束的作用">#</a></h4>
<ol>
<li>
<p>确保属性存在</p>
<ul>
<li>
<p>如我们在处理字符串或数组时, 我们会假设length属性是可用的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">indetity</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> (<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>.<span style="color:#a6e22e">length</span>);   <span style="color:#75715e">//error
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div></li>
<li>
<p>在这种情况下,编译器是不知道T确实含有length属性的, 尤其是在可以将任何类型赋给类型变量T的情况下, 我们需要做的就是让类型变量extends一个含有我们所需属性的接口:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Length</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">length</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">identity</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Length</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>) <span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>.<span style="color:#a6e22e">length</span>);  <span style="color:#75715e">// 可以获取length属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>我们还可以使用**,**分隔开多种约束类型, 比如. 上述情况,还可以显式的将变量设置为数组类型:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">identity</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>[])<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>[] {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>.<span style="color:#a6e22e">length</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//or
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">identity</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">arg</span><span style="color:#f92672">:</span> Array<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>)<span style="color:#f92672">:</span> Array<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> {      
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">arg</span>.<span style="color:#a6e22e">length</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arg</span>; 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>检查对象上的键是否存在</p>
<ul>
<li>
<p><strong>keyof</strong>操作符: 该操作符可以用于获取某种类型的所有键,其返回类型是联合类型, 如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Person</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">number</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">location</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">K1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keyof</span> <span style="color:#a6e22e">Person</span>; <span style="color:#75715e">// &#34;name&#34; | &#34;age&#34; | &#34;location&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">K2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keyof</span> <span style="color:#a6e22e">Person</span>[];  <span style="color:#75715e">// number | &#34;length&#34; | &#34;push&#34; | &#34;concat&#34; | ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">K3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">keyof</span> { [<span style="color:#a6e22e">x</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>]<span style="color:#f92672">:</span> <span style="color:#a6e22e">Person</span> };  <span style="color:#75715e">// string | number
</span></span></span></code></pre></div></li>
<li>
<p>结合前面介绍的 extends 约束，即限制输入的属性名包含在 keyof 返回的联合类型中。具体的使用方式如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getProperty</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">K</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">keyof</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">obj</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">key</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">K</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>[<span style="color:#a6e22e">K</span>] {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">obj</span>[<span style="color:#a6e22e">key</span>];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>
<p>如何使用getProperty()函数:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getProperty</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">K</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">keyof</span> <span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span>(<span style="color:#a6e22e">obj</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">key</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">K</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>[<span style="color:#a6e22e">K</span>] {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">obj</span>[<span style="color:#a6e22e">key</span>];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ul>
</li>
</ol>
<h4 id="泛型条件类型">泛型条件类型<a hidden class="anchor" aria-hidden="true" href="#泛型条件类型">#</a></h4>
<ul>
<li>
<p>条件类型会以一个条件表达式进行类型检测,从而在两种类型中选择其一:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">T</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">U</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">x</span><span style="color:#f92672">:</span><span style="color:#a6e22e">y</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">以上表达式的意思是</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">若T能够赋值给U</span>,<span style="color:#a6e22e">那么类型是x</span>, <span style="color:#a6e22e">否则为y</span>
</span></span></code></pre></div></li>
<li>
<p>在条件类型表达式中, 我们通常会结合 <strong>infre关键字</strong>, 实现类型抽取</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Dictionary</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">any</span><span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>  [<span style="color:#a6e22e">key</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>]<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">StrDict</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Dictionary</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">string</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">DictMember</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">T</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">T</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Dictionary</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">infer</span> <span style="color:#a6e22e">V</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">V</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">never</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">type</span> <span style="color:#a6e22e">StrDictMember</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">DictMember</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">StrDict</span><span style="color:#f92672">&gt;</span> <span style="color:#75715e">// string
</span></span></span></code></pre></div></li>
</ul>
<h4 id="泛型的一些应用">泛型的一些应用<a hidden class="anchor" aria-hidden="true" href="#泛型的一些应用">#</a></h4>
<h4 id="小结-2">小结<a hidden class="anchor" aria-hidden="true" href="#小结-2">#</a></h4>
<h3 id="高级类型二">高级类型(二)<a hidden class="anchor" aria-hidden="true" href="#高级类型二">#</a></h3>
<ul>
<li>索引类型</li>
<li>映射类型</li>
<li>条件类型</li>
<li>工具类型</li>
<li>类型体操是什么</li>
</ul>
<h3 id="ts声明文件">TS声明文件<a hidden class="anchor" aria-hidden="true" href="#ts声明文件">#</a></h3>
<ul>
<li>declare</li>
<li>.d.ts</li>
<li>使用第三方库</li>
<li>自己写声明文件</li>
</ul>
<p>参考文章：</p>
<p><a href="https://juejin.cn/post/7068081327857205261">https://juejin.cn/post/7068081327857205261</a></p>


        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="https://sirius00.github.io/posts/tech/nodejs%E5%9F%BA%E7%A1%80/">
    <span class="title">« 上一页</span>
    <br>
    <span>Nodejs基础</span>
  </a>
  <a class="next" href="https://sirius00.github.io/posts/blog/vscode%E7%9A%84%E4%BD%BF%E7%94%A8/">
    <span class="title">下一页 »</span>
    <br>
    <span>Vscode的使用</span>
  </a>
</nav>

        </footer>
    </div>
</article>
</main>


<script async src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>


<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<footer class="footer">
    <span>
        Copyright
        &copy;
        2020-2023
        <a href="https://sirius00.github.io/" style="color:#939393;">XP&#39;s Blog</a>
        All Rights Reserved
    </span>

    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;">填写自己的备案号</a>&nbsp;

    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="%e5%a1%ab%e8%87%aa%e5%b7%b1%e7%9a%84%e5%85%ac%e5%ae%89%e5%9b%be%e6%a0%87%e9%93%be%e6%8e%a5" style="float:left;margin: 0px 5px 0px 0px;"/>
            填自己的公网安备
        </a>
    </span>

    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        总访客数: <span id="busuanzi_value_site_uv"></span>
        总访问量: <span id="busuanzi_value_site_pv"></span>
    </span>

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「' + {
                { .
                    Site.Title
                }
            }
                +'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「' + {
                { .
                    Site.Title
                }
            }
                +'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '📄复制';

        function copyingDone() {
            copybutton.innerText = '👌🏻已复制!';
            setTimeout(() => {
                copybutton.innerText = '📄复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\n————————————————\r\n' +
                    '版权声明：本文为「' + "XP's Blog"
                +'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {
            }
            ;
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild === container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName === "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script>
    $("code[class^=language] ").on("mouseover", function () {
        if (this.clientWidth < this.scrollWidth) {
            $(this).css("width", "135%")
        }
    }).on("mouseout", function () {
        $(this).css("width", "100%")
    })
</script>
</body>

</html>
