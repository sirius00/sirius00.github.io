<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Canvasçš„ä½¿ç”¨ | XP&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦ canvasæ ‡ç­¾åªæœ‰ä¸¤ä¸ªæ ‡ç­¾å±æ€§: widthå’Œheight å½“æ²¡æœ‰è®¾ç½®å®½åº¦å’Œé«˜åº¦çš„æ—¶å€™, canvasä¼šåˆå§‹åŒ–ä¸ºå®½300px, é«˜150pxç”»å¸ƒ ä½¿ç”¨htmlå±æ€§è®¾ç½®width, height æ—¶,åªå½±å“ç”»å¸ƒæœ¬èº«,ä¸å½±å“ç”»å¸ƒå†…å®¹ ä½¿ç”¨cssæ ·å¼æŒ‡å®šcanvasçš„width, he">
<meta name="author" content="
ä½œè€…:&nbsp;XP">
<link rel="canonical" href="https://sirius00.github.io/posts/tech/canvas%E7%9A%84%E4%BD%BF%E7%94%A8/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a6c679e0d2f6e83a8f1aad1f7a2cdc96085c188647e679dbc62800f83be6bad2.css" integrity="sha256-psZ54NL26DqPGq0feizclghcGIZH5nnbxigA&#43;DvmutI=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
        onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://sirius00.github.io/img/cat.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://sirius00.github.io/img/cat.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sirius00.github.io/img/cat.png">
<link rel="apple-touch-icon" href="https://sirius00.github.io/img/cat.png">
<link rel="mask-icon" href="https://sirius00.github.io/img/cat.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="Canvasçš„ä½¿ç”¨" />
<meta property="og:description" content="canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦ canvasæ ‡ç­¾åªæœ‰ä¸¤ä¸ªæ ‡ç­¾å±æ€§: widthå’Œheight å½“æ²¡æœ‰è®¾ç½®å®½åº¦å’Œé«˜åº¦çš„æ—¶å€™, canvasä¼šåˆå§‹åŒ–ä¸ºå®½300px, é«˜150pxç”»å¸ƒ ä½¿ç”¨htmlå±æ€§è®¾ç½®width, height æ—¶,åªå½±å“ç”»å¸ƒæœ¬èº«,ä¸å½±å“ç”»å¸ƒå†…å®¹ ä½¿ç”¨cssæ ·å¼æŒ‡å®šcanvasçš„width, he" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sirius00.github.io/posts/tech/canvas%E7%9A%84%E4%BD%BF%E7%94%A8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-22T09:41:47+08:00" />
<meta property="article:modified_time" content="2023-02-22T09:41:47+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Canvasçš„ä½¿ç”¨"/>
<meta name="twitter:description" content="canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦ canvasæ ‡ç­¾åªæœ‰ä¸¤ä¸ªæ ‡ç­¾å±æ€§: widthå’Œheight å½“æ²¡æœ‰è®¾ç½®å®½åº¦å’Œé«˜åº¦çš„æ—¶å€™, canvasä¼šåˆå§‹åŒ–ä¸ºå®½300px, é«˜150pxç”»å¸ƒ ä½¿ç”¨htmlå±æ€§è®¾ç½®width, height æ—¶,åªå½±å“ç”»å¸ƒæœ¬èº«,ä¸å½±å“ç”»å¸ƒå†…å®¹ ä½¿ç”¨cssæ ·å¼æŒ‡å®šcanvasçš„width, he"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "ğŸ“šæ–‡ç« ",
          "item": "https://sirius00.github.io/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯",
          "item": "https://sirius00.github.io/posts/tech/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Canvasçš„ä½¿ç”¨",
      "item": "https://sirius00.github.io/posts/tech/canvas%E7%9A%84%E4%BD%BF%E7%94%A8/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Canvasçš„ä½¿ç”¨",
  "name": "Canvasçš„ä½¿ç”¨",
  "description": "canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦ canvasæ ‡ç­¾åªæœ‰ä¸¤ä¸ªæ ‡ç­¾å±æ€§: widthå’Œheight å½“æ²¡æœ‰è®¾ç½®å®½åº¦å’Œé«˜åº¦çš„æ—¶å€™, canvasä¼šåˆå§‹åŒ–ä¸ºå®½300px, é«˜150pxç”»å¸ƒ ä½¿ç”¨htmlå±æ€§è®¾ç½®width, height æ—¶,åªå½±å“ç”»å¸ƒæœ¬èº«,ä¸å½±å“ç”»å¸ƒå†…å®¹ ä½¿ç”¨cssæ ·å¼æŒ‡å®šcanvasçš„width, he",
  "keywords": [
    ""
  ],
  "articleBody": "canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦ canvasæ ‡ç­¾åªæœ‰ä¸¤ä¸ªæ ‡ç­¾å±æ€§: widthå’Œheight\nå½“æ²¡æœ‰è®¾ç½®å®½åº¦å’Œé«˜åº¦çš„æ—¶å€™, canvasä¼šåˆå§‹åŒ–ä¸ºå®½300px, é«˜150pxç”»å¸ƒ\nä½¿ç”¨htmlå±æ€§è®¾ç½®width, height æ—¶,åªå½±å“ç”»å¸ƒæœ¬èº«,ä¸å½±å“ç”»å¸ƒå†…å®¹\nä½¿ç”¨cssæ ·å¼æŒ‡å®šcanvasçš„width, heightæ—¶, ä¸ä½†å½±å“ç”»å¸ƒæœ¬èº«çš„å®½é«˜, è¿˜ä¼šä½¿ç”»å¸ƒå†…å®¹ç­‰æ¯”ä¾‹ç¼©æ”¾\n\u003ccanvas id=\"canvas\" width=\"400\" height=\"200\" style=\"border: 1px solid\"\u003e\u003c/canvas\u003e canvasç”»ç¬” const canvas = document.getElementById('canvas') // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒcanvas if (canvas.getContext) { // canvasç›¸å…³çš„æ“ä½œåŸºæœ¬éƒ½åœ¨ctxä¸Šé¢è¿›è¡Œ const ctx = canvas.getContext('2d') } canvasç»˜åˆ¶çŸ©å½¢ fillRect(å¡«å……çŸ©å½¢)\nstrokeRect(è¾¹æ¡†çŸ©å½¢)\nctx.fillRect(x, y, width, height)\nctx.strokeRect(x, y, width, height)\nä¸¤è€…å‚æ•°:\nx:xè½´åç§»é‡ y: yè½´åç§»é‡ width: çŸ©å½¢å®½åº¦ height: çŸ©å½¢é«˜åº¦ strokeRectè¾¹æ¡†çŸ©å½¢æ¸²æŸ“é—®é¢˜ canvas åœ¨æ¸²æŸ“çŸ©å½¢è¾¹æ¡†æ—¶ï¼Œè¾¹æ¡†å®½åº¦æ˜¯å¹³å‡åˆ†åœ¨åç§»ä½ç½®ä¸¤ä¾§çš„ã€‚\n// è¾¹æ¡†ä¼šæ¸²æŸ“åœ¨ 49.5-50.5 ä¹‹é—´ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šè®©ä¸€ä¸ªåƒç´ åªæ˜¾ç¤ºä¸€åŠçš„ï¼Œåªä¼šå…¨éƒ¨æ˜¾ç¤ºã€‚ç›¸å½“äºè¾¹æ¡†ä¼šæ¸²æŸ“åœ¨ 49-51 ä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯ 2px ctx.strokeRect(50, 50, 100, 100) // å°†åç§»é‡å¤šç§»åŠ¨ 0.5ï¼Œè¾¹æ¡†ä¼šæ¸²æŸ“åœ¨ 200-201 å’Œ 50-51 ä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯1px ctx.strokeRect(200.5, 50.5, 100, 100) canvasæ¸…é™¤åŒºåŸŸ ctx.clearRect(x, y, width, height)ï¼šå¯ä»¥æ¸…é™¤ canvas ç”»å¸ƒä¸ŠæŒ‡å®šçš„åŒºåŸŸï¼Œè®©æ¸…é™¤éƒ¨åˆ†å®Œå…¨é€æ˜\nctx.fillRect(50, 50, 100, 100) // ä»¥ (100, 100) ä¸ºåç§»é‡ï¼Œæ¸…é™¤ä¸€ä¸ª 50 * 50 çš„åŒºåŸŸ ctx.clearRect(100, 100, 50, 50) canvasæ ·å¼å’Œé¢œè‰² ctx.fillStyleï¼šè®¾ç½®å›¾åƒçš„å¡«å……é¢œè‰²ã€‚ï¼ˆé»˜è®¤é»‘è‰²ï¼‰\nctx.strokeStyleï¼šè®¾ç½®å›¾åƒè½®å»“çš„é¢œè‰²ã€‚ï¼ˆé»˜è®¤é»‘è‰²ï¼‰\nctx.lineWidthï¼šè®¾ç½®å½“å‰ç»˜çº¿çš„ç²—ç»†ï¼Œå±æ€§å€¼å¿…é¡»ä¸ºæ­£æ•°ï¼ˆé»˜è®¤å€¼ 1ï¼Œ0ã€è´Ÿæ•°ã€Infinity å’Œ NaN ä¼šè¢«å¿½ç•¥ï¼‰ã€‚\nctx.lineJoinï¼šè®¾å®šçº¿æ¡ä¸çº¿æ¡é—´ç»“åˆçš„æ ·å¼ã€‚ï¼ˆé»˜è®¤miterï¼‰\nroundï¼šåœ†è§’ã€‚\nbevelï¼šæ–œè§’ã€‚\nmiterï¼šç›´è§’ã€‚\n// å¡«å……æ ·å¼çº¢è‰² ctx.fillStyle = 'red' // è¾¹æ¡†æ ·å¼è“è‰² ctx.strokeStyle = 'blue' // ç»˜çº¿ç²—ç»† 10px ctx.lineWidth = 10 // ç»˜çº¿äº¤æ¥å‘ˆç°åœ†è§’ ctx.lineJoin = 'round' ctx.fillRect(50, 50, 100, 100) ctx.strokeRect(200, 50, 100, 100) canvasè·¯å¾„ è·¯å¾„ç»˜åˆ¶çŸ©å½¢ ctx.stroke()ï¼šé€šè¿‡çº¿æ¡æ¥ç»˜åˆ¶å›¾åƒè½®å»“ï¼Œä¸ä¼šè‡ªåŠ¨è°ƒç”¨ closePath()ã€‚\nctx.fill()ï¼šé€šè¿‡å¡«å……è·¯å¾„çš„å†…å®¹åŒºåŸŸç”Ÿæˆå®å¿ƒçš„å›¾åƒï¼Œè‡ªåŠ¨è°ƒç”¨closePath()ã€‚\nctx.rect(x, y, width, height)ï¼šç»˜åˆ¶ä¸€ä¸ªåç§»é‡ (x, y)ï¼Œå®½ widthï¼Œé«˜ height çš„çŸ©å½¢ã€‚\nå½“è¯¥æ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼ŒmoveTo() æ–¹æ³•è‡ªåŠ¨è®¾ç½®èµ·ç‚¹åæ ‡ä¸º (x, y)ã€‚\nè¯¥æ–¹æ³•æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œç”»å¸ƒä¸Šä¸ä¼šå‘ˆç°å›¾åƒï¼Œç›¸å½“äºåªæ˜¯å½¢æˆäº†è·¯å¾„åˆ—è¡¨ï¼Œè¦è°ƒç”¨ fill() æˆ– stroke() æ–¹æ³•æ‰ä¼šå‘ˆç°åœ¨ç”»å¸ƒä¸­\n// ç»˜åˆ¶è·¯å¾„ä¸æ˜¾ç¤º ctx.rect(50, 50, 100, 100) // å¡«å……æ˜¾ç¤º ctx.fill() ctx.rect(200, 50, 100, 100) // è·¯å¾„è¿æ¥æ˜¾ç¤º ctx.stroke() é‡ç½®è·¯å¾„å’Œé—­åˆè·¯å¾„ ctx.beginPath()ï¼šæ–°å»ºä¸€æ¡è·¯å¾„ï¼Œç”Ÿæˆä¹‹åï¼Œå›¾åƒç»˜åˆ¶å‘½ä»¤è¢«æŒ‡å‘åˆ°è·¯å¾„ä¸Šå‡†å¤‡ç”Ÿæˆè·¯å¾„ã€‚\næœ¬è´¨ä¸Šï¼Œè·¯å¾„æ˜¯ç”±å¤šä¸ªå­è·¯å¾„æ„æˆï¼Œè¿™äº›å­è·¯å¾„éƒ½æ˜¯åœ¨ä¸€ä¸ªè·¯å¾„åˆ—è¡¨ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨ beginPathï¼Œè·¯å¾„åˆ—è¡¨éƒ½ä¼šæ¸…ç©ºé‡ç½®ã€‚ é€šå¸¸æˆ‘ä»¬åœ¨ç»˜åˆ¶å›¾åƒä¹‹å‰ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³• ctx.moveTo(x, y)ï¼šå°†ç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡è½´ä¸Šã€‚ï¼ˆè®¾ç½®èµ·ç‚¹ï¼‰\nctx.lineTo(x, y)ï¼šç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šåæ ‡è½´ä½ç½®çš„ç›´çº¿ã€‚\nctx.closePath()ï¼šé—­åˆè·¯å¾„ï¼Œå›¾åƒç»˜åˆ¶å‘½ä»¤åˆé‡æ–°æŒ‡å‘åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚\nä½¿ç”¨ fill() ç»˜åˆ¶å›¾åƒæˆ–å›¾åƒè·¯å¾„å·²ç»é—­åˆä¸éœ€è¦ä½¿ç”¨æ­¤æ–¹æ³•ã€‚ é€šå¸¸ä½¿ç”¨ stroke() ç»˜åˆ¶å›¾åƒçš„æ—¶å€™æ‰ä½¿ç”¨æ­¤æ–¹æ³•ã€‚ // è‡ªåŠ¨å¡«å……è·¯å¾„ ctx.beginPath() ctx.moveTo(50, 50) ctx.lineTo(100, 50) ctx.lineTo(100, 100) ctx.fill() // è·¯å¾„ä¸ä¼šè‡ªåŠ¨é—­åˆ ctx.beginPath() ctx.moveTo(150, 50) ctx.lineTo(200, 50) ctx.lineTo(200, 100) ctx.stroke() // æ‰‹åŠ¨é—­åˆè·¯å¾„ ctx.beginPath() ctx.moveTo(250, 50) ctx.lineTo(300, 50) ctx.lineTo(300, 100) ctx.closePath() ctx.stroke() è·¯å¾„ç»˜åˆ¶æ ·å¼ ctx.lineCapï¼šç»˜åˆ¶æ¯ä¸€æ¡çº¿æ®µæœ«ç«¯çš„æ ·å¼å±æ€§ã€‚\nbuttï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸã€‚ï¼ˆé»˜è®¤å€¼ï¼‰ roundï¼šçº¿æ®µæœ«ç«¯ä»¥åœ†å½¢ç»“æŸã€‚ squareï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªå®½åº¦å’Œçº¿æ®µç›¸åŒï¼Œé«˜åº¦æ˜¯çº¿æ®µå®½åº¦ä¸€åŠçš„çŸ©å½¢åŒºåŸŸã€‚ // ç»˜çº¿æœ«ç«¯åœ†å½¢æ˜¾ç¤º ctx.lineCap = 'round' ctx.lineWidth = 10 ctx.moveTo(50, 50) ctx.lineTo(100, 50) ctx.lineTo(100, 100) ctx.stroke() canvasçŠ¶æ€ ctx.save()ï¼šå°†å½“å‰çŠ¶æ€æ”¾å…¥æ ˆä¸­ï¼Œä¿æŒ canvas å…¨éƒ¨çŠ¶æ€çš„æ–¹æ³•ã€‚\nä¿å­˜åˆ°æ ˆä¸­çš„ç»˜åˆ¶çŠ¶æ€ç”±ä¸‹é¢éƒ¨åˆ†ç»„æˆã€‚\nå½“å‰çš„å˜æ¢çŸ©é˜µã€‚\nå½“å‰çš„å‰ªåˆ‡åŒºåŸŸã€‚\nå½“å‰çš„è™šçº¿åˆ—è¡¨ã€‚\nç»˜åˆ¶å›¾åƒçš„æ ·å¼ï¼ˆstrokeStyle / fillStyle / lineWidth / lineJoin / lineCap â€¦ï¼‰ã€‚\nctx.restore()ï¼šé€šè¿‡åœ¨ç»˜å›¾çŠ¶æ€æ ˆä¸­å¼¹å‡ºé¡¶ç«¯çš„çŠ¶æ€ï¼Œå°† canvas æ¢å¤åˆ°æœ€è¿‘çš„ä¿å­˜çŠ¶æ€çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ä¿å­˜çŠ¶æ€ï¼Œæ­¤æ–¹æ³•ä¸åšä»»ä½•æ”¹å˜ã€‚\né€šå¸¸æˆ‘ä»¬åœ¨ç»˜åˆ¶å›¾åƒè¿›è¡Œçš„æ“ä½œï¼Œéƒ½ä¼šæ”¾åœ¨ save() å’Œ restore() æ–¹æ³•ä¹‹é—´ï¼Œé¿å…å½“å‰ç»˜åˆ¶å›¾åƒè®¾ç½®çš„çŠ¶æ€ï¼Œå½±å“åˆ°åç»­å›¾åƒçš„ç»˜åˆ¶æ•ˆæœã€‚\n// ç”»å¸ƒé»˜è®¤çŠ¶æ€æ”¾å…¥æ ˆä¸­ ctx.save() // å½“å‰å¡«å……æ ·å¼è®¾ç½®ä¸ºçº¢è‰² ctx.fillStyle = 'red' // ç»˜åˆ¶çŸ©å½¢ï¼Œæ˜¾ç¤ºæ•ˆæœä¸ºçº¢è‰² ctx.fillRect(50, 50, 100, 100) // å¼¹å‡ºæ ˆä¸­é¡¶ç«¯çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™çº¢è‰²çš„å¡«å……æ ·å¼ä¼šè¢«å¼¹å‡ºçš„çŠ¶æ€è¦†ç›–ï¼Œå˜ä¸ºé»‘è‰² ctx.restore() // ç»˜åˆ¶çŸ©å½¢ï¼Œæ˜¾ç¤ºæ•ˆæœä¸ºé»‘è‰² ctx.fillRect(200, 50, 100, 100) canvasåœ†å½¢/åœ†å¼§ ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise)ï¼šç”»ä¸€ä¸ªä»¥(x, y)åæ ‡ä¸ºåœ†å¿ƒï¼Œradius ä¸ºåŠå¾„çš„åœ†å¼§æˆ–åœ†ï¼Œä» startAngle å¼€å§‹ï¼Œåˆ° endAngle ç»“æŸã€‚\nå‚æ•°å¦‚ä¸‹ï¼š\nxï¼šåœ†å¿ƒåœ¨ç”»å¸ƒ x è½´ä¸Šçš„åç§»é‡ã€‚ yï¼šåœ†å¿ƒåœ¨ç”»å¸ƒ y è½´ä¸Šçš„åç§»é‡ã€‚ radiusï¼šç»˜åˆ¶åœ†çš„åŠå¾„ã€‚ startAngleï¼šåœ†å¼§çš„èµ·å§‹ç‚¹ï¼Œx è½´æ–¹å‘å¼€å§‹è®¡ç®—ï¼Œå•ä½ä»¥å¼§åº¦è¡¨ç¤ºã€‚ endAngleï¼šåœ†å¼§çš„ç»ˆç‚¹ï¼Œå•ä½ä»¥å¼§åº¦è¡¨ç¤ºã€‚ anticlockwiseï¼šå¸ƒå°”å€¼ã€‚true è¡¨ç¤ºé€†æ—¶é’ˆï¼Œfalse è¡¨ç¤ºé¡ºæ—¶é’ˆã€‚ï¼ˆé»˜è®¤å€¼ï¼‰ ctx.arcTo(x1, y1, x2, y2, radius)ï¼šæ ¹æ®è®¾ç½®çš„ä¸¤ä¸ªæ§åˆ¶ç‚¹å’ŒåŠå¾„ç”»ä¸€æ®µåœ†å¼§ã€‚\nå¿…é¡»å­˜åœ¨ä¸€ä¸ªå¼€å§‹åæ ‡ç‚¹ ctx.moveTo(x, y)ï¼Œä¸‰ç‚¹æ‰èƒ½æ„æˆåœ†å¼§ï¼ŒåŠå¾„ä¸º radius çš„åœ†å‘å¤¹è§’é‡Œé¢å¡«å……ã€‚ ç»˜åˆ¶çš„åœ†å¼§ä¸€å®šç»è¿‡èµ·ç‚¹ï¼Œä½†ä¸ä¸€å®šç»è¿‡ (x1, y1) å’Œ (x2, y2)ï¼Œè¿™ä¸¤ä¸ªåæ ‡åªæ˜¯ç”¨æ¥æ§åˆ¶æ–¹å‘çš„ã€‚ canvasè´å¡å°”æ›²çº¿ äºŒæ¬¡è´å¡å°” ctx.quadraticCurveTo(cpx, cpy, x, y)ï¼šç»˜åˆ¶äºŒæ¬¡è´å¡å°”æ›²çº¿ã€‚\nå‚æ•°ï¼š\ncpxï¼šæ§åˆ¶ç‚¹çš„ x è½´åæ ‡ã€‚\ncpyï¼šæ§åˆ¶ç‚¹çš„ y è½´åæ ‡ã€‚\nxï¼šç»ˆç‚¹çš„ x è½´åæ ‡ã€‚\nyï¼šç»ˆç‚¹çš„ y è½´åæ ‡ã€‚\næ³¨æ„:\nå¿…é¡»è¦è®¾ç½®èµ·ç‚¹ moveTo(x, y)ã€‚ äºŒæ¬¡è´å¡å°”æ›²çº¿ä¸€å®šç»è¿‡èµ·ç‚¹å’Œç»ˆç‚¹ã€‚ // å°†3ä¸ªç‚¹è¿æ¥èµ·æ¥ ctx.beginPath() ctx.moveTo(20, 20) ctx.lineTo(200, 0) ctx.lineTo(100, 100) ctx.stroke() // è§‚å¯ŸäºŒæ¬¡è´å¡å°”æ›²çº¿åœ¨3ç‚¹ä¹‹é—´çš„ä½ç½® ctx.beginPath() ctx.moveTo(20, 20) ctx.quadraticCurveTo(200, 0, 100, 100, 20) ctx.stroke() ä¸‰æ¬¡è´å¡å°” ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)ï¼šç»˜åˆ¶ä¸‰æ¬¡è´å¡å°”æ›²çº¿ã€‚\nå‚æ•°åªæ˜¯åœ¨äºŒæ¬¡è´å¡å°”çš„åŸºç¡€ä¸Šå¤šå¢åŠ äº†ä¸€ä¸ªæ§åˆ¶ç‚¹ (cp2x, cp2y)ã€‚\nåŒæ ·è¦è®¾ç½®èµ·ç‚¹ moveTo(x, y)ï¼Œä¹Ÿä¸€å®šç»è¿‡èµ·ç‚¹å’Œç»ˆç‚¹ã€‚\n// å°†4ä¸ªç‚¹è¿æ¥èµ·æ¥ ctx.beginPath() ctx.moveTo(20, 20) ctx.lineTo(200, 0) ctx.lineTo(100, 100) ctx.lineTo(200, 100) ctx.stroke() // è§‚å¯Ÿä¸‰æ¬¡è´å¡å°”æ›²çº¿åœ¨4ç‚¹ä¹‹é—´çš„ä½ç½® ctx.beginPath() ctx.moveTo(20, 20) ctx.bezierCurveTo(200, 0, 100, 100, 200, 100, 20) ctx.stroke() canvaså˜æ¢ å¹³ç§»å˜æ¢ ctx.translate(x, y)ï¼šå¯¹å½“å‰ canvas ç”»å¸ƒè¿›è¡Œå¹³ç§»å˜æ¢ã€‚\nxï¼šæ°´å¹³æ–¹å‘çš„ç§»åŠ¨è·ç¦»ã€‚\nyï¼šå‚ç›´æ–¹å‘çš„ç§»åŠ¨è·ç¦»ã€‚\næ³¨æ„ï¼šåœ¨ canvas ä¸­ translate æ˜¯ç´¯åŠ çš„ã€‚\n// x è½´å’Œ y è½´éƒ½å¹³ç§» 50px ctx.translate(50, 50) ctx.fillRect(0, 0, 100, 100) æ—‹è½¬å˜æ¢ ctx.rotate(angle)ï¼šå°†å½“å‰ canvas ç”»å¸ƒå¯¹ç…§åŸç‚¹é¡ºæ—¶é’ˆæ—‹è½¬ã€‚\nangleï¼šé¡ºæ—¶é’ˆæ—‹è½¬çš„å¼§åº¦(degree * Math.PI / 180), æ—‹è½¬çš„ä¸­å¿ƒå§‹ç»ˆæ˜¯ canvas çš„åŸç‚¹ (0, 0)ï¼Œx è½´é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œå¦‚æœè¦æ”¹å˜ä¸­å¿ƒç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ translate() æ–¹æ³•ç§»åŠ¨ canvas\næ³¨æ„ï¼šåœ¨ canvas ä¸­ rotate æ˜¯ç´¯åŠ çš„\nctx.translate(50, 50) // é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦ ctx.rotate(45 * Math.PI / 180) ctx.fillRect(0, 0, 100, 100) ä¼¸ç¼©å˜æ¢ ctx.scale(x, y)ï¼šå°†å½“å‰ canvas ç”»å¸ƒçš„ x è½´å’Œ y è½´è¿›è¡Œä¼¸ç¼©å˜æ¢ã€‚\nå‚æ•°ï¼š\nxï¼šæ°´å¹³æ–¹å‘çš„ç¼©æ”¾å› å­ã€‚ yï¼šå‚ç›´æ–¹å‘çš„ç¼©æ”¾å› å­ã€‚ æ³¨æ„:\nåœ¨ canvas ä¸­ scale æ˜¯ç´¯åŠ çš„ã€‚ ç¼©æ”¾å› å­ä¸º 1 æ—¶å¤§å°ä¸å˜ï¼Œå€¼ä¸ºè´Ÿæ•°æŒ‰ç…§ x è½´æˆ– y è½´è¿›è¡Œç¿»è½¬ï¼ˆç¿»è½¬ä¸Šä¸‹æ–‡ï¼‰ é»˜è®¤çš„ï¼Œåœ¨ canvas ä¸­ä¸€ä¸ªå•ä½å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåƒç´ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°† 0.5 ä½œä¸ºç¼©æ”¾å› å­ï¼Œæœ€ç»ˆçš„å•ä½ä¼šå˜æˆ 0.5 åƒç´ ï¼Œå¹¶ä¸”å½¢çŠ¶çš„å°ºå¯¸ä¼šå˜æˆåŸæ¥çš„ä¸€åŠã€‚ç›¸ä¼¼çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°† 2.0 ä½œä¸ºç¼©æ”¾å› å­ï¼Œå°†ä¼šå¢å¤§å•ä½å°ºå¯¸å˜æˆä¸¤ä¸ªåƒç´ ã€‚å½¢çŠ¶çš„å°ºå¯¸å°†ä¼šå˜æˆåŸæ¥çš„ä¸¤å€ã€‚\nctx.translate(50, 50) // x è½´æ”¾å¤§ 2 å€ï¼Œy è½´ä¸å˜ ctx.scale(2, 1) ctx.fillRect(0, 0, 100, 100) æ–‡å­—ç¿»è½¬ // x è½´æ”¾å¤§ 2 å€ï¼Œå¹¶ç¿»è½¬ï¼Œy è½´ä¸å˜ ctx.scale(-2, 1) ctx.font = '48px serif' ctx.fillText('canvas', -200, 100) canvasèƒŒæ™¯ å›¾ç‰‡èƒŒæ™¯ ctx.drawImage(img, sx, sy, swidth, sheight, x, y, width, height)ï¼šåœ¨ç”»å¸ƒä¸Šç»˜åˆ¶å›¾ç‰‡ã€‚\nå‚æ•°ï¼š\nimgï¼šå›¾åƒæºå¯¹è±¡ï¼ˆè§„å®šä½¿ç”¨çš„å›¾åƒã€ç”»å¸ƒæˆ–è§†é¢‘ç­‰ï¼‰ã€‚ sxï¼šå¯é€‰ï¼Œå¼€å§‹å‰ªåˆ‡çš„xåæ ‡ä½ç½®ã€‚ syï¼šå¯é€‰ï¼Œå¼€å§‹å‰ªåˆ‡çš„yåæ ‡ä½ç½®ã€‚ swidthï¼šå¯é€‰ï¼Œè¢«å‰ªåˆ‡å›¾åƒçš„å®½åº¦ã€‚ sheightï¼šå¯é€‰ï¼Œè¢«å‰ªåˆ‡å›¾åƒçš„é«˜åº¦ã€‚ xï¼šåœ¨ç”»å¸ƒä¸Šæ”¾ç½®å›¾åƒçš„xåæ ‡ä½ç½®ã€‚ yï¼šåœ¨ç”»å¸ƒä¸Šæ”¾ç½®å›¾åƒçš„yåæ ‡ä½ç½®ã€‚ widthï¼šå¯é€‰ï¼Œè¦ä½¿ç”¨çš„å›¾åƒçš„å®½åº¦ï¼ˆä¼¸å±•æˆ–ç¼©å°å›¾åƒï¼‰ã€‚ heightï¼šå¯é€‰ï¼Œè¦ä½¿ç”¨çš„å›¾åƒçš„é«˜åº¦ï¼ˆä¼¸å±•æˆ–ç¼©å°å›¾åƒï¼‰ã€‚ æ³¨æ„: å¿…é¡»è¦ç­‰å›¾ç‰‡åŠ è½½å®Œæ‰èƒ½æ“ä½œï¼Œå‚æ•°å¿…é¡»å¦‚ä¸‹ 3 ç§æ–¹å¼(3, 5, 9)\n\u003cimg id=\"img\" src=\"./img/react.png\"\u003e \u003ccanvas id=\"canvas\" width=\"400\" height=\"200\" style=\"border: 1px solid\"\u003e\u003c/canvas\u003e ctx.drawImage(img, x, y)ï¼šåœ¨ç”»å¸ƒä¸Šå®šä½å›¾åƒã€‚\nconst img = new Image() img.src = './img/react.png' img.onload = () =\u003e { // å°†å›¾ç‰‡ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Š ctx.drawImage(img, 0, 0) } ctx.drawImage(img, x, y, width, height)ï¼šåœ¨ç”»å¸ƒä¸Šå®šä½å›¾åƒï¼Œå¹¶è§„å®šå›¾åƒçš„å®½åº¦å’Œé«˜åº¦ã€‚\nctx.drawImage(img, 0, 0, 100, 100) ctx.drawImage(img, sx, sy, swidth, sheight, x, y, width, height)ï¼šå‰ªåˆ‡å›¾åƒï¼Œå¹¶åœ¨ç”»å¸ƒä¸Šå®šä½è¢«å‰ªåˆ‡çš„éƒ¨åˆ†ã€‚\nctx.drawImage(img, 0, 0, 100, 100, 0, 0, 100, 100) è®¾ç½®èƒŒæ™¯ ctx.createPattern(image, repetition)ï¼šåˆ›å»ºä¸€ä¸ªç”¨äºå›¾åƒç»˜åˆ¶ä½¿ç”¨çš„æ ·å¼ã€‚\nå‚æ•°ï¼š\nimageï¼šå›¾åƒæºå¯¹è±¡ï¼ˆè§„å®šä½¿ç”¨çš„å›¾åƒã€ç”»å¸ƒæˆ–è§†é¢‘ç­‰ï¼‰ã€‚ repetitionï¼šé‡å¤å›¾åƒçš„æ–¹å¼ï¼Œå€¼åªèƒ½æ˜¯ repeat | repeat-x | repeat-y | no-repeatã€‚ repetition å¦‚æœä¸ºç©ºå­—ç¬¦ä¸² (â€™â€™) æˆ– null (ä½†ä¸æ˜¯ undefined )ï¼Œrepetitionå°†è¢«å½“ä½œ repeat\n// åˆ›å»ºèƒŒæ™¯æ ·å¼ const pat = ctx.createPattern(img, 'repeat') ctx.fillStyle = pat ctx.fillRect(0, 0, 300, 100) canvasæ¸å˜ çº¿æ€§æ¸å˜ ctx.createLinearGradient(x1, y1, x2, y2)ï¼šä» (x1, y1) åˆ° (x2, y2) è¿›è¡Œæ¸å˜ã€‚\nè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª CanvasGradient å¯¹è±¡ã€‚\nä½¿ç”¨ CanvasGradient èº«ä¸Šçš„ addColorStop(position, color) è®¾ç½®æ¸å˜é¢œè‰²ã€‚\nå‚æ•°ï¼š\npositionï¼šä»‹äº 0-1 ä¹‹é—´çš„å€¼ï¼Œè¡¨ç¤ºæ¸å˜ä¸­å¼€å§‹ä¸ç»“æŸä¹‹é—´çš„ä½ç½®ã€‚ colorï¼šåœ¨positionä½ç½®æ˜¾ç¤ºçš„cssé¢œè‰²å€¼ // ä» (0, 0) åæ ‡ç‚¹åˆ° (300, 0) åæ ‡ç‚¹è¿›è¡Œæ¸å˜ const line = ctx.createLinearGradient(0, 0, 300, 0) // æ¸å˜é¡ºåº çº¢ --\u003e è“ --\u003e ç»¿ line.addColorStop(0, 'red') line.addColorStop(.5, 'blue') line.addColorStop(1, 'green') // å›¾åƒå¡«å……é¢œè‰²è®¾ç½®ä¸ºæ¸å˜è‰² ctx.fillStyle = line ctx.fillRect(0, 0, 300, 100) å¾„å‘æ¸å˜ ctx.createRadialGradient(x1, y1, r1, x2, y2, r2)ï¼šä» (x1, y1) ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º r1 çš„åœ†ï¼Œå‘ (x2, y2) ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º r2 çš„åœ†è¿›è¡Œå¾„å‘æ¸å˜ã€‚\nä½¿ç”¨æ–¹æ³•è·Ÿä¸Šè¿°çš„ createLinearGradient ä¸€æ ·ã€‚\n// ä»¥ (200, 100) ä¸ºåœ†å¿ƒ 50 ä¸ºåŠå¾„ï¼Œå‘ 100 ä¸ºåŠå¾„çš„åœ†æ¸å˜ const grad = ctx.createRadialGradient(200, 100, 50, 200, 100, 100) // æ¸å˜é¡ºåº çº¢ --\u003e è“ --\u003e ç»¿ grad.addColorStop(0, 'red') grad.addColorStop(.5, 'blue') grad.addColorStop(1, 'green') // å›¾åƒå¡«å……é¢œè‰²è®¾ç½®ä¸ºæ¸å˜è‰² ctx.fillStyle = grad ctx.fillRect(0, 0, 400, 200) canvasæ–‡æœ¬ç›¸å…³ æ–‡æœ¬ç›¸å¯¹äºç”»å¸ƒçš„åç§»é‡ï¼Œéƒ½æ˜¯å‚ç…§æ–‡æœ¬çš„åŸºçº¿è¿›è¡Œåç§»çš„ã€‚\næ¸²æŸ“æ–‡æœ¬ canvas ä¸­æä¾›äº†ä¸¤ç§æ–¹æ³•æ¸²æŸ“æ–‡æœ¬ï¼Œå¦‚ä¸‹ï¼š\nctx.fillText(text, x, y, [maxWidth])ï¼šåœ¨ (x, y) å¡«å……æŒ‡å®šçš„æ–‡æœ¬ (text)ã€‚\nctx.strokeText(text, x, y, [maxWidth])ï¼šåœ¨ (x, y) ç»˜åˆ¶æ–‡æœ¬è¾¹æ¡† (text)ã€‚\nå‚æ•°ï¼š\ntextï¼šæ–‡æœ¬å†…å®¹ã€‚ x, yï¼šåç§»é‡ã€‚ maxWidthï¼šå­—ä½“ç»˜åˆ¶çš„æœ€å¤§å®½åº¦ï¼Œç»˜åˆ¶å­—ä½“å®½åº¦è¶…å‡ºæœ€å¤§å®½åº¦ä¼šæ°´å¹³è‡ªé€‚åº” // è¾¹æ¡†æ–‡æœ¬ ctx.strokeText('å¤©å¤©å¥½å¿ƒæƒ…', 50, 50) // å¡«å……æ–‡æœ¬ ctx.fillText('å¤©å¤©å¥½å¿ƒæƒ…', 50, 100) // å¡«å……æ–‡æœ¬ç°åœ¨å®½åº¦ ctx.fillText('å¤©å¤©å¥½å¿ƒæƒ…', 50, 150, 30) æ–‡æœ¬æ ·å¼ è®¾ç½®å­—ä½“ ctx.fontï¼šfont å±æ€§æŒ‡å®šæ—¶ï¼Œå¿…é¡»è¦æœ‰å¤§å°å’Œå­—ä½“ï¼Œç¼ºä¸€ä¸å¯ã€‚\né»˜è®¤å­—ä½“ 10px sans-serifã€‚\næ–‡æœ¬å¯¹é½æ–¹å¼ ctx.textAlignï¼šè®¾ç½®æ–‡æœ¬çš„å¯¹é½æ–¹å¼ï¼Œå€¼å¦‚ä¸‹ï¼š\nstartï¼šæ–‡æœ¬å¯¹é½ç•Œçº¿å¼€å§‹çš„åœ°æ–¹ã€‚ï¼ˆé»˜è®¤å€¼ï¼‰ endï¼šæ–‡æœ¬å¯¹é½ç•Œçº¿ç»“æŸçš„åœ°æ–¹ã€‚ leftï¼šæ–‡æœ¬å·¦å¯¹é½ã€‚ rightï¼šæ–‡æœ¬å³å¯¹é½ã€‚ centerï¼šæ–‡æœ¬å±…ä¸­å¯¹é½ã€‚ è¿™é‡Œçš„ textAlign = â€˜centerâ€™ æ¯”è¾ƒç‰¹æ®Šã€‚textAlign çš„å€¼ä¸º center æ—¶å€™æ–‡æœ¬çš„å±…ä¸­æ˜¯åŸºäºä½ åœ¨ (fillText / strokeText) çš„æ—¶å€™æ‰€ç»™çš„xçš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´æ–‡æœ¬ä¸€åŠåœ¨ x çš„å·¦è¾¹ï¼Œä¸€åŠåœ¨ x çš„å³è¾¹ï¼ˆå¯ä»¥ç†è§£ä¸ºè®¡ç®— x çš„ä½ç½®æ—¶ä»é»˜è®¤æ–‡å­—çš„å·¦ç«¯ï¼Œæ”¹ä¸ºæ–‡å­—çš„ä¸­å¿ƒï¼Œå› æ­¤ä½ åªéœ€è¦è€ƒè™‘ x çš„ä½ç½®å³å¯ï¼‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³è®©æ–‡æœ¬åœ¨æ•´ä¸ª canvas å±…ä¸­ï¼Œå°±éœ€è¦å°† (fillText / strokeText) çš„xå€¼è®¾ç½®æˆ canvas çš„å®½åº¦çš„ä¸€åŠã€‚\nctx.font = '30px sans-serif' // æ–‡æœ¬å±…ä¸­å¯¹é½ ctx.textAlign = 'center' ctx.strokeText('å¤©å¤©å¥½å¿ƒæƒ…', 50, 50) æ–‡æœ¬åŸºçº¿å¯¹é½æ–¹å¼ æ–‡æœ¬ç›¸å¯¹äºç”»å¸ƒçš„åç§»é‡ï¼Œéƒ½æ˜¯å‚ç…§æ–‡æœ¬çš„åŸºçº¿è¿›è¡Œåç§»çš„ï¼Œè®¾ç½®åŸºçº¿åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®ï¼Œå¯ä»¥è°ƒæ•´æ–‡æœ¬åœ¨ canvas ç”»å¸ƒä¸­çš„ä½ç½®ã€‚\nctx.textBaselineï¼šæç»˜ç»˜åˆ¶æ–‡æœ¬æ—¶ï¼Œå½“å‰æ–‡æœ¬åŸºçº¿çš„å±æ€§ï¼Œå€¼å¦‚ä¸‹ï¼š\nalphabeticï¼šæ–‡æœ¬åŸºçº¿æ˜¯æ ‡å‡†çš„å­—æ¯åŸºçº¿ã€‚ï¼ˆé»˜è®¤å€¼ï¼‰\ntopï¼šæ–‡æœ¬åŸºçº¿åœ¨æ–‡æœ¬å—çš„é¡¶éƒ¨ã€‚\nmiddle: æ–‡æœ¬åŸºçº¿åœ¨æ–‡æœ¬å—çš„ä¸­é—´ã€‚\nbottomï¼šæ–‡æœ¬åŸºçº¿åœ¨æ–‡æœ¬å—çš„åº•éƒ¨ã€‚\nhangingï¼šæ–‡æœ¬åŸºçº¿æ˜¯æ‚¬æŒ‚åŸºçº¿ã€‚\nideographicï¼šæ–‡æœ¬åŸºçº¿æ˜¯è¡¨æ„å­—åŸºçº¿ã€‚\nå¦‚æœå­—ç¬¦æœ¬èº«è¶…å‡ºäº† alphabetic åŸºçº¿ï¼Œé‚£ä¹ˆ ideographic åŸºçº¿ä½ç½®åœ¨å­—ç¬¦æœ¬èº«çš„åº•éƒ¨\nctx.font = '30px sans-serif' ctx.textAlign = 'center' // åŸºçº¿è®¾ç½®åœ¨æ–‡æœ¬çš„é¡¶éƒ¨ ctx.textBaseline = 'top' ctx.strokeText('å¤©å¤©å¥½å¿ƒæƒ…', 50, 50) æ–‡æœ¬åœ¨canvasä¸­å‚ç›´å±…ä¸­æ˜¾ç¤º ctx.font = '30px sans-serif' // x è½´åç§»ç”»å¸ƒä¸€åŠï¼Œæ°´å¹³æŒ‰æ–‡æœ¬ä¸­é—´å¯¹é½ ctx.textAlign = 'center' // y è½´åç§»ç”»å¸ƒä¸€åŠï¼ŒåŸºçº¿è®¾ç½®åœ¨æ–‡æœ¬çš„ä¸­å¿ƒä½ç½® ctx.textBaseline = 'middle' ctx.fillText('å¤©å¤©å¥½å¿ƒæƒ…', canvas.width / 2, canvas.height / 2) è·å–æ–‡æœ¬ä¿¡æ¯ ctx.measureText(text)ï¼šè¿”å›ä¸€ä¸ª TextMetrics å¯¹è±¡ï¼ŒåŒ…å«å…³äºæ–‡æœ¬å°ºå¯¸çš„ä¿¡æ¯ï¼ˆä¸€èˆ¬éƒ½ç”¨æ¥è·å–æ–‡æœ¬çš„å®½åº¦ï¼‰ã€‚\nå‚æ•°ï¼š\ntextï¼šæ–‡æœ¬å†…å®¹ã€‚ ctx.font = '100px serif' // è¿”å›å½“å‰æ–‡æœ¬çš„ç›¸å…³ä¿¡æ¯ const textInfo = ctx.measureText('å¤©å¤©å¥½å¿ƒæƒ…') console.log(textInfo) canvasé˜´å½± è®¾ç½® canvas å›¾åƒæˆ–æ–‡å­—é˜´å½±éœ€è¦å¦‚ä¸‹å±æ€§ï¼š\nctx.shadowOffsetXï¼šå›¾åƒ x è½´å»¶ä¼¸è·ç¦»ã€‚ï¼ˆé»˜è®¤å€¼ 0ï¼‰ ctx.shadowOffsetYï¼šå›¾åƒ y è½´å»¶ä¼¸è·ç¦»ã€‚ï¼ˆé»˜è®¤å€¼ 0ï¼‰ ctx.shadowBlurï¼šç”¨æ¥è®¾å®šé˜´å½±çš„æ¨¡ç³Šç¨‹åº¦ï¼Œå…¶æ•°å€¼å¹¶ä¸è·Ÿåƒç´ æ•°é‡æŒ‚é’©ï¼Œä¹Ÿä¸å—å˜æ¢çŸ©é˜µçš„å½±å“ã€‚ï¼ˆé»˜è®¤å€¼ 0ï¼‰ ctx.shadowColorï¼šå¿…é¡»æ˜¯æ ‡å‡†çš„CSSé¢œè‰²å€¼ï¼Œç”¨äºè®¾å®šé˜´å½±é¢œè‰²æ•ˆæœã€‚ï¼ˆé»˜è®¤æ˜¯å…¨é€æ˜çš„é»‘è‰²ï¼‰ // å›¾åƒé˜´å½±å‘å·¦ç§»åŠ¨ 10px ctx.shadowOffsetX = 10 // å›¾åƒé˜´å½±å‘ä¸‹ç§»åŠ¨ 10px ctx.shadowOffsetY = 10 // æ¨¡ç³Šç¨‹åº¦ä¸º 10 ctx.shadowBlur = 10 // é˜´å½±é¢œè‰²ä¸ºçº¢è‰² ctx.shadowColor = 'red' ctx.fillRect(50, 50, 100, 100) canvasåƒç´ ç›¸å…³ è·å–åŒºåŸŸå†…åƒç´ ä¿¡æ¯ ctx.getImageData(x, y, width, height)ï¼šè¿”å›ä¸€ä¸ª ImageData å¯¹è±¡ï¼Œç”¨æ¥æè¿° canvas åŒºåŸŸéšå«çš„åƒç´ æ•°æ®ï¼Œè¿™ä¸ªåŒºåŸŸé€šè¿‡çŸ©å½¢è¡¨ç¤ºï¼Œèµ·å§‹ç‚¹æ˜¯ (x, y)ï¼Œå®½ä¸º widthï¼Œé«˜ä¸º heightã€‚\nimageData å¯¹è±¡ä¸­å­˜å‚¨ç€ canvas å¯¹è±¡çœŸå®çš„åƒç´ æ•°æ®ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåªè¯»å±æ€§ï¼š\nwidthï¼šå›¾ç‰‡çš„å®½åº¦ï¼Œå•ä½æ˜¯åƒç´ ã€‚\nheightï¼šå›¾ç‰‡çš„é«˜åº¦ï¼Œå•ä½æ˜¯åƒç´ ã€‚\ndataï¼šUint8ClampedArray ç±»å‹çš„ä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«ç€ RGBA æ ¼å¼çš„æ•´å‹æ•°ç»„ï¼ŒèŒƒå›´åœ¨ 0-255 ä¹‹é—´ (åŒ…æ‹¬255)ã€‚æŒ‰å›¾åƒä»å·¦åˆ°å³ï¼Œä»ä¸‹åˆ°ä¸‹è®°å½•åƒç´ çš„\nconst img = new Image() img.src = './img/react.png' img.onload = () =\u003e { ctx.drawImage(img, 0, 0, 100, 100) // è·å–ç»˜åˆ¶å›¾åƒåŒºåŸŸå†…çš„ç›¸å…³ä¿¡æ¯ const imgData = ctx.getImageData(0, 0, 100, 100) console.log(imgData) } å›¾åƒçš„é•¿å’Œå®½éƒ½æ˜¯ 100ï¼Œæ‰€ä»¥ä¸€å…±æœ‰ 10000 ä¸ªåƒç´ ç‚¹ (100 * 100)ï¼Œå› ä¸ºä¸€ä¸ªåƒç´ ç‚¹å¯¹åº”ä¸€ä¸ª RGBA å€¼ï¼Œä¸€ä¸ª RGBA å€¼ç”± 4 ä¸ªæ•°å€¼æ„æˆï¼Œæ‰€ä»¥ data æ•°ç»„çš„é•¿åº¦ä¸º 40000ã€‚\nè¯¥æ•°ç»„æ¯ 4 ä¸ªå€¼æ„æˆä¸€ä¸ªåƒç´ ç‚¹ã€‚\nå¯¹ç”»å¸ƒè¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥ ctx.putImageData(imagedata, dx, dy)\nctx.putImageData(imagedata, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight)\nå°†æ•°æ®ä»å·²æœ‰çš„ ImageData å¯¹è±¡ç»˜åˆ¶åˆ°ä½å›¾çš„æ–¹æ³•ã€‚ å¦‚æœæä¾›äº†ä¸€ä¸ªç»˜åˆ¶è¿‡çš„çŸ©å½¢ï¼Œåˆ™åªç»˜åˆ¶è¯¥çŸ©å½¢çš„åƒç´ ã€‚æ­¤æ–¹æ³•ä¸å—ç”»å¸ƒè½¬æ¢çŸ©é˜µçš„å½±å“\nå‚æ•°:\nimagedataï¼šåŒ…å«åƒç´ å€¼çš„æ•°ç»„å¯¹è±¡ã€‚ dxï¼šæºå›¾åƒæ•°æ®åœ¨ç›®æ ‡ç”»å¸ƒä¸­çš„ä½ç½®åç§»é‡ï¼ˆx è½´æ–¹å‘çš„åç§»é‡ï¼‰ã€‚ dyï¼šæºå›¾åƒæ•°æ®åœ¨ç›®æ ‡ç”»å¸ƒä¸­çš„ä½ç½®åç§»é‡ï¼ˆy è½´æ–¹å‘çš„åç§»é‡ï¼‰ã€‚ dirtyXï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’çš„ä½ç½®ã€‚é»˜è®¤æ˜¯æ•´ä¸ªå›¾åƒæ•°æ®çš„å·¦ä¸Šè§’ï¼ˆx åæ ‡ï¼‰ã€‚ dirtyYï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’çš„ä½ç½®ã€‚é»˜è®¤æ˜¯æ•´ä¸ªå›¾åƒæ•°æ®çš„å·¦ä¸Šè§’ï¼ˆy åæ ‡ï¼‰ã€‚ dirtyWidthï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸçš„å®½åº¦ã€‚é»˜è®¤æ˜¯å›¾åƒæ•°æ®çš„å®½åº¦ã€‚ dirtyHeightï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸçš„é«˜åº¦ã€‚é»˜è®¤æ˜¯å›¾åƒæ•°æ®çš„é«˜åº¦ã€‚ const img = new Image() img.src = './img/react.png' img.onload = () =\u003e { ctx.drawImage(img, 0, 0, 100, 100) const imgData = ctx.getImageData(0, 0, 100, 100) // å°† ImageData å¯¹è±¡é‡æ–°å†™å…¥åˆ°ç”»å¸ƒä¸­ ctx.putImageData(imgData, 200, 100, 0, 0, 50, 50) } åˆ›å»ºimageDataå¯¹è±¡ ctx.createImageData(width, height)\nctx.createImageData(imagedata)\nåˆ›å»ºä¸€ä¸ªæ–°çš„ã€ç©ºçš„ã€æŒ‡å®šå¤§å°çš„imageData å¯¹è±¡ï¼Œæ‰€æœ‰åƒç´ åœ¨æ–°å¯¹è±¡ä¸­éƒ½æ˜¯é€æ˜çš„ã€‚ï¼ˆdata æ•°ç»„ä¸­çš„å€¼éƒ½æ˜¯ 0ï¼‰\nå‚æ•°:\nwidthï¼šimageData æ–°å¯¹è±¡çš„å®½åº¦ã€‚ heightï¼šimageData æ–°å¯¹è±¡çš„é«˜åº¦ã€‚ imagedataï¼šä»ç°æœ‰çš„ ImageData å¯¹è±¡ä¸­ï¼Œå¤åˆ¶ä¸€ä¸ªå’Œå…¶å®½åº¦å’Œé«˜åº¦ç›¸åŒçš„å¯¹è±¡ã€‚å›¾åƒè‡ªèº«ä¸å…è®¸è¢«å¤åˆ¶ã€‚ï¼ˆdata æ•°ç»„ä¸­çš„å€¼éƒ½æ˜¯ 0ï¼‰ const img = new Image() img.src = './img/react.png' img.onload = () =\u003e { ctx.drawImage(img, 0, 0, 100, 100) const imgData = ctx.getImageData(0, 0, 100, 100) // æ ¹æ®è€çš„ ImageData å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ ImageData å¯¹è±¡ const imgDataByData = ctx.createImageData(imgData) console.log('imgDtaåˆ›å»º', imgDataByData) // æ ¹æ®æŒ‡å®šçš„å®½é«˜ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ ImageData å¯¹è±¡ const imgDataByRect = ctx.createImageData(10, 10) console.log('å®½é«˜åˆ›å»º', imgDataByRect) } åƒç´ æ‰©å±• è·å–æŸä¸ªåæ ‡çš„åƒç´  é€šè¿‡ getImageData æ–¹æ³•æˆ‘ä»¬å¯ä»¥è·å–åˆ°æ•´ä¸ª canvas ç”»å¸ƒçš„åƒç´ ä¿¡æ¯ã€‚å·²çŸ¥åæ ‡ (x, y)ï¼Œé€šè¿‡ (y * canvas.width + x) å¯ä»¥è·å–è¿™æ˜¯ç¬¬å‡ ä¸ªåƒç´ ã€‚å› ä¸ºä¸€ä¸ªåƒç´ åŒ…å« RGBA 4 ä¸ªæ•°å€¼ï¼Œæ‰€ä»¥æœ€åè·å–åˆ°çš„åƒç´ ä¸º (y * canvas.width + x) * 4ï¼ŒåŠ ä¸Šç´§è·Ÿçš„å 3 ä½æ‰€å¯¹åº”çš„æ•°å€¼æ„æˆçš„ RGBA å€¼\n// è·å– imageData ä¸­æŸä¸ªåæ ‡çš„åƒç´  function getPixelInfo(imageData, x, y) { const { width, data } = imageData const pixel = [] const index = (y * width + x) * 4 pixel[0] = data[index] pixel[1] = data[index + 1] pixel[2] = data[index + 2] pixel[3] = data[index + 3] return pixel } æµ‹è¯• ctx.fillStyle = 'red' ctx.fillRect(10, 10, 1, 1) const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height) // è·å– (10, 10) è¿™ä¸ªåæ ‡ç‚¹çš„åƒç´ ä¿¡æ¯ const pixel = getPixelInfo(imgData, 10, 10) console.log(pixel) è®¾ç½®æŸä¸ªåæ ‡çš„åƒç´  åŸºæœ¬åŸç†è·Ÿè·å–åæ ‡åƒç´ ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ª RGBA å€¼æ¥è®¾ç½®æŸäº›åæ ‡çš„åƒç´ ã€‚\n// è®¾ç½® imageData ä¸­æŸä¸ªåæ ‡çš„åƒç´  function setPixelInfo(imageData, x, y, rgba) { const { width, data } = imageData const index = (y * width + x) * 4 data[index] = rgba[0] data[index + 1] = rgba[1] data[index + 2] = rgba[2] data[index + 3] = rgba[3] } æµ‹è¯• // åˆ›å»ºä¸€ä¸ª10 * 10 imageData å¯¹è±¡ const imgData = ctx.createImageData(10, 10) // RGBA çº¢è‰² const rgba = [255, 0, 0, 255] for (let y = 0; y \u003c 10; y++) { for (let x = 0; x \u003c 10; x++) { // å°†æ¯ä¸ªåƒç´ ç‚¹éƒ½è®¾ç½®ä¸ºçº¢è‰² setPixelInfo(imgData, x, y, rgba) } } // å°† imageData å¯¹è±¡å†™å…¥åˆ° (100, 100) å¼€å§‹çš„ä½ç½® ctx.putImageData(imgData, 100, 100) é©¬èµ›å…‹å°ç»ƒä¹  ç°åœ¨æˆ‘ä»¬æ—¢èƒ½è·å–åˆ°åæ ‡ä½ç½®çš„åƒç´ ï¼Œä¹Ÿèƒ½è®¾ç½®åæ ‡ä½ç½®çš„åƒç´ ã€‚åŸºäºè¿™ä¸¤ç‚¹æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªé©¬èµ›å…‹çš„æ•ˆæœã€‚\nåŸºæœ¬æ€è·¯ï¼š\nå‡å¦‚ç°åœ¨æœ‰ä¸€ä¸ª 100 * 100 çš„å›¾åƒï¼Œå°†ä¸€ä¸ªåƒç´ ç‚¹çœ‹åšä¸€ä¸ª 1 * 1 çš„å°æ–¹å—ï¼Œé‡Œé¢å°±åªæœ‰ä¸€ä¸ª RGBA å€¼ï¼Œä¸€å…±æœ‰ 100 * 100 = 10000 ä¸ªå°æ–¹å—ï¼Œ10000 ä¸ªåƒç´ ç‚¹ã€‚\nå°†è¿™ä¸ªå°æ–¹å—å˜å¤§ï¼ŒåŒ…å« 2 * 2 ä¸ªåƒç´ ç‚¹ï¼Œä¸€å…±æœ‰ 50 * 50 = 2500 ä¸ªå°æ–¹å—ã€‚\nç°åœ¨ä¸€ä¸ªå°æ–¹å—é‡Œé¢åŒ…å« 4 ä¸ªåƒç´ ç‚¹ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ª RGBA å€¼ï¼Œéšæœºå–å‡ºå…¶ä¸­çš„ä¸€ä¸ª RGBA å€¼ï¼Œå°†è¿™ä¸ªå°æ–¹å—ä¸­çš„ 4 ä¸ªåƒç´ ç‚¹çš„ RGNA å€¼ï¼Œéƒ½è®¾ç½®æˆéšæœºå–å‡ºçš„è¿™ä¸ª RGBA å€¼ã€‚\nç°åœ¨æ¯ä¸ªå°æ–¹å—è™½ç„¶åŒ…å« 4 ä¸ªåƒç´ ç‚¹ï¼Œä½†æ˜¯è¿™ 4 ä¸ªåƒç´ ç‚¹çš„ RGBA å€¼éƒ½ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œç°åœ¨è¿™ä¸ªå›¾åƒåªæœ‰ 2500 ä¸ªåƒç´ ç‚¹ï¼Œåƒç´ ç‚¹å˜å°‘äº†ï¼Œå›¾åƒå°±æ¨¡ç³Šäº†ï¼Œé©¬èµ›å…‹æ•ˆæœå°±å½¢æˆäº†ã€‚\n/* è®¾ç½®é©¬èµ›å…‹åƒç´  imgDataï¼šimageDataå¯¹è±¡ sizeï¼šé©¬èµ›å…‹ç¨‹åº¦ï¼Œå€¼è¶Šå¤§è¶Šæ¨¡ç³Šï¼ˆå°æ–¹å—å®½é«˜ï¼‰ */ function setMosaicPixel(imgData, size) { const { width, height } = imgData // å°æ–¹å—å˜å¤§ï¼Œæ‰€ä»¥å®½é«˜è¦é™¤ä»¥ size for (let y = 0; y \u003c height / size; y++) { for (let x = 0; x \u003c width / size; x++) { // éšæœºè·å–å°æ–¹å—ä¸­çš„ (x, y) åæ ‡ const randomX = x * size + Math.floor(Math.random() * size) const randomY = y * size + Math.floor(Math.random() * size) // è·å–è¿™ä¸ªåæ ‡åƒç´ ç‚¹çš„ RGBA å€¼ const randomPixel = getPixelInfo(imgData, randomX, randomY) // å°†è¿™ä¸ªå°æ–¹å—ä¸­çš„åƒç´ ç‚¹éƒ½åº”ç”¨è¿™ä¸ª RGBA å€¼ for (let MosaicX = 0; MosaicX \u003c size; MosaicX++) { for (let MosaicY = 0; MosaicY \u003c size; MosaicY++) { setPixelInfo(imgData, x * size + MosaicX, y * size + MosaicY, randomPixel) } } } } } æµ‹è¯• const img = new Image() img.src = './img/react.png' img.onload = () =\u003e { // ç»˜åˆ¶å›¾åƒ ctx.drawImage(img, 0, 0, 200, 100) // è·å–å›¾åƒçš„ä¿¡æ¯ const imgData = ctx.getImageData(0, 0, 200, 100) // å°†å›¾åƒé©¬èµ›å…‹åŒ– setMosaicPixel(imgData, 2) // æœ€åé‡æ–°å†™å…¥åˆ°ç”»å¸ƒä¸­ ctx.putImageData(imgData, 0, 0) } canvasé€æ˜åº¦ ctx.globalAlphaï¼šè¿™ä¸ªå±æ€§å½±å“åˆ° canvas é‡Œæ‰€æœ‰å›¾åƒçš„é€æ˜åº¦ï¼Œæœ‰æ•ˆçš„å€¼èŒƒå›´æ˜¯ 0ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ° 1ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ï¼Œé»˜è®¤æ˜¯ 1ã€‚\n// ç”»å¸ƒå…¨å±€é€æ˜åº¦è®¾ç½®ä¸º 0.2 ctx.globalAlpha = .2 ctx.fillStyle = 'red' ctx.fillRect(50, 50, 50, 50) ctx.fillStyle = 'blue' ctx.fillRect(150, 50, 50, 50) canvaså›¾åƒåˆæˆè®¾ç½® ctx.globalCompositeOperationï¼šè®¾ç½®æˆ–è¿”å›å¦‚ä½•å°†ä¸€ä¸ªæºï¼ˆæ–°çš„ sourceï¼‰å›¾åƒç»˜åˆ¶åˆ°ç›®æ ‡ï¼ˆå·²æœ‰çš„ destinationï¼‰çš„å›¾åƒä¸Šã€‚\nå¯é€‰å€¼å¦‚ä¸‹:\nsource-over\tæºåœ¨ä¸Šé¢ï¼Œæ–°çš„å›¾åƒå±‚çº§æ¯”è¾ƒé«˜ã€‚ï¼ˆé»˜è®¤å€¼ï¼‰\nsource-in\tåªç•™ä¸‹æºä¸ç›®æ ‡çš„é‡å éƒ¨åˆ†ã€‚ï¼ˆæºçš„é‚£ä¸€éƒ¨åˆ†ï¼‰\nsource-out\tåªç•™ä¸‹æºè¶…è¿‡ç›®æ ‡çš„éƒ¨åˆ†ã€‚\nsource-atop\tç æ‰æºæº¢å‡ºçš„éƒ¨åˆ†ã€‚\ndestination-over\tç›®æ ‡åœ¨ä¸Šé¢ï¼Œæ—§çš„å›¾åƒå±‚çº§æ¯”è¾ƒé«˜ã€‚\ndestination-in\tåªç•™ä¸‹æºä¸ç›®æ ‡çš„é‡å éƒ¨åˆ†ã€‚ï¼ˆç›®æ ‡çš„é‚£ä¸€éƒ¨åˆ†ï¼‰\ndestination-out\tåªç•™ä¸‹ç›®æ ‡è¶…è¿‡æºçš„éƒ¨åˆ†ã€‚\ndestination-atop\tç æ‰ç›®æ ‡æº¢å‡ºçš„éƒ¨åˆ†ã€‚\nlighter\tæ˜¾ç¤ºæºå›¾åƒ + ç›®æ ‡å›¾åƒã€‚ï¼ˆé‡å å›¾å½¢çš„é¢œè‰²æ˜¯é€šè¿‡é¢œè‰²å€¼ç›¸åŠ æ¥ç¡®å®šçš„ï¼‰\ncopy\tæ˜¾ç¤ºæºå›¾åƒï¼Œå¿½ç•¥ç›®æ ‡å›¾åƒã€‚\nxor\té‚£äº›é‡å å’Œæ­£å¸¸ç»˜åˆ¶ä¹‹å¤–çš„å…¶ä»–åœ°æ–¹æ˜¯é€æ˜çš„ã€‚\n// è®¾ç½®å›¾åƒé‡å çš„åœ°æ–¹ä¸æ˜¾ç¤º ctx.globalCompositeOperation = 'xor' ctx.fillStyle = 'red' ctx.fillRect(50, 50, 50, 50) ctx.fillStyle = 'blue' ctx.fillRect(75, 75, 50, 50) åˆ®åˆ®å¡å°ç»ƒä¹  é€šè¿‡ globalCompositeOperation å±æ€§è®¾ç½®ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„åˆ®åˆ®å¡æ•ˆæœã€‚\nåŸºæœ¬æ€è·¯ï¼š\nå°† canvas ç”»å¸ƒå¡«å……ä¸€ä¸ªé¢œè‰²ï¼Œå’Œæœ€åè¦æ˜¾ç¤ºçš„å›¾ç‰‡å®½é«˜è®¾ä¸ºä¸€è‡´ï¼Œé€šè¿‡å®šä½å°†ç”»å¸ƒè¦†ç›–åœ¨å›¾ç‰‡ä¸Šæ–¹\nç»™ canvas å…ƒç´ ç»‘å®šé¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ï¼Œè·å–å½“å‰é¼ æ ‡æŒ‰ä¸‹ä½ç½®çš„ offsetX å’Œ offsetYï¼Œç›¸å½“äºåœ¨ç”»å¸ƒä¸­çš„åç§»é‡ï¼Œè®¾ç½®èµ·ç‚¹ moveTo(offsetX, offsetY)ã€‚\nç»™ canvas å…ƒç´ ç»‘å®šé¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œé¼ æ ‡æŒ‰ä¸‹ç§»åŠ¨æ—¶ï¼Œå®æ—¶è·å–é¼ æ ‡ç›¸å¯¹äºç”»å¸ƒçš„åç§»é‡ï¼Œè®¾ç½® lineTo(offsetX, offsetY)ï¼Œå¹¶å°†è¿™äº›è·¯å¾„è¿æ¥èµ·æ¥ã€‚\nè®¾ç½® ctx.globalCompositeOperation = â€˜destination-outâ€™ï¼Œåªç•™ä¸‹ä¸æ˜¯é¼ æ ‡ç§»åŠ¨ç»˜åˆ¶å½¢æˆçš„åŒºåŸŸï¼Œé‡å çš„åŒºåŸŸå°†ä¼šé€æ˜æ˜¾ç¤ºï¼Œæœ€ä¸‹æ–¹çš„å›¾ç‰‡å°±èƒ½çœ‹è§ã€‚\nç»™ canvas å…ƒç´ ç»‘å®šé¼ æ ‡æ¾å¼€äº‹ä»¶ï¼Œæ¸…é™¤ canvas èº«ä¸Šçš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶ã€‚\n\u003cdiv style=\"width: 400px;height: 200px;position: relative\"\u003e \u003ccanvas id=\"canvas\" width=\"400\" height=\"200\" style=\"border: 1px solid;position: absolute\"\u003e\u003c/canvas\u003e \u003cimg id=\"img\" src=\"./img/react.png\" style=\"width: 100%;height: 100%\"\u003e \u003c/div\u003e // è·å– canvas å…ƒç´ çš„å®½é«˜ const { width, height } = canvas // å°†æ•´ä¸ªç”»å¸ƒå¡«å……ä¸ºç°è‰² ctx.fillStyle = 'gray' ctx.fillRect(0, 0, width, height) // åªç•™ä¸‹ç›®æ ‡è¶…è¿‡æºçš„éƒ¨åˆ† ctx.globalCompositeOperation = 'destination-out' // åˆ®å¡çš„ç²—ç»†è®¾ç½®ä¸º 20px ctx.lineWidth = 20 // å°†ç»˜çº¿çš„è·¯å¾„è¿æ¥å¤„å’Œä¸¤ç«¯éƒ½è®¾ç½®ä¸ºåœ†å½¢ï¼Œè¿™æ ·æ¯”è¾ƒå¥½çœ‹ ctx.lineJoin = 'round' ctx.lineCap = 'round' // ä¸º canvas å…ƒç´ ç»‘å®šé¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ canvas.onmousedown = function(event) { // è·å–å½“å‰é¼ æ ‡åœ¨ç”»å¸ƒä¸­çš„åç§»é‡ const { offsetX, offsetY } = event // è®¾ç½®èµ·ç‚¹ ctx.moveTo(offsetX, offsetY) // ä¸º canvas å…ƒç´ ç»‘å®šé¼ æ ‡ç§»åŠ¨äº‹ä»¶ canvas.onmousemove = function(event) { // å®æ—¶è·å–é¼ æ ‡çš„åç§»é‡ const { offsetX, offsetY } = event // è®¾ç½®è·¯å¾„ç‚¹ ctx.lineTo(offsetX, offsetY) // å°†å­è·¯å¾„è¿æ¥èµ·æ¥ç»˜åˆ¶æ˜¾ç¤º ctx.stroke() } // ä¸º canvas å…ƒç´ ç»‘å®šé¼ æ ‡ç¦»å¼€äº‹ä»¶ canvas.onmouseup = () =\u003e { // æ¸…é™¤ canvas å…ƒç´ èº«ä¸Šçš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶ canvas.onmousemove = null } } canvaså°†ç”»å¸ƒå¯¼å‡ºä¸ºå›¾åƒ canvas.toDataURL(type, encoderOptions)ã€‚\né€šè¿‡ canvas èº«ä¸Šçš„ toDataURL æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«ç”»å¸ƒå†…å®¹çš„ base64 æ ¼å¼çš„ data urlã€‚\nå‚æ•°ï¼š\ntypeï¼šå›¾ç‰‡æ ¼å¼ï¼Œé»˜è®¤ä¸º image/pngã€‚ encoderOptionsï¼šåœ¨æŒ‡å®šå›¾ç‰‡æ ¼å¼ä¸º image/jpeg æˆ– image/webp çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä» 0-1 ä¹‹é—´é€‰æ‹©å›¾ç‰‡çš„è´¨é‡ã€‚å¦‚æœè¶…å‡ºå–å€¼èŒƒå›´ï¼Œå°†ä¼šä½¿ç”¨é»˜è®¤å€¼0.92ã€‚å…¶ä»–å‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ ctx.fillStyle = 'red' ctx.fillRect(50, 50, 100, 100) const dataUrl = canvas.toDataURL() // data:image/png;base64,iVBORw0KGgoAAAANSUh.... console.log(dataUrl) åœ°å€æ è¾“å…¥ data urlï¼š\ncanvasäº‹ä»¶æ“ä½œ canvas ä¸­å‡ ä¹æ²¡æœ‰æä¾›ä»»ä½•äº‹ä»¶æ“ä½œçš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ isPointInPath æ–¹æ³•ï¼Œåˆ¤æ–­å½“å‰åæ ‡æ˜¯å¦åœ¨è·¯å¾„åˆ—è¡¨ä¸­ï¼Œä»è€Œè¿›è¡Œä¸€äº›äº‹ä»¶æ“ä½œã€‚\nctx.isPointInPath(x, y)ï¼šåˆ¤æ–­åœ¨å½“å‰è·¯å¾„ä¸­æ˜¯å¦åŒ…å«æ£€æµ‹ç‚¹ (x, y)ï¼Œè¿”å› true / falseã€‚\nç‰¹åˆ«æ³¨æ„ï¼š\nctx.beginPath() ä¹‹å‰çš„è·¯å¾„æ£€æµ‹ä¸åˆ°ï¼Œå› ä¸ºå®ƒä¼šæ¸…ç©ºè·¯å¾„åˆ—è¡¨ã€‚\nfillRect å’Œ strokeRect è¿™ä¸¤ä¸ªç›´æ¥ç»˜åˆ¶çŸ©å½¢çš„æ–¹æ³•ä¸ä¼šç”Ÿæˆè·¯å¾„ï¼Œå®ƒä»¬åŒ…å«çš„åæ ‡ç‚¹ isPointInPath æ£€æŸ¥ä¸åˆ°ã€‚\n// ç»˜åˆ¶ä¸€ä¸ªè·¯å¾„çŸ©å½¢ ctx.rect(50, 50, 100, 100) ctx.fill() // ç»™ canvas ç»‘å®šç‚¹å‡»äº‹ä»¶ canvas.onclick = event =\u003e { // é¼ æ ‡ç‚¹å‡»ä½ç½®è·ç¦» canvas çš„ offsetX å’Œ offsetYï¼Œå°±ç›¸å½“äºåœ¨ canvas ä¸­çš„åæ ‡ä½ç½® const { offsetX, offsetY } = event const isInPath = ctx.isPointInPath(offsetX, offsetY) console.log(`å½“å‰ç‚¹å‡»åæ ‡ï¼š(${offsetX}, ${offsetY})`, `æ˜¯å¦åœ¨è·¯å¾„åˆ—è¡¨ä¸­ï¼š${isInPath}`) } ",
  "wordCount" : "8682",
  "inLanguage": "en",
  "datePublished": "2023-02-22T09:41:47+08:00",
  "dateModified": "2023-02-22T09:41:47+08:00",
  "author":[{
    "@type": "Person",
    "name": "XP"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sirius00.github.io/posts/tech/canvas%E7%9A%84%E4%BD%BF%E7%94%A8/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "XP's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sirius00.github.io/img/cat.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>



<script async src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>


<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sirius00.github.io/" accesskey="h" title="XP&#39;s Blog (Alt + H)">
            <img src="https://sirius00.github.io/img/cat.png" alt="logo" aria-label="logo"
                 height="35">XP&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sirius00.github.io/search" title="ğŸ” æœç´¢ (Alt &#43; /)" accesskey=/>
                <span>ğŸ” æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/" title="ğŸ  ä¸»é¡µ">
                <span>ğŸ  ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/posts" title="ğŸ“š æ–‡ç« ">
                <span>ğŸ“š æ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/tags" title="ğŸ§© æ ‡ç­¾">
                <span>ğŸ§© æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/archives/" title="â±ï¸ æ—¶é—´è½´">
                <span>â±ï¸ æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://sirius00.github.io/about" title="ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº">
                <span>ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://sirius00.github.io/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://sirius00.github.io/posts/">ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href="https://sirius00.github.io/posts/tech/">ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯</a></div>
            <h1 class="post-title">
                Canvasçš„ä½¿ç”¨
            </h1>
            <div class="post-meta">åˆ›å»º:&nbsp;<span title='2023-02-22 09:41:47 +0800 CST'>2023-02-22</span>&nbsp;|&nbsp;æ›´æ–°:&nbsp;2023-02-22&nbsp;|&nbsp;å­—æ•°:&nbsp;8682å­—&nbsp;|&nbsp;æ—¶é•¿:&nbsp;18åˆ†é’Ÿ&nbsp;|&nbsp;
ä½œè€…:&nbsp;XP



                &nbsp;|&nbsp;æ ‡ç­¾: &nbsp;
                <ul class="post-tags-meta">
                    <a href="https://sirius00.github.io/tags/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a>
                </ul>

                
                <span id="busuanzi_container_page_pv">
                &nbsp;| è®¿é—®: <span id="busuanzi_value_page_pv"></span>
            </span>

</div>
        </header> 
        <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">æ–‡ç« ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#canvas%e7%94%bb%e5%b8%83%e5%ae%bd%e5%ba%a6%e5%92%8c%e9%ab%98%e5%ba%a6" aria-label="canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦">canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦</a></li>
                <li>
                    <a href="#canvas%e7%94%bb%e7%ac%94" aria-label="canvasç”»ç¬”">canvasç”»ç¬”</a></li>
                <li>
                    <a href="#canvas%e7%bb%98%e5%88%b6%e7%9f%a9%e5%bd%a2" aria-label="canvasç»˜åˆ¶çŸ©å½¢">canvasç»˜åˆ¶çŸ©å½¢</a><ul>
                        
                <li>
                    <a href="#strokerect%e8%be%b9%e6%a1%86%e7%9f%a9%e5%bd%a2%e6%b8%b2%e6%9f%93%e9%97%ae%e9%a2%98" aria-label="strokeRectè¾¹æ¡†çŸ©å½¢æ¸²æŸ“é—®é¢˜">strokeRectè¾¹æ¡†çŸ©å½¢æ¸²æŸ“é—®é¢˜</a></li></ul>
                </li>
                <li>
                    <a href="#canvas%e6%b8%85%e9%99%a4%e5%8c%ba%e5%9f%9f" aria-label="canvasæ¸…é™¤åŒºåŸŸ">canvasæ¸…é™¤åŒºåŸŸ</a></li>
                <li>
                    <a href="#canvas%e6%a0%b7%e5%bc%8f%e5%92%8c%e9%a2%9c%e8%89%b2" aria-label="canvasæ ·å¼å’Œé¢œè‰²">canvasæ ·å¼å’Œé¢œè‰²</a></li>
                <li>
                    <a href="#canvas%e8%b7%af%e5%be%84" aria-label="canvasè·¯å¾„">canvasè·¯å¾„</a><ul>
                        
                <li>
                    <a href="#%e8%b7%af%e5%be%84%e7%bb%98%e5%88%b6%e7%9f%a9%e5%bd%a2" aria-label="è·¯å¾„ç»˜åˆ¶çŸ©å½¢">è·¯å¾„ç»˜åˆ¶çŸ©å½¢</a></li>
                <li>
                    <a href="#%e9%87%8d%e7%bd%ae%e8%b7%af%e5%be%84%e5%92%8c%e9%97%ad%e5%90%88%e8%b7%af%e5%be%84" aria-label="é‡ç½®è·¯å¾„å’Œé—­åˆè·¯å¾„">é‡ç½®è·¯å¾„å’Œé—­åˆè·¯å¾„</a></li>
                <li>
                    <a href="#%e8%b7%af%e5%be%84%e7%bb%98%e5%88%b6%e6%a0%b7%e5%bc%8f" aria-label="è·¯å¾„ç»˜åˆ¶æ ·å¼">è·¯å¾„ç»˜åˆ¶æ ·å¼</a></li></ul>
                </li>
                <li>
                    <a href="#canvas%e7%8a%b6%e6%80%81" aria-label="canvasçŠ¶æ€">canvasçŠ¶æ€</a></li>
                <li>
                    <a href="#canvas%e5%9c%86%e5%bd%a2%e5%9c%86%e5%bc%a7" aria-label="canvasåœ†å½¢/åœ†å¼§">canvasåœ†å½¢/åœ†å¼§</a></li>
                <li>
                    <a href="#canvas%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf" aria-label="canvasè´å¡å°”æ›²çº¿">canvasè´å¡å°”æ›²çº¿</a><ul>
                        
                <li>
                    <a href="#%e4%ba%8c%e6%ac%a1%e8%b4%9d%e5%a1%9e%e5%b0%94" aria-label="äºŒæ¬¡è´å¡å°”">äºŒæ¬¡è´å¡å°”</a></li>
                <li>
                    <a href="#%e4%b8%89%e6%ac%a1%e8%b4%9d%e5%a1%9e%e5%b0%94" aria-label="ä¸‰æ¬¡è´å¡å°”">ä¸‰æ¬¡è´å¡å°”</a></li></ul>
                </li>
                <li>
                    <a href="#canvas%e5%8f%98%e6%8d%a2" aria-label="canvaså˜æ¢">canvaså˜æ¢</a><ul>
                        
                <li>
                    <a href="#%e5%b9%b3%e7%a7%bb%e5%8f%98%e6%8d%a2" aria-label="å¹³ç§»å˜æ¢">å¹³ç§»å˜æ¢</a></li>
                <li>
                    <a href="#%e6%97%8b%e8%bd%ac%e5%8f%98%e6%8d%a2" aria-label="æ—‹è½¬å˜æ¢">æ—‹è½¬å˜æ¢</a></li>
                <li>
                    <a href="#%e4%bc%b8%e7%bc%a9%e5%8f%98%e6%8d%a2" aria-label="ä¼¸ç¼©å˜æ¢">ä¼¸ç¼©å˜æ¢</a><ul>
                        
                <li>
                    <a href="#%e6%96%87%e5%ad%97%e7%bf%bb%e8%bd%ac" aria-label="æ–‡å­—ç¿»è½¬">æ–‡å­—ç¿»è½¬</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#canvas%e8%83%8c%e6%99%af" aria-label="canvasèƒŒæ™¯">canvasèƒŒæ™¯</a><ul>
                        
                <li>
                    <a href="#%e5%9b%be%e7%89%87%e8%83%8c%e6%99%af" aria-label="å›¾ç‰‡èƒŒæ™¯">å›¾ç‰‡èƒŒæ™¯</a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e8%83%8c%e6%99%af" aria-label="è®¾ç½®èƒŒæ™¯">è®¾ç½®èƒŒæ™¯</a></li></ul>
                </li>
                <li>
                    <a href="#canvas%e6%b8%90%e5%8f%98" aria-label="canvasæ¸å˜">canvasæ¸å˜</a><ul>
                        
                <li>
                    <a href="#%e7%ba%bf%e6%80%a7%e6%b8%90%e5%8f%98" aria-label="çº¿æ€§æ¸å˜">çº¿æ€§æ¸å˜</a></li>
                <li>
                    <a href="#%e5%be%84%e5%90%91%e6%b8%90%e5%8f%98" aria-label="å¾„å‘æ¸å˜">å¾„å‘æ¸å˜</a></li></ul>
                </li>
                <li>
                    <a href="#canvas%e6%96%87%e6%9c%ac%e7%9b%b8%e5%85%b3" aria-label="canvasæ–‡æœ¬ç›¸å…³">canvasæ–‡æœ¬ç›¸å…³</a><ul>
                        
                <li>
                    <a href="#%e6%b8%b2%e6%9f%93%e6%96%87%e6%9c%ac" aria-label="æ¸²æŸ“æ–‡æœ¬">æ¸²æŸ“æ–‡æœ¬</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e6%a0%b7%e5%bc%8f" aria-label="æ–‡æœ¬æ ·å¼">æ–‡æœ¬æ ·å¼</a><ul>
                        
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e5%ad%97%e4%bd%93" aria-label="è®¾ç½®å­—ä½“">è®¾ç½®å­—ä½“</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e5%af%b9%e9%bd%90%e6%96%b9%e5%bc%8f" aria-label="æ–‡æœ¬å¯¹é½æ–¹å¼">æ–‡æœ¬å¯¹é½æ–¹å¼</a></li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e5%9f%ba%e7%ba%bf%e5%af%b9%e9%bd%90%e6%96%b9%e5%bc%8f" aria-label="æ–‡æœ¬åŸºçº¿å¯¹é½æ–¹å¼">æ–‡æœ¬åŸºçº¿å¯¹é½æ–¹å¼</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%96%87%e6%9c%ac%e5%9c%a8canvas%e4%b8%ad%e5%9e%82%e7%9b%b4%e5%b1%85%e4%b8%ad%e6%98%be%e7%a4%ba" aria-label="æ–‡æœ¬åœ¨canvasä¸­å‚ç›´å±…ä¸­æ˜¾ç¤º">æ–‡æœ¬åœ¨canvasä¸­å‚ç›´å±…ä¸­æ˜¾ç¤º</a></li>
                <li>
                    <a href="#%e8%8e%b7%e5%8f%96%e6%96%87%e6%9c%ac%e4%bf%a1%e6%81%af" aria-label="è·å–æ–‡æœ¬ä¿¡æ¯">è·å–æ–‡æœ¬ä¿¡æ¯</a></li></ul>
                </li>
                <li>
                    <a href="#canvas%e9%98%b4%e5%bd%b1" aria-label="canvasé˜´å½±">canvasé˜´å½±</a></li>
                <li>
                    <a href="#canvas%e5%83%8f%e7%b4%a0%e7%9b%b8%e5%85%b3" aria-label="canvasåƒç´ ç›¸å…³">canvasåƒç´ ç›¸å…³</a><ul>
                        
                <li>
                    <a href="#%e8%8e%b7%e5%8f%96%e5%8c%ba%e5%9f%9f%e5%86%85%e5%83%8f%e7%b4%a0%e4%bf%a1%e6%81%af" aria-label="è·å–åŒºåŸŸå†…åƒç´ ä¿¡æ¯">è·å–åŒºåŸŸå†…åƒç´ ä¿¡æ¯</a></li>
                <li>
                    <a href="#%e5%af%b9%e7%94%bb%e5%b8%83%e8%bf%9b%e8%a1%8c%e5%83%8f%e7%b4%a0%e6%95%b0%e6%8d%ae%e7%9a%84%e5%86%99%e5%85%a5" aria-label="å¯¹ç”»å¸ƒè¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥">å¯¹ç”»å¸ƒè¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%baimagedata%e5%af%b9%e8%b1%a1" aria-label="åˆ›å»ºimageDataå¯¹è±¡">åˆ›å»ºimageDataå¯¹è±¡</a></li>
                <li>
                    <a href="#%e5%83%8f%e7%b4%a0%e6%89%a9%e5%b1%95" aria-label="åƒç´ æ‰©å±•">åƒç´ æ‰©å±•</a><ul>
                        
                <li>
                    <a href="#%e8%8e%b7%e5%8f%96%e6%9f%90%e4%b8%aa%e5%9d%90%e6%a0%87%e7%9a%84%e5%83%8f%e7%b4%a0" aria-label="è·å–æŸä¸ªåæ ‡çš„åƒç´ ">è·å–æŸä¸ªåæ ‡çš„åƒç´ </a></li>
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae%e6%9f%90%e4%b8%aa%e5%9d%90%e6%a0%87%e7%9a%84%e5%83%8f%e7%b4%a0" aria-label="è®¾ç½®æŸä¸ªåæ ‡çš„åƒç´ ">è®¾ç½®æŸä¸ªåæ ‡çš„åƒç´ </a></li>
                <li>
                    <a href="#%e9%a9%ac%e8%b5%9b%e5%85%8b%e5%b0%8f%e7%bb%83%e4%b9%a0" aria-label="é©¬èµ›å…‹å°ç»ƒä¹ ">é©¬èµ›å…‹å°ç»ƒä¹ </a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#canvas%e9%80%8f%e6%98%8e%e5%ba%a6" aria-label="canvasé€æ˜åº¦">canvasé€æ˜åº¦</a></li>
                <li>
                    <a href="#canvas%e5%9b%be%e5%83%8f%e5%90%88%e6%88%90%e8%ae%be%e7%bd%ae" aria-label="canvaså›¾åƒåˆæˆè®¾ç½®">canvaså›¾åƒåˆæˆè®¾ç½®</a><ul>
                        
                <li>
                    <a href="#%e5%88%ae%e5%88%ae%e5%8d%a1%e5%b0%8f%e7%bb%83%e4%b9%a0" aria-label="åˆ®åˆ®å¡å°ç»ƒä¹ ">åˆ®åˆ®å¡å°ç»ƒä¹ </a></li></ul>
                </li>
                <li>
                    <a href="#canvas%e5%b0%86%e7%94%bb%e5%b8%83%e5%af%bc%e5%87%ba%e4%b8%ba%e5%9b%be%e5%83%8f" aria-label="canvaså°†ç”»å¸ƒå¯¼å‡ºä¸ºå›¾åƒ">canvaså°†ç”»å¸ƒå¯¼å‡ºä¸ºå›¾åƒ</a></li>
                <li>
                    <a href="#canvas%e4%ba%8b%e4%bb%b6%e6%93%8d%e4%bd%9c" aria-label="canvasäº‹ä»¶æ“ä½œ">canvasäº‹ä»¶æ“ä½œ</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
            const id = encodeURI(element.getAttribute('id')).toLowerCase();
            if (element === activeElement){
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
            } else {
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
            }
        })
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        
        <div class="post-content"><h2 id="canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦">canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦<a hidden class="anchor" aria-hidden="true" href="#canvasç”»å¸ƒå®½åº¦å’Œé«˜åº¦">#</a></h2>
<p><code>canvas</code>æ ‡ç­¾åªæœ‰ä¸¤ä¸ªæ ‡ç­¾å±æ€§: widthå’Œheight</p>
<p>å½“æ²¡æœ‰è®¾ç½®å®½åº¦å’Œé«˜åº¦çš„æ—¶å€™, <code>canvas</code>ä¼šåˆå§‹åŒ–ä¸ºå®½300px, é«˜150pxç”»å¸ƒ</p>
<p>ä½¿ç”¨htmlå±æ€§è®¾ç½®width, height æ—¶,åªå½±å“ç”»å¸ƒæœ¬èº«,ä¸å½±å“ç”»å¸ƒå†…å®¹</p>
<p>ä½¿ç”¨cssæ ·å¼æŒ‡å®šcanvasçš„width, heightæ—¶, ä¸ä½†å½±å“ç”»å¸ƒæœ¬èº«çš„å®½é«˜, è¿˜ä¼šä½¿ç”»å¸ƒå†…å®¹ç­‰æ¯”ä¾‹ç¼©æ”¾</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- ä¸è¦é€šè¿‡æ ·å¼æŒ‡å®šå®½é«˜ --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">canvas</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;canvas&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;400&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border: 1px solid&#34;</span>&gt;&lt;/<span style="color:#f92672">canvas</span>&gt;
</span></span></code></pre></div><h2 id="canvasç”»ç¬”">canvasç”»ç¬”<a hidden class="anchor" aria-hidden="true" href="#canvasç”»ç¬”">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">canvas</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;canvas&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒcanvas
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">getContext</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// canvasç›¸å…³çš„æ“ä½œåŸºæœ¬éƒ½åœ¨ctxä¸Šé¢è¿›è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ctx</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">getContext</span>(<span style="color:#e6db74">&#39;2d&#39;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="canvasç»˜åˆ¶çŸ©å½¢">canvasç»˜åˆ¶çŸ©å½¢<a hidden class="anchor" aria-hidden="true" href="#canvasç»˜åˆ¶çŸ©å½¢">#</a></h2>
<p>fillRect(å¡«å……çŸ©å½¢)</p>
<p>strokeRect(è¾¹æ¡†çŸ©å½¢)</p>
<p>ctx.fillRect(x, y, width, height)</p>
<p>ctx.strokeRect(x, y, width, height)</p>
<p>ä¸¤è€…å‚æ•°:</p>
<ul>
<li>x:xè½´åç§»é‡</li>
<li>y: yè½´åç§»é‡</li>
<li>width: çŸ©å½¢å®½åº¦</li>
<li>height: çŸ©å½¢é«˜åº¦</li>
</ul>
<h3 id="strokerectè¾¹æ¡†çŸ©å½¢æ¸²æŸ“é—®é¢˜">strokeRectè¾¹æ¡†çŸ©å½¢æ¸²æŸ“é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#strokerectè¾¹æ¡†çŸ©å½¢æ¸²æŸ“é—®é¢˜">#</a></h3>
<p><code>canvas</code> åœ¨æ¸²æŸ“çŸ©å½¢è¾¹æ¡†æ—¶ï¼Œè¾¹æ¡†å®½åº¦æ˜¯å¹³å‡åˆ†åœ¨åç§»ä½ç½®ä¸¤ä¾§çš„ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// è¾¹æ¡†ä¼šæ¸²æŸ“åœ¨ 49.5-50.5 ä¹‹é—´ï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šè®©ä¸€ä¸ªåƒç´ åªæ˜¾ç¤ºä¸€åŠçš„ï¼Œåªä¼šå…¨éƒ¨æ˜¾ç¤ºã€‚ç›¸å½“äºè¾¹æ¡†ä¼šæ¸²æŸ“åœ¨ 49-51 ä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯ 2px
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">strokeRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å°†åç§»é‡å¤šç§»åŠ¨ 0.5ï¼Œè¾¹æ¡†ä¼šæ¸²æŸ“åœ¨ 200-201 å’Œ 50-51 ä¹‹é—´ï¼Œä¹Ÿå°±æ˜¯1px
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">strokeRect</span>(<span style="color:#ae81ff">200.5</span>, <span style="color:#ae81ff">50.5</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h2 id="canvasæ¸…é™¤åŒºåŸŸ">canvasæ¸…é™¤åŒºåŸŸ<a hidden class="anchor" aria-hidden="true" href="#canvasæ¸…é™¤åŒºåŸŸ">#</a></h2>
<p>ctx.clearRect(x, y, width, height)ï¼šå¯ä»¥æ¸…é™¤ <code>canvas</code> ç”»å¸ƒä¸ŠæŒ‡å®šçš„åŒºåŸŸï¼Œè®©æ¸…é™¤éƒ¨åˆ†å®Œå…¨é€æ˜</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ä»¥ (100, 100) ä¸ºåç§»é‡ï¼Œæ¸…é™¤ä¸€ä¸ª 50 * 50 çš„åŒºåŸŸ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">clearRect</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span></code></pre></div><h2 id="canvasæ ·å¼å’Œé¢œè‰²">canvasæ ·å¼å’Œé¢œè‰²<a hidden class="anchor" aria-hidden="true" href="#canvasæ ·å¼å’Œé¢œè‰²">#</a></h2>
<p>ctx.fillStyleï¼šè®¾ç½®å›¾åƒçš„å¡«å……é¢œè‰²ã€‚ï¼ˆé»˜è®¤é»‘è‰²ï¼‰</p>
<p>ctx.strokeStyleï¼šè®¾ç½®å›¾åƒè½®å»“çš„é¢œè‰²ã€‚ï¼ˆé»˜è®¤é»‘è‰²ï¼‰</p>
<p>ctx.lineWidthï¼šè®¾ç½®å½“å‰ç»˜çº¿çš„ç²—ç»†ï¼Œå±æ€§å€¼å¿…é¡»ä¸ºæ­£æ•°ï¼ˆé»˜è®¤å€¼ 1ï¼Œ0ã€è´Ÿæ•°ã€Infinity å’Œ NaN ä¼šè¢«å¿½ç•¥ï¼‰ã€‚</p>
<p>ctx.lineJoinï¼šè®¾å®šçº¿æ¡ä¸çº¿æ¡é—´ç»“åˆçš„æ ·å¼ã€‚ï¼ˆé»˜è®¤miterï¼‰</p>
<ul>
<li>
<p>roundï¼šåœ†è§’ã€‚</p>
</li>
<li>
<p>bevelï¼šæ–œè§’ã€‚</p>
</li>
<li>
<p>miterï¼šç›´è§’ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// å¡«å……æ ·å¼çº¢è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;red&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è¾¹æ¡†æ ·å¼è“è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">strokeStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;blue&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ç»˜çº¿ç²—ç»† 10px
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineWidth</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ç»˜çº¿äº¤æ¥å‘ˆç°åœ†è§’
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineJoin</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;round&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">strokeRect</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div></li>
</ul>
<h2 id="canvasè·¯å¾„">canvasè·¯å¾„<a hidden class="anchor" aria-hidden="true" href="#canvasè·¯å¾„">#</a></h2>
<h3 id="è·¯å¾„ç»˜åˆ¶çŸ©å½¢">è·¯å¾„ç»˜åˆ¶çŸ©å½¢<a hidden class="anchor" aria-hidden="true" href="#è·¯å¾„ç»˜åˆ¶çŸ©å½¢">#</a></h3>
<p>ctx.stroke()ï¼šé€šè¿‡çº¿æ¡æ¥ç»˜åˆ¶å›¾åƒè½®å»“ï¼Œä¸ä¼šè‡ªåŠ¨è°ƒç”¨ closePath()ã€‚</p>
<p>ctx.fill()ï¼šé€šè¿‡å¡«å……è·¯å¾„çš„å†…å®¹åŒºåŸŸç”Ÿæˆå®å¿ƒçš„å›¾åƒï¼Œè‡ªåŠ¨è°ƒç”¨closePath()ã€‚</p>
<p>ctx.rect(x, y, width, height)ï¼šç»˜åˆ¶ä¸€ä¸ªåç§»é‡ (x, y)ï¼Œå®½ widthï¼Œé«˜ height çš„çŸ©å½¢ã€‚</p>
<ul>
<li>
<p>å½“è¯¥æ–¹æ³•æ‰§è¡Œçš„æ—¶å€™ï¼ŒmoveTo() æ–¹æ³•è‡ªåŠ¨è®¾ç½®èµ·ç‚¹åæ ‡ä¸º (x, y)ã€‚</p>
</li>
<li>
<p>è¯¥æ–¹æ³•æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œç”»å¸ƒä¸Šä¸ä¼šå‘ˆç°å›¾åƒï¼Œç›¸å½“äºåªæ˜¯å½¢æˆäº†è·¯å¾„åˆ—è¡¨ï¼Œè¦è°ƒç”¨ fill() æˆ– stroke() æ–¹æ³•æ‰ä¼šå‘ˆç°åœ¨ç”»å¸ƒä¸­</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// ç»˜åˆ¶è·¯å¾„ä¸æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">rect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å¡«å……æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fill</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">rect</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è·¯å¾„è¿æ¥æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">stroke</span>()
</span></span></code></pre></div><h3 id="é‡ç½®è·¯å¾„å’Œé—­åˆè·¯å¾„">é‡ç½®è·¯å¾„å’Œé—­åˆè·¯å¾„<a hidden class="anchor" aria-hidden="true" href="#é‡ç½®è·¯å¾„å’Œé—­åˆè·¯å¾„">#</a></h3>
<p>ctx.beginPath()ï¼šæ–°å»ºä¸€æ¡è·¯å¾„ï¼Œç”Ÿæˆä¹‹åï¼Œå›¾åƒç»˜åˆ¶å‘½ä»¤è¢«æŒ‡å‘åˆ°è·¯å¾„ä¸Šå‡†å¤‡ç”Ÿæˆè·¯å¾„ã€‚</p>
<ul>
<li>æœ¬è´¨ä¸Šï¼Œè·¯å¾„æ˜¯ç”±å¤šä¸ªå­è·¯å¾„æ„æˆï¼Œè¿™äº›å­è·¯å¾„éƒ½æ˜¯åœ¨ä¸€ä¸ªè·¯å¾„åˆ—è¡¨ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨ beginPathï¼Œè·¯å¾„åˆ—è¡¨éƒ½ä¼šæ¸…ç©ºé‡ç½®ã€‚</li>
<li>é€šå¸¸æˆ‘ä»¬åœ¨ç»˜åˆ¶å›¾åƒä¹‹å‰ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•</li>
</ul>
<p>ctx.moveTo(x, y)ï¼šå°†ç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡è½´ä¸Šã€‚ï¼ˆè®¾ç½®èµ·ç‚¹ï¼‰</p>
<p>ctx.lineTo(x, y)ï¼šç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šåæ ‡è½´ä½ç½®çš„ç›´çº¿ã€‚</p>
<p>ctx.closePath()ï¼šé—­åˆè·¯å¾„ï¼Œå›¾åƒç»˜åˆ¶å‘½ä»¤åˆé‡æ–°æŒ‡å‘åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<ul>
<li>ä½¿ç”¨ fill() ç»˜åˆ¶å›¾åƒæˆ–å›¾åƒè·¯å¾„å·²ç»é—­åˆä¸éœ€è¦ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</li>
<li>é€šå¸¸ä½¿ç”¨ stroke() ç»˜åˆ¶å›¾åƒçš„æ—¶å€™æ‰ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// è‡ªåŠ¨å¡«å……è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">beginPath</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">moveTo</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fill</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è·¯å¾„ä¸ä¼šè‡ªåŠ¨é—­åˆ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">beginPath</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">moveTo</span>(<span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">stroke</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ‰‹åŠ¨é—­åˆè·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">beginPath</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">moveTo</span>(<span style="color:#ae81ff">250</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">closePath</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">stroke</span>()
</span></span></code></pre></div><h3 id="è·¯å¾„ç»˜åˆ¶æ ·å¼">è·¯å¾„ç»˜åˆ¶æ ·å¼<a hidden class="anchor" aria-hidden="true" href="#è·¯å¾„ç»˜åˆ¶æ ·å¼">#</a></h3>
<p>ctx.lineCapï¼šç»˜åˆ¶æ¯ä¸€æ¡çº¿æ®µæœ«ç«¯çš„æ ·å¼å±æ€§ã€‚</p>
<ol>
<li>buttï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸã€‚ï¼ˆé»˜è®¤å€¼ï¼‰</li>
<li>roundï¼šçº¿æ®µæœ«ç«¯ä»¥åœ†å½¢ç»“æŸã€‚</li>
<li>squareï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªå®½åº¦å’Œçº¿æ®µç›¸åŒï¼Œé«˜åº¦æ˜¯çº¿æ®µå®½åº¦ä¸€åŠçš„çŸ©å½¢åŒºåŸŸã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// ç»˜çº¿æœ«ç«¯åœ†å½¢æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineCap</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;round&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineWidth</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">moveTo</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">stroke</span>()
</span></span></code></pre></div><h2 id="canvasçŠ¶æ€">canvasçŠ¶æ€<a hidden class="anchor" aria-hidden="true" href="#canvasçŠ¶æ€">#</a></h2>
<p>ctx.save()ï¼šå°†å½“å‰çŠ¶æ€æ”¾å…¥æ ˆä¸­ï¼Œä¿æŒ canvas å…¨éƒ¨çŠ¶æ€çš„æ–¹æ³•ã€‚</p>
<p>ä¿å­˜åˆ°æ ˆä¸­çš„ç»˜åˆ¶çŠ¶æ€ç”±ä¸‹é¢éƒ¨åˆ†ç»„æˆã€‚</p>
<ul>
<li>
<p>å½“å‰çš„å˜æ¢çŸ©é˜µã€‚</p>
</li>
<li>
<p>å½“å‰çš„å‰ªåˆ‡åŒºåŸŸã€‚</p>
</li>
<li>
<p>å½“å‰çš„è™šçº¿åˆ—è¡¨ã€‚</p>
</li>
<li>
<p>ç»˜åˆ¶å›¾åƒçš„æ ·å¼ï¼ˆstrokeStyle / fillStyle / lineWidth / lineJoin / lineCap â€¦ï¼‰ã€‚</p>
</li>
</ul>
<p>ctx.restore()ï¼šé€šè¿‡åœ¨ç»˜å›¾çŠ¶æ€æ ˆä¸­å¼¹å‡ºé¡¶ç«¯çš„çŠ¶æ€ï¼Œå°† canvas æ¢å¤åˆ°æœ€è¿‘çš„ä¿å­˜çŠ¶æ€çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ä¿å­˜çŠ¶æ€ï¼Œæ­¤æ–¹æ³•ä¸åšä»»ä½•æ”¹å˜ã€‚</p>
<p>é€šå¸¸æˆ‘ä»¬åœ¨ç»˜åˆ¶å›¾åƒè¿›è¡Œçš„æ“ä½œï¼Œéƒ½ä¼šæ”¾åœ¨ save() å’Œ restore() æ–¹æ³•ä¹‹é—´ï¼Œé¿å…å½“å‰ç»˜åˆ¶å›¾åƒè®¾ç½®çš„çŠ¶æ€ï¼Œå½±å“åˆ°åç»­å›¾åƒçš„ç»˜åˆ¶æ•ˆæœã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// ç”»å¸ƒé»˜è®¤çŠ¶æ€æ”¾å…¥æ ˆä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">save</span>()
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å½“å‰å¡«å……æ ·å¼è®¾ç½®ä¸ºçº¢è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;red&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ç»˜åˆ¶çŸ©å½¢ï¼Œæ˜¾ç¤ºæ•ˆæœä¸ºçº¢è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å¼¹å‡ºæ ˆä¸­é¡¶ç«¯çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™çº¢è‰²çš„å¡«å……æ ·å¼ä¼šè¢«å¼¹å‡ºçš„çŠ¶æ€è¦†ç›–ï¼Œå˜ä¸ºé»‘è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">restore</span>()
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ç»˜åˆ¶çŸ©å½¢ï¼Œæ˜¾ç¤ºæ•ˆæœä¸ºé»‘è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h2 id="canvasåœ†å½¢åœ†å¼§">canvasåœ†å½¢/åœ†å¼§<a hidden class="anchor" aria-hidden="true" href="#canvasåœ†å½¢åœ†å¼§">#</a></h2>
<p>ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise)ï¼šç”»ä¸€ä¸ªä»¥(x, y)åæ ‡ä¸ºåœ†å¿ƒï¼Œradius ä¸ºåŠå¾„çš„åœ†å¼§æˆ–åœ†ï¼Œä» startAngle å¼€å§‹ï¼Œåˆ° endAngle ç»“æŸã€‚</p>
<p>å‚æ•°å¦‚ä¸‹ï¼š</p>
<ol>
<li>xï¼šåœ†å¿ƒåœ¨ç”»å¸ƒ x è½´ä¸Šçš„åç§»é‡ã€‚</li>
<li>yï¼šåœ†å¿ƒåœ¨ç”»å¸ƒ y è½´ä¸Šçš„åç§»é‡ã€‚</li>
<li>radiusï¼šç»˜åˆ¶åœ†çš„åŠå¾„ã€‚</li>
<li>startAngleï¼šåœ†å¼§çš„èµ·å§‹ç‚¹ï¼Œx è½´æ–¹å‘å¼€å§‹è®¡ç®—ï¼Œå•ä½ä»¥å¼§åº¦è¡¨ç¤ºã€‚</li>
<li>endAngleï¼šåœ†å¼§çš„ç»ˆç‚¹ï¼Œå•ä½ä»¥å¼§åº¦è¡¨ç¤ºã€‚</li>
<li>anticlockwiseï¼šå¸ƒå°”å€¼ã€‚true è¡¨ç¤ºé€†æ—¶é’ˆï¼Œfalse è¡¨ç¤ºé¡ºæ—¶é’ˆã€‚ï¼ˆé»˜è®¤å€¼ï¼‰</li>
</ol>
<p>ctx.arcTo(x1, y1, x2, y2, radius)ï¼šæ ¹æ®è®¾ç½®çš„ä¸¤ä¸ªæ§åˆ¶ç‚¹å’ŒåŠå¾„ç”»ä¸€æ®µåœ†å¼§ã€‚</p>
<ol>
<li>å¿…é¡»å­˜åœ¨ä¸€ä¸ªå¼€å§‹åæ ‡ç‚¹ ctx.moveTo(x, y)ï¼Œä¸‰ç‚¹æ‰èƒ½æ„æˆåœ†å¼§ï¼ŒåŠå¾„ä¸º radius çš„åœ†å‘å¤¹è§’é‡Œé¢å¡«å……ã€‚</li>
<li>ç»˜åˆ¶çš„åœ†å¼§ä¸€å®šç»è¿‡èµ·ç‚¹ï¼Œä½†ä¸ä¸€å®šç»è¿‡ (x1, y1) å’Œ (x2, y2)ï¼Œè¿™ä¸¤ä¸ªåæ ‡åªæ˜¯ç”¨æ¥æ§åˆ¶æ–¹å‘çš„ã€‚</li>
</ol>
<h2 id="canvasè´å¡å°”æ›²çº¿">canvasè´å¡å°”æ›²çº¿<a hidden class="anchor" aria-hidden="true" href="#canvasè´å¡å°”æ›²çº¿">#</a></h2>
<h3 id="äºŒæ¬¡è´å¡å°”">äºŒæ¬¡è´å¡å°”<a hidden class="anchor" aria-hidden="true" href="#äºŒæ¬¡è´å¡å°”">#</a></h3>
<p>ctx.quadraticCurveTo(cpx, cpy, x, y)ï¼šç»˜åˆ¶äºŒæ¬¡è´å¡å°”æ›²çº¿ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ul>
<li>
<p>cpxï¼šæ§åˆ¶ç‚¹çš„ x è½´åæ ‡ã€‚</p>
</li>
<li>
<p>cpyï¼šæ§åˆ¶ç‚¹çš„ y è½´åæ ‡ã€‚</p>
</li>
<li>
<p>xï¼šç»ˆç‚¹çš„ x è½´åæ ‡ã€‚</p>
</li>
<li>
<p>yï¼šç»ˆç‚¹çš„ y è½´åæ ‡ã€‚</p>
</li>
</ul>
<p>æ³¨æ„:</p>
<ul>
<li>å¿…é¡»è¦è®¾ç½®èµ·ç‚¹ moveTo(x, y)ã€‚</li>
<li>äºŒæ¬¡è´å¡å°”æ›²çº¿ä¸€å®šç»è¿‡èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>// å°†3ä¸ªç‚¹è¿æ¥èµ·æ¥
</span></span><span style="display:flex;"><span>ctx.beginPath()
</span></span><span style="display:flex;"><span>ctx.moveTo(20, 20)
</span></span><span style="display:flex;"><span>ctx.lineTo(200, 0)
</span></span><span style="display:flex;"><span>ctx.lineTo(100, 100)
</span></span><span style="display:flex;"><span>ctx.stroke()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// è§‚å¯ŸäºŒæ¬¡è´å¡å°”æ›²çº¿åœ¨3ç‚¹ä¹‹é—´çš„ä½ç½®
</span></span><span style="display:flex;"><span>ctx.beginPath()
</span></span><span style="display:flex;"><span>ctx.moveTo(20, 20)
</span></span><span style="display:flex;"><span>ctx.quadraticCurveTo(200, 0, 100, 100, 20)
</span></span><span style="display:flex;"><span>ctx.stroke()
</span></span></code></pre></div><h3 id="ä¸‰æ¬¡è´å¡å°”">ä¸‰æ¬¡è´å¡å°”<a hidden class="anchor" aria-hidden="true" href="#ä¸‰æ¬¡è´å¡å°”">#</a></h3>
<p>ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)ï¼šç»˜åˆ¶ä¸‰æ¬¡è´å¡å°”æ›²çº¿ã€‚</p>
<p>å‚æ•°åªæ˜¯åœ¨äºŒæ¬¡è´å¡å°”çš„åŸºç¡€ä¸Šå¤šå¢åŠ äº†ä¸€ä¸ªæ§åˆ¶ç‚¹ (cp2x, cp2y)ã€‚</p>
<p>åŒæ ·è¦è®¾ç½®èµ·ç‚¹ moveTo(x, y)ï¼Œä¹Ÿä¸€å®šç»è¿‡èµ·ç‚¹å’Œç»ˆç‚¹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// å°†4ä¸ªç‚¹è¿æ¥èµ·æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">beginPath</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">moveTo</span>(<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">stroke</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è§‚å¯Ÿä¸‰æ¬¡è´å¡å°”æ›²çº¿åœ¨4ç‚¹ä¹‹é—´çš„ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">beginPath</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">moveTo</span>(<span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">bezierCurveTo</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">stroke</span>()
</span></span></code></pre></div><h2 id="canvaså˜æ¢">canvaså˜æ¢<a hidden class="anchor" aria-hidden="true" href="#canvaså˜æ¢">#</a></h2>
<h3 id="å¹³ç§»å˜æ¢">å¹³ç§»å˜æ¢<a hidden class="anchor" aria-hidden="true" href="#å¹³ç§»å˜æ¢">#</a></h3>
<p>ctx.translate(x, y)ï¼šå¯¹å½“å‰ <code>canvas</code> ç”»å¸ƒè¿›è¡Œå¹³ç§»å˜æ¢ã€‚</p>
<ol>
<li>
<p>xï¼šæ°´å¹³æ–¹å‘çš„ç§»åŠ¨è·ç¦»ã€‚</p>
</li>
<li>
<p>yï¼šå‚ç›´æ–¹å‘çš„ç§»åŠ¨è·ç¦»ã€‚</p>
<p>æ³¨æ„ï¼šåœ¨ <code>canvas</code> ä¸­ translate æ˜¯ç´¯åŠ çš„ã€‚</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// x è½´å’Œ y è½´éƒ½å¹³ç§» 50px
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">translate</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h3 id="æ—‹è½¬å˜æ¢">æ—‹è½¬å˜æ¢<a hidden class="anchor" aria-hidden="true" href="#æ—‹è½¬å˜æ¢">#</a></h3>
<p>ctx.rotate(angle)ï¼šå°†å½“å‰ <code>canvas</code> ç”»å¸ƒå¯¹ç…§åŸç‚¹é¡ºæ—¶é’ˆæ—‹è½¬ã€‚</p>
<ol>
<li>
<p>angleï¼šé¡ºæ—¶é’ˆæ—‹è½¬çš„å¼§åº¦(degree * Math.PI / 180),  æ—‹è½¬çš„ä¸­å¿ƒå§‹ç»ˆæ˜¯ <code>canvas</code> çš„åŸç‚¹ (0, 0)ï¼Œx è½´é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œå¦‚æœè¦æ”¹å˜ä¸­å¿ƒç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ translate() æ–¹æ³•ç§»åŠ¨ <code>canvas</code></p>
<p>æ³¨æ„ï¼šåœ¨ <code>canvas</code> ä¸­ rotate æ˜¯ç´¯åŠ çš„</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">translate</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// é¡ºæ—¶é’ˆæ—‹è½¬ 45 åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">rotate</span>(<span style="color:#ae81ff">45</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">PI</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">180</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h3 id="ä¼¸ç¼©å˜æ¢">ä¼¸ç¼©å˜æ¢<a hidden class="anchor" aria-hidden="true" href="#ä¼¸ç¼©å˜æ¢">#</a></h3>
<p>ctx.scale(x, y)ï¼šå°†å½“å‰ <code>canvas</code> ç”»å¸ƒçš„ x è½´å’Œ y è½´è¿›è¡Œä¼¸ç¼©å˜æ¢ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ol>
<li>xï¼šæ°´å¹³æ–¹å‘çš„ç¼©æ”¾å› å­ã€‚</li>
<li>yï¼šå‚ç›´æ–¹å‘çš„ç¼©æ”¾å› å­ã€‚</li>
</ol>
<p>æ³¨æ„:</p>
<ul>
<li>åœ¨ <code>canvas</code> ä¸­ scale æ˜¯ç´¯åŠ çš„ã€‚</li>
<li>ç¼©æ”¾å› å­ä¸º 1 æ—¶å¤§å°ä¸å˜ï¼Œå€¼ä¸ºè´Ÿæ•°æŒ‰ç…§ x è½´æˆ– y è½´è¿›è¡Œç¿»è½¬ï¼ˆç¿»è½¬ä¸Šä¸‹æ–‡ï¼‰</li>
</ul>
<blockquote>
<p>é»˜è®¤çš„ï¼Œåœ¨ <code>canvas</code> ä¸­ä¸€ä¸ªå•ä½å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåƒç´ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°† 0.5 ä½œä¸ºç¼©æ”¾å› å­ï¼Œæœ€ç»ˆçš„å•ä½ä¼šå˜æˆ 0.5 åƒç´ ï¼Œå¹¶ä¸”å½¢çŠ¶çš„å°ºå¯¸ä¼šå˜æˆåŸæ¥çš„ä¸€åŠã€‚ç›¸ä¼¼çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°† 2.0 ä½œä¸ºç¼©æ”¾å› å­ï¼Œå°†ä¼šå¢å¤§å•ä½å°ºå¯¸å˜æˆä¸¤ä¸ªåƒç´ ã€‚å½¢çŠ¶çš„å°ºå¯¸å°†ä¼šå˜æˆåŸæ¥çš„ä¸¤å€ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">translate</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// x è½´æ”¾å¤§ 2 å€ï¼Œy è½´ä¸å˜
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">scale</span>(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h4 id="æ–‡å­—ç¿»è½¬">æ–‡å­—ç¿»è½¬<a hidden class="anchor" aria-hidden="true" href="#æ–‡å­—ç¿»è½¬">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// x è½´æ”¾å¤§ 2 å€ï¼Œå¹¶ç¿»è½¬ï¼Œy è½´ä¸å˜
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">scale</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">font</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;48px serif&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillText</span>(<span style="color:#e6db74">&#39;canvas&#39;</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h2 id="canvasèƒŒæ™¯">canvasèƒŒæ™¯<a hidden class="anchor" aria-hidden="true" href="#canvasèƒŒæ™¯">#</a></h2>
<h3 id="å›¾ç‰‡èƒŒæ™¯">å›¾ç‰‡èƒŒæ™¯<a hidden class="anchor" aria-hidden="true" href="#å›¾ç‰‡èƒŒæ™¯">#</a></h3>
<p>ctx.drawImage(img, sx, sy, swidth, sheight, x, y, width, height)ï¼šåœ¨ç”»å¸ƒä¸Šç»˜åˆ¶å›¾ç‰‡ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ol>
<li>imgï¼šå›¾åƒæºå¯¹è±¡ï¼ˆè§„å®šä½¿ç”¨çš„å›¾åƒã€ç”»å¸ƒæˆ–è§†é¢‘ç­‰ï¼‰ã€‚</li>
<li>sxï¼šå¯é€‰ï¼Œå¼€å§‹å‰ªåˆ‡çš„xåæ ‡ä½ç½®ã€‚</li>
<li>syï¼šå¯é€‰ï¼Œå¼€å§‹å‰ªåˆ‡çš„yåæ ‡ä½ç½®ã€‚</li>
<li>swidthï¼šå¯é€‰ï¼Œè¢«å‰ªåˆ‡å›¾åƒçš„å®½åº¦ã€‚</li>
<li>sheightï¼šå¯é€‰ï¼Œè¢«å‰ªåˆ‡å›¾åƒçš„é«˜åº¦ã€‚</li>
<li>xï¼šåœ¨ç”»å¸ƒä¸Šæ”¾ç½®å›¾åƒçš„xåæ ‡ä½ç½®ã€‚</li>
<li>yï¼šåœ¨ç”»å¸ƒä¸Šæ”¾ç½®å›¾åƒçš„yåæ ‡ä½ç½®ã€‚</li>
<li>widthï¼šå¯é€‰ï¼Œè¦ä½¿ç”¨çš„å›¾åƒçš„å®½åº¦ï¼ˆä¼¸å±•æˆ–ç¼©å°å›¾åƒï¼‰ã€‚</li>
<li>heightï¼šå¯é€‰ï¼Œè¦ä½¿ç”¨çš„å›¾åƒçš„é«˜åº¦ï¼ˆä¼¸å±•æˆ–ç¼©å°å›¾åƒï¼‰ã€‚</li>
</ol>
<p>æ³¨æ„: å¿…é¡»è¦ç­‰å›¾ç‰‡åŠ è½½å®Œæ‰èƒ½æ“ä½œï¼Œå‚æ•°å¿…é¡»å¦‚ä¸‹ 3 ç§æ–¹å¼(3, 5, 9)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">img</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;img&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./img/react.png&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">canvas</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;canvas&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;400&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border: 1px solid&#34;</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/canvas&gt;</span>
</span></span></code></pre></div><p>ctx.drawImage(img, x, y)ï¼šåœ¨ç”»å¸ƒä¸Šå®šä½å›¾åƒã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">img</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Image</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;./img/react.png&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// å°†å›¾ç‰‡ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Š
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">drawImage</span>(<span style="color:#a6e22e">img</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ctx.drawImage(img, x, y, width, height)ï¼šåœ¨ç”»å¸ƒä¸Šå®šä½å›¾åƒï¼Œå¹¶è§„å®šå›¾åƒçš„å®½åº¦å’Œé«˜åº¦ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">drawImage</span>(<span style="color:#a6e22e">img</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><p>ctx.drawImage(img, sx, sy, swidth, sheight, x, y, width, height)ï¼šå‰ªåˆ‡å›¾åƒï¼Œå¹¶åœ¨ç”»å¸ƒä¸Šå®šä½è¢«å‰ªåˆ‡çš„éƒ¨åˆ†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">drawImage</span>(<span style="color:#a6e22e">img</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h3 id="è®¾ç½®èƒŒæ™¯">è®¾ç½®èƒŒæ™¯<a hidden class="anchor" aria-hidden="true" href="#è®¾ç½®èƒŒæ™¯">#</a></h3>
<p>ctx.createPattern(image, repetition)ï¼šåˆ›å»ºä¸€ä¸ªç”¨äºå›¾åƒç»˜åˆ¶ä½¿ç”¨çš„æ ·å¼ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ol>
<li>imageï¼šå›¾åƒæºå¯¹è±¡ï¼ˆè§„å®šä½¿ç”¨çš„å›¾åƒã€ç”»å¸ƒæˆ–è§†é¢‘ç­‰ï¼‰ã€‚</li>
<li>repetitionï¼šé‡å¤å›¾åƒçš„æ–¹å¼ï¼Œå€¼åªèƒ½æ˜¯ repeat | repeat-x | repeat-y | no-repeatã€‚</li>
</ol>
<blockquote>
<p>repetition å¦‚æœä¸ºç©ºå­—ç¬¦ä¸² (â€™â€™) æˆ– null (ä½†ä¸æ˜¯ undefined )ï¼Œrepetitionå°†è¢«å½“ä½œ repeat</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// åˆ›å»ºèƒŒæ™¯æ ·å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">pat</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">createPattern</span>(<span style="color:#a6e22e">img</span>, <span style="color:#e6db74">&#39;repeat&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pat</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h2 id="canvasæ¸å˜">canvasæ¸å˜<a hidden class="anchor" aria-hidden="true" href="#canvasæ¸å˜">#</a></h2>
<h3 id="çº¿æ€§æ¸å˜">çº¿æ€§æ¸å˜<a hidden class="anchor" aria-hidden="true" href="#çº¿æ€§æ¸å˜">#</a></h3>
<p>ctx.createLinearGradient(x1, y1, x2, y2)ï¼šä» (x1, y1) åˆ° (x2, y2) è¿›è¡Œæ¸å˜ã€‚</p>
<p>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª CanvasGradient å¯¹è±¡ã€‚</p>
<p>ä½¿ç”¨ CanvasGradient èº«ä¸Šçš„ addColorStop(position, color) è®¾ç½®æ¸å˜é¢œè‰²ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ol>
<li>positionï¼šä»‹äº 0-1 ä¹‹é—´çš„å€¼ï¼Œè¡¨ç¤ºæ¸å˜ä¸­å¼€å§‹ä¸ç»“æŸä¹‹é—´çš„ä½ç½®ã€‚</li>
<li>colorï¼šåœ¨positionä½ç½®æ˜¾ç¤ºçš„cssé¢œè‰²å€¼</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// ä» (0, 0) åæ ‡ç‚¹åˆ° (300, 0) åæ ‡ç‚¹è¿›è¡Œæ¸å˜
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">line</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">createLinearGradient</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ¸å˜é¡ºåº çº¢ --&gt; è“ --&gt; ç»¿
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">line</span>.<span style="color:#a6e22e">addColorStop</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;red&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line</span>.<span style="color:#a6e22e">addColorStop</span>(.<span style="color:#ae81ff">5</span>, <span style="color:#e6db74">&#39;blue&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">line</span>.<span style="color:#a6e22e">addColorStop</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;green&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å›¾åƒå¡«å……é¢œè‰²è®¾ç½®ä¸ºæ¸å˜è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">line</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">300</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h3 id="å¾„å‘æ¸å˜">å¾„å‘æ¸å˜<a hidden class="anchor" aria-hidden="true" href="#å¾„å‘æ¸å˜">#</a></h3>
<p>ctx.createRadialGradient(x1, y1, r1, x2, y2, r2)ï¼šä» (x1, y1) ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º r1 çš„åœ†ï¼Œå‘ (x2, y2) ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º r2 çš„åœ†è¿›è¡Œå¾„å‘æ¸å˜ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•è·Ÿä¸Šè¿°çš„ createLinearGradient ä¸€æ ·ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// ä»¥ (200, 100) ä¸ºåœ†å¿ƒ 50 ä¸ºåŠå¾„ï¼Œå‘ 100 ä¸ºåŠå¾„çš„åœ†æ¸å˜
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">grad</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">createRadialGradient</span>(<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ¸å˜é¡ºåº çº¢ --&gt; è“ --&gt; ç»¿
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">grad</span>.<span style="color:#a6e22e">addColorStop</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;red&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">grad</span>.<span style="color:#a6e22e">addColorStop</span>(.<span style="color:#ae81ff">5</span>, <span style="color:#e6db74">&#39;blue&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">grad</span>.<span style="color:#a6e22e">addColorStop</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;green&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å›¾åƒå¡«å……é¢œè‰²è®¾ç½®ä¸ºæ¸å˜è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">grad</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">400</span>, <span style="color:#ae81ff">200</span>)
</span></span></code></pre></div><h2 id="canvasæ–‡æœ¬ç›¸å…³">canvasæ–‡æœ¬ç›¸å…³<a hidden class="anchor" aria-hidden="true" href="#canvasæ–‡æœ¬ç›¸å…³">#</a></h2>
<p>æ–‡æœ¬ç›¸å¯¹äºç”»å¸ƒçš„åç§»é‡ï¼Œéƒ½æ˜¯å‚ç…§æ–‡æœ¬çš„åŸºçº¿è¿›è¡Œåç§»çš„ã€‚</p>
<h3 id="æ¸²æŸ“æ–‡æœ¬">æ¸²æŸ“æ–‡æœ¬<a hidden class="anchor" aria-hidden="true" href="#æ¸²æŸ“æ–‡æœ¬">#</a></h3>
<p>canvas ä¸­æä¾›äº†ä¸¤ç§æ–¹æ³•æ¸²æŸ“æ–‡æœ¬ï¼Œå¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>ctx.fillText(text, x, y, [maxWidth])ï¼šåœ¨ (x, y) å¡«å……æŒ‡å®šçš„æ–‡æœ¬ (text)ã€‚</p>
</li>
<li>
<p>ctx.strokeText(text, x, y, [maxWidth])ï¼šåœ¨ (x, y) ç»˜åˆ¶æ–‡æœ¬è¾¹æ¡† (text)ã€‚</p>
</li>
</ul>
<p>å‚æ•°ï¼š</p>
<ol>
<li>textï¼šæ–‡æœ¬å†…å®¹ã€‚</li>
<li>x, yï¼šåç§»é‡ã€‚</li>
<li>maxWidthï¼šå­—ä½“ç»˜åˆ¶çš„æœ€å¤§å®½åº¦ï¼Œç»˜åˆ¶å­—ä½“å®½åº¦è¶…å‡ºæœ€å¤§å®½åº¦ä¼šæ°´å¹³è‡ªé€‚åº”</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// è¾¹æ¡†æ–‡æœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">strokeText</span>(<span style="color:#e6db74">&#39;å¤©å¤©å¥½å¿ƒæƒ…&#39;</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å¡«å……æ–‡æœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillText</span>(<span style="color:#e6db74">&#39;å¤©å¤©å¥½å¿ƒæƒ…&#39;</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å¡«å……æ–‡æœ¬ç°åœ¨å®½åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillText</span>(<span style="color:#e6db74">&#39;å¤©å¤©å¥½å¿ƒæƒ…&#39;</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">30</span>)
</span></span></code></pre></div><h3 id="æ–‡æœ¬æ ·å¼">æ–‡æœ¬æ ·å¼<a hidden class="anchor" aria-hidden="true" href="#æ–‡æœ¬æ ·å¼">#</a></h3>
<h4 id="è®¾ç½®å­—ä½“">è®¾ç½®å­—ä½“<a hidden class="anchor" aria-hidden="true" href="#è®¾ç½®å­—ä½“">#</a></h4>
<p>ctx.fontï¼šfont å±æ€§æŒ‡å®šæ—¶ï¼Œå¿…é¡»è¦æœ‰å¤§å°å’Œå­—ä½“ï¼Œç¼ºä¸€ä¸å¯ã€‚</p>
<p>é»˜è®¤å­—ä½“ 10px sans-serifã€‚</p>
<h4 id="æ–‡æœ¬å¯¹é½æ–¹å¼">æ–‡æœ¬å¯¹é½æ–¹å¼<a hidden class="anchor" aria-hidden="true" href="#æ–‡æœ¬å¯¹é½æ–¹å¼">#</a></h4>
<p>ctx.textAlignï¼šè®¾ç½®æ–‡æœ¬çš„å¯¹é½æ–¹å¼ï¼Œå€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>startï¼šæ–‡æœ¬å¯¹é½ç•Œçº¿å¼€å§‹çš„åœ°æ–¹ã€‚ï¼ˆé»˜è®¤å€¼ï¼‰</li>
<li>endï¼šæ–‡æœ¬å¯¹é½ç•Œçº¿ç»“æŸçš„åœ°æ–¹ã€‚</li>
<li>leftï¼šæ–‡æœ¬å·¦å¯¹é½ã€‚</li>
<li>rightï¼šæ–‡æœ¬å³å¯¹é½ã€‚</li>
<li>centerï¼šæ–‡æœ¬å±…ä¸­å¯¹é½ã€‚</li>
</ul>
<blockquote>
<p>è¿™é‡Œçš„ textAlign = â€˜centerâ€™ æ¯”è¾ƒç‰¹æ®Šã€‚textAlign çš„å€¼ä¸º center æ—¶å€™æ–‡æœ¬çš„å±…ä¸­æ˜¯åŸºäºä½ åœ¨ (fillText / strokeText) çš„æ—¶å€™æ‰€ç»™çš„xçš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´æ–‡æœ¬ä¸€åŠåœ¨ x çš„å·¦è¾¹ï¼Œä¸€åŠåœ¨ x çš„å³è¾¹ï¼ˆå¯ä»¥ç†è§£ä¸ºè®¡ç®— x çš„ä½ç½®æ—¶ä»é»˜è®¤æ–‡å­—çš„å·¦ç«¯ï¼Œæ”¹ä¸ºæ–‡å­—çš„ä¸­å¿ƒï¼Œå› æ­¤ä½ åªéœ€è¦è€ƒè™‘ x çš„ä½ç½®å³å¯ï¼‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³è®©æ–‡æœ¬åœ¨æ•´ä¸ª canvas å±…ä¸­ï¼Œå°±éœ€è¦å°† (fillText / strokeText) çš„xå€¼è®¾ç½®æˆ canvas çš„å®½åº¦çš„ä¸€åŠã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">font</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;30px sans-serif&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ–‡æœ¬å±…ä¸­å¯¹é½
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">textAlign</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;center&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">strokeText</span>(<span style="color:#e6db74">&#39;å¤©å¤©å¥½å¿ƒæƒ…&#39;</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span></code></pre></div><h4 id="æ–‡æœ¬åŸºçº¿å¯¹é½æ–¹å¼">æ–‡æœ¬åŸºçº¿å¯¹é½æ–¹å¼<a hidden class="anchor" aria-hidden="true" href="#æ–‡æœ¬åŸºçº¿å¯¹é½æ–¹å¼">#</a></h4>
<p>æ–‡æœ¬ç›¸å¯¹äºç”»å¸ƒçš„åç§»é‡ï¼Œéƒ½æ˜¯å‚ç…§æ–‡æœ¬çš„åŸºçº¿è¿›è¡Œåç§»çš„ï¼Œè®¾ç½®åŸºçº¿åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®ï¼Œå¯ä»¥è°ƒæ•´æ–‡æœ¬åœ¨ canvas ç”»å¸ƒä¸­çš„ä½ç½®ã€‚</p>
<p>ctx.textBaselineï¼šæç»˜ç»˜åˆ¶æ–‡æœ¬æ—¶ï¼Œå½“å‰æ–‡æœ¬åŸºçº¿çš„å±æ€§ï¼Œå€¼å¦‚ä¸‹ï¼š</p>
<p>alphabeticï¼šæ–‡æœ¬åŸºçº¿æ˜¯æ ‡å‡†çš„å­—æ¯åŸºçº¿ã€‚ï¼ˆé»˜è®¤å€¼ï¼‰</p>
<p>topï¼šæ–‡æœ¬åŸºçº¿åœ¨æ–‡æœ¬å—çš„é¡¶éƒ¨ã€‚</p>
<p>middle: æ–‡æœ¬åŸºçº¿åœ¨æ–‡æœ¬å—çš„ä¸­é—´ã€‚</p>
<p>bottomï¼šæ–‡æœ¬åŸºçº¿åœ¨æ–‡æœ¬å—çš„åº•éƒ¨ã€‚</p>
<p>hangingï¼šæ–‡æœ¬åŸºçº¿æ˜¯æ‚¬æŒ‚åŸºçº¿ã€‚</p>
<p>ideographicï¼šæ–‡æœ¬åŸºçº¿æ˜¯è¡¨æ„å­—åŸºçº¿ã€‚</p>
<blockquote>
<p>å¦‚æœå­—ç¬¦æœ¬èº«è¶…å‡ºäº† alphabetic åŸºçº¿ï¼Œé‚£ä¹ˆ ideographic åŸºçº¿ä½ç½®åœ¨å­—ç¬¦æœ¬èº«çš„åº•éƒ¨</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">font</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;30px sans-serif&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">textAlign</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;center&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// åŸºçº¿è®¾ç½®åœ¨æ–‡æœ¬çš„é¡¶éƒ¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">textBaseline</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;top&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">strokeText</span>(<span style="color:#e6db74">&#39;å¤©å¤©å¥½å¿ƒæƒ…&#39;</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span></code></pre></div><h3 id="æ–‡æœ¬åœ¨canvasä¸­å‚ç›´å±…ä¸­æ˜¾ç¤º">æ–‡æœ¬åœ¨canvasä¸­å‚ç›´å±…ä¸­æ˜¾ç¤º<a hidden class="anchor" aria-hidden="true" href="#æ–‡æœ¬åœ¨canvasä¸­å‚ç›´å±…ä¸­æ˜¾ç¤º">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">font</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;30px sans-serif&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// x è½´åç§»ç”»å¸ƒä¸€åŠï¼Œæ°´å¹³æŒ‰æ–‡æœ¬ä¸­é—´å¯¹é½
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">textAlign</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;center&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// y è½´åç§»ç”»å¸ƒä¸€åŠï¼ŒåŸºçº¿è®¾ç½®åœ¨æ–‡æœ¬çš„ä¸­å¿ƒä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">textBaseline</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;middle&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillText</span>(<span style="color:#e6db74">&#39;å¤©å¤©å¥½å¿ƒæƒ…&#39;</span>, <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><h3 id="è·å–æ–‡æœ¬ä¿¡æ¯">è·å–æ–‡æœ¬ä¿¡æ¯<a hidden class="anchor" aria-hidden="true" href="#è·å–æ–‡æœ¬ä¿¡æ¯">#</a></h3>
<p>ctx.measureText(text)ï¼šè¿”å›ä¸€ä¸ª TextMetrics å¯¹è±¡ï¼ŒåŒ…å«å…³äºæ–‡æœ¬å°ºå¯¸çš„ä¿¡æ¯ï¼ˆä¸€èˆ¬éƒ½ç”¨æ¥è·å–æ–‡æœ¬çš„å®½åº¦ï¼‰ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ol>
<li>textï¼šæ–‡æœ¬å†…å®¹ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">font</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;100px serif&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è¿”å›å½“å‰æ–‡æœ¬çš„ç›¸å…³ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">textInfo</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">measureText</span>(<span style="color:#e6db74">&#39;å¤©å¤©å¥½å¿ƒæƒ…&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">textInfo</span>)
</span></span></code></pre></div><h2 id="canvasé˜´å½±">canvasé˜´å½±<a hidden class="anchor" aria-hidden="true" href="#canvasé˜´å½±">#</a></h2>
<p>è®¾ç½® canvas å›¾åƒæˆ–æ–‡å­—é˜´å½±éœ€è¦å¦‚ä¸‹å±æ€§ï¼š</p>
<ol>
<li>ctx.shadowOffsetXï¼šå›¾åƒ x è½´å»¶ä¼¸è·ç¦»ã€‚ï¼ˆé»˜è®¤å€¼ 0ï¼‰</li>
<li>ctx.shadowOffsetYï¼šå›¾åƒ y è½´å»¶ä¼¸è·ç¦»ã€‚ï¼ˆé»˜è®¤å€¼ 0ï¼‰</li>
<li>ctx.shadowBlurï¼šç”¨æ¥è®¾å®šé˜´å½±çš„æ¨¡ç³Šç¨‹åº¦ï¼Œå…¶æ•°å€¼å¹¶ä¸è·Ÿåƒç´ æ•°é‡æŒ‚é’©ï¼Œä¹Ÿä¸å—å˜æ¢çŸ©é˜µçš„å½±å“ã€‚ï¼ˆé»˜è®¤å€¼ 0ï¼‰</li>
<li>ctx.shadowColorï¼šå¿…é¡»æ˜¯æ ‡å‡†çš„CSSé¢œè‰²å€¼ï¼Œç”¨äºè®¾å®šé˜´å½±é¢œè‰²æ•ˆæœã€‚ï¼ˆé»˜è®¤æ˜¯å…¨é€æ˜çš„é»‘è‰²ï¼‰</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// å›¾åƒé˜´å½±å‘å·¦ç§»åŠ¨ 10px
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">shadowOffsetX</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å›¾åƒé˜´å½±å‘ä¸‹ç§»åŠ¨ 10px
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">shadowOffsetY</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ¨¡ç³Šç¨‹åº¦ä¸º 10
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">shadowBlur</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// é˜´å½±é¢œè‰²ä¸ºçº¢è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">shadowColor</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;red&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h2 id="canvasåƒç´ ç›¸å…³">canvasåƒç´ ç›¸å…³<a hidden class="anchor" aria-hidden="true" href="#canvasåƒç´ ç›¸å…³">#</a></h2>
<h3 id="è·å–åŒºåŸŸå†…åƒç´ ä¿¡æ¯">è·å–åŒºåŸŸå†…åƒç´ ä¿¡æ¯<a hidden class="anchor" aria-hidden="true" href="#è·å–åŒºåŸŸå†…åƒç´ ä¿¡æ¯">#</a></h3>
<p>ctx.getImageData(x, y, width, height)ï¼šè¿”å›ä¸€ä¸ª ImageData å¯¹è±¡ï¼Œç”¨æ¥æè¿° canvas åŒºåŸŸéšå«çš„åƒç´ æ•°æ®ï¼Œè¿™ä¸ªåŒºåŸŸé€šè¿‡çŸ©å½¢è¡¨ç¤ºï¼Œèµ·å§‹ç‚¹æ˜¯ (x, y)ï¼Œå®½ä¸º widthï¼Œé«˜ä¸º heightã€‚</p>
<p>imageData å¯¹è±¡ä¸­å­˜å‚¨ç€ canvas å¯¹è±¡çœŸå®çš„åƒç´ æ•°æ®ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåªè¯»å±æ€§ï¼š</p>
<ul>
<li>
<p>widthï¼šå›¾ç‰‡çš„å®½åº¦ï¼Œå•ä½æ˜¯åƒç´ ã€‚</p>
</li>
<li>
<p>heightï¼šå›¾ç‰‡çš„é«˜åº¦ï¼Œå•ä½æ˜¯åƒç´ ã€‚</p>
</li>
<li>
<p>dataï¼šUint8ClampedArray ç±»å‹çš„ä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«ç€ RGBA æ ¼å¼çš„æ•´å‹æ•°ç»„ï¼ŒèŒƒå›´åœ¨ 0-255 ä¹‹é—´ (åŒ…æ‹¬255)ã€‚æŒ‰å›¾åƒä»å·¦åˆ°å³ï¼Œä»ä¸‹åˆ°ä¸‹è®°å½•åƒç´ çš„</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">img</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Image</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;./img/react.png&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">drawImage</span>(<span style="color:#a6e22e">img</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// è·å–ç»˜åˆ¶å›¾åƒåŒºåŸŸå†…çš„ç›¸å…³ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">getImageData</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">imgData</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å›¾åƒçš„é•¿å’Œå®½éƒ½æ˜¯ 100ï¼Œæ‰€ä»¥ä¸€å…±æœ‰ 10000 ä¸ªåƒç´ ç‚¹ (100 * 100)ï¼Œå› ä¸ºä¸€ä¸ªåƒç´ ç‚¹å¯¹åº”ä¸€ä¸ª RGBA å€¼ï¼Œä¸€ä¸ª RGBA å€¼ç”± 4 ä¸ªæ•°å€¼æ„æˆï¼Œæ‰€ä»¥ data æ•°ç»„çš„é•¿åº¦ä¸º 40000ã€‚</p>
<p>è¯¥æ•°ç»„æ¯ 4 ä¸ªå€¼æ„æˆä¸€ä¸ªåƒç´ ç‚¹ã€‚</p>
<h3 id="å¯¹ç”»å¸ƒè¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥">å¯¹ç”»å¸ƒè¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥<a hidden class="anchor" aria-hidden="true" href="#å¯¹ç”»å¸ƒè¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥">#</a></h3>
<p>ctx.putImageData(imagedata, dx, dy)</p>
<p>ctx.putImageData(imagedata, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight)</p>
<blockquote>
<p>å°†æ•°æ®ä»å·²æœ‰çš„ ImageData å¯¹è±¡ç»˜åˆ¶åˆ°ä½å›¾çš„æ–¹æ³•ã€‚ å¦‚æœæä¾›äº†ä¸€ä¸ªç»˜åˆ¶è¿‡çš„çŸ©å½¢ï¼Œåˆ™åªç»˜åˆ¶è¯¥çŸ©å½¢çš„åƒç´ ã€‚æ­¤æ–¹æ³•ä¸å—ç”»å¸ƒè½¬æ¢çŸ©é˜µçš„å½±å“</p>
</blockquote>
<p>å‚æ•°:</p>
<ol>
<li>imagedataï¼šåŒ…å«åƒç´ å€¼çš„æ•°ç»„å¯¹è±¡ã€‚</li>
<li>dxï¼šæºå›¾åƒæ•°æ®åœ¨ç›®æ ‡ç”»å¸ƒä¸­çš„ä½ç½®åç§»é‡ï¼ˆx è½´æ–¹å‘çš„åç§»é‡ï¼‰ã€‚</li>
<li>dyï¼šæºå›¾åƒæ•°æ®åœ¨ç›®æ ‡ç”»å¸ƒä¸­çš„ä½ç½®åç§»é‡ï¼ˆy è½´æ–¹å‘çš„åç§»é‡ï¼‰ã€‚</li>
<li>dirtyXï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’çš„ä½ç½®ã€‚é»˜è®¤æ˜¯æ•´ä¸ªå›¾åƒæ•°æ®çš„å·¦ä¸Šè§’ï¼ˆx åæ ‡ï¼‰ã€‚</li>
<li>dirtyYï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸå·¦ä¸Šè§’çš„ä½ç½®ã€‚é»˜è®¤æ˜¯æ•´ä¸ªå›¾åƒæ•°æ®çš„å·¦ä¸Šè§’ï¼ˆy åæ ‡ï¼‰ã€‚</li>
<li>dirtyWidthï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸçš„å®½åº¦ã€‚é»˜è®¤æ˜¯å›¾åƒæ•°æ®çš„å®½åº¦ã€‚</li>
<li>dirtyHeightï¼šå¯é€‰ï¼Œåœ¨æºå›¾åƒæ•°æ®ä¸­ï¼ŒçŸ©å½¢åŒºåŸŸçš„é«˜åº¦ã€‚é»˜è®¤æ˜¯å›¾åƒæ•°æ®çš„é«˜åº¦ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">img</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Image</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;./img/react.png&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">drawImage</span>(<span style="color:#a6e22e">img</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">getImageData</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// å°† ImageData å¯¹è±¡é‡æ–°å†™å…¥åˆ°ç”»å¸ƒä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">putImageData</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="åˆ›å»ºimagedataå¯¹è±¡">åˆ›å»ºimageDataå¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#åˆ›å»ºimagedataå¯¹è±¡">#</a></h3>
<p>ctx.createImageData(width, height)</p>
<p>ctx.createImageData(imagedata)</p>
<blockquote>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ã€ç©ºçš„ã€æŒ‡å®šå¤§å°çš„imageData å¯¹è±¡ï¼Œæ‰€æœ‰åƒç´ åœ¨æ–°å¯¹è±¡ä¸­éƒ½æ˜¯é€æ˜çš„ã€‚ï¼ˆdata æ•°ç»„ä¸­çš„å€¼éƒ½æ˜¯ 0ï¼‰</p>
</blockquote>
<p>å‚æ•°:</p>
<ol>
<li>widthï¼šimageData æ–°å¯¹è±¡çš„å®½åº¦ã€‚</li>
<li>heightï¼šimageData æ–°å¯¹è±¡çš„é«˜åº¦ã€‚</li>
<li>imagedataï¼šä»ç°æœ‰çš„ ImageData å¯¹è±¡ä¸­ï¼Œå¤åˆ¶ä¸€ä¸ªå’Œå…¶å®½åº¦å’Œé«˜åº¦ç›¸åŒçš„å¯¹è±¡ã€‚å›¾åƒè‡ªèº«ä¸å…è®¸è¢«å¤åˆ¶ã€‚ï¼ˆdata æ•°ç»„ä¸­çš„å€¼éƒ½æ˜¯ 0ï¼‰</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">img</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Image</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;./img/react.png&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">drawImage</span>(<span style="color:#a6e22e">img</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">getImageData</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// æ ¹æ®è€çš„ ImageData å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ ImageData å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgDataByData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">createImageData</span>(<span style="color:#a6e22e">imgData</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;imgDtaåˆ›å»º&#39;</span>, <span style="color:#a6e22e">imgDataByData</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// æ ¹æ®æŒ‡å®šçš„å®½é«˜ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ ImageData å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgDataByRect</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">createImageData</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;å®½é«˜åˆ›å»º&#39;</span>, <span style="color:#a6e22e">imgDataByRect</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="åƒç´ æ‰©å±•">åƒç´ æ‰©å±•<a hidden class="anchor" aria-hidden="true" href="#åƒç´ æ‰©å±•">#</a></h3>
<h4 id="è·å–æŸä¸ªåæ ‡çš„åƒç´ ">è·å–æŸä¸ªåæ ‡çš„åƒç´ <a hidden class="anchor" aria-hidden="true" href="#è·å–æŸä¸ªåæ ‡çš„åƒç´ ">#</a></h4>
<p>é€šè¿‡ getImageData æ–¹æ³•æˆ‘ä»¬å¯ä»¥è·å–åˆ°æ•´ä¸ª canvas ç”»å¸ƒçš„åƒç´ ä¿¡æ¯ã€‚å·²çŸ¥åæ ‡ (x, y)ï¼Œé€šè¿‡ (y * canvas.width + x) å¯ä»¥è·å–è¿™æ˜¯ç¬¬å‡ ä¸ªåƒç´ ã€‚å› ä¸ºä¸€ä¸ªåƒç´ åŒ…å« RGBA 4 ä¸ªæ•°å€¼ï¼Œæ‰€ä»¥æœ€åè·å–åˆ°çš„åƒç´ ä¸º (y * canvas.width + x) * 4ï¼ŒåŠ ä¸Šç´§è·Ÿçš„å 3 ä½æ‰€å¯¹åº”çš„æ•°å€¼æ„æˆçš„ RGBA å€¼</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// è·å– imageData ä¸­æŸä¸ªåæ ‡çš„åƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getPixelInfo</span>(<span style="color:#a6e22e">imageData</span>, <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">data</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">imageData</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">pixel</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">y</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">x</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">pixel</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">æµ‹è¯•</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;red&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">getImageData</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è·å– (10, 10) è¿™ä¸ªåæ ‡ç‚¹çš„åƒç´ ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">pixel</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getPixelInfo</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">pixel</span>)
</span></span></code></pre></div><h4 id="è®¾ç½®æŸä¸ªåæ ‡çš„åƒç´ ">è®¾ç½®æŸä¸ªåæ ‡çš„åƒç´ <a hidden class="anchor" aria-hidden="true" href="#è®¾ç½®æŸä¸ªåæ ‡çš„åƒç´ ">#</a></h4>
<p>åŸºæœ¬åŸç†è·Ÿè·å–åæ ‡åƒç´ ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ª RGBA å€¼æ¥è®¾ç½®æŸäº›åæ ‡çš„åƒç´ ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// è®¾ç½® imageData ä¸­æŸä¸ªåæ ‡çš„åƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setPixelInfo</span>(<span style="color:#a6e22e">imageData</span>, <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">rgba</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">data</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">imageData</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">y</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">x</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">rgba</span>[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">rgba</span>[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">rgba</span>[<span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">rgba</span>[<span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">æµ‹è¯•</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// åˆ›å»ºä¸€ä¸ª10 * 10 imageData å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">createImageData</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// RGBA çº¢è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rgba</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">y</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">y</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">x</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">x</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å°†æ¯ä¸ªåƒç´ ç‚¹éƒ½è®¾ç½®ä¸ºçº¢è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">setPixelInfo</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">rgba</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å°† imageData å¯¹è±¡å†™å…¥åˆ° (100, 100) å¼€å§‹çš„ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">putImageData</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h4 id="é©¬èµ›å…‹å°ç»ƒä¹ ">é©¬èµ›å…‹å°ç»ƒä¹ <a hidden class="anchor" aria-hidden="true" href="#é©¬èµ›å…‹å°ç»ƒä¹ ">#</a></h4>
<p>ç°åœ¨æˆ‘ä»¬æ—¢èƒ½è·å–åˆ°åæ ‡ä½ç½®çš„åƒç´ ï¼Œä¹Ÿèƒ½è®¾ç½®åæ ‡ä½ç½®çš„åƒç´ ã€‚åŸºäºè¿™ä¸¤ç‚¹æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªé©¬èµ›å…‹çš„æ•ˆæœã€‚</p>
<p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>
<p>å‡å¦‚ç°åœ¨æœ‰ä¸€ä¸ª 100 * 100 çš„å›¾åƒï¼Œå°†ä¸€ä¸ªåƒç´ ç‚¹çœ‹åšä¸€ä¸ª 1 * 1 çš„å°æ–¹å—ï¼Œé‡Œé¢å°±åªæœ‰ä¸€ä¸ª RGBA å€¼ï¼Œä¸€å…±æœ‰ 100 * 100 = 10000 ä¸ªå°æ–¹å—ï¼Œ10000 ä¸ªåƒç´ ç‚¹ã€‚</p>
</li>
<li>
<p>å°†è¿™ä¸ªå°æ–¹å—å˜å¤§ï¼ŒåŒ…å« 2 * 2 ä¸ªåƒç´ ç‚¹ï¼Œä¸€å…±æœ‰ 50 * 50 = 2500 ä¸ªå°æ–¹å—ã€‚</p>
</li>
<li>
<p>ç°åœ¨ä¸€ä¸ªå°æ–¹å—é‡Œé¢åŒ…å« 4 ä¸ªåƒç´ ç‚¹ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ª RGBA å€¼ï¼Œéšæœºå–å‡ºå…¶ä¸­çš„ä¸€ä¸ª RGBA å€¼ï¼Œå°†è¿™ä¸ªå°æ–¹å—ä¸­çš„ 4 ä¸ªåƒç´ ç‚¹çš„ RGNA å€¼ï¼Œéƒ½è®¾ç½®æˆéšæœºå–å‡ºçš„è¿™ä¸ª RGBA å€¼ã€‚</p>
</li>
<li>
<p>ç°åœ¨æ¯ä¸ªå°æ–¹å—è™½ç„¶åŒ…å« 4 ä¸ªåƒç´ ç‚¹ï¼Œä½†æ˜¯è¿™ 4 ä¸ªåƒç´ ç‚¹çš„ RGBA å€¼éƒ½ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œç°åœ¨è¿™ä¸ªå›¾åƒåªæœ‰ 2500 ä¸ªåƒç´ ç‚¹ï¼Œåƒç´ ç‚¹å˜å°‘äº†ï¼Œå›¾åƒå°±æ¨¡ç³Šäº†ï¼Œé©¬èµ›å…‹æ•ˆæœå°±å½¢æˆäº†ã€‚</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  è®¾ç½®é©¬èµ›å…‹åƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  imgDataï¼šimageDataå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">  sizeï¼šé©¬èµ›å…‹ç¨‹åº¦ï¼Œå€¼è¶Šå¤§è¶Šæ¨¡ç³Šï¼ˆå°æ–¹å—å®½é«˜ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setMosaicPixel</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#a6e22e">size</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">height</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">imgData</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// å°æ–¹å—å˜å¤§ï¼Œæ‰€ä»¥å®½é«˜è¦é™¤ä»¥ size
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">y</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">height</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">size</span>; <span style="color:#a6e22e">y</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">x</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">width</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">size</span>; <span style="color:#a6e22e">x</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// éšæœºè·å–å°æ–¹å—ä¸­çš„ (x, y) åæ ‡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">randomX</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">size</span> <span style="color:#f92672">+</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#a6e22e">size</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">randomY</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">size</span> <span style="color:#f92672">+</span> Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#a6e22e">size</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// è·å–è¿™ä¸ªåæ ‡åƒç´ ç‚¹çš„ RGBA å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">randomPixel</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">getPixelInfo</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#a6e22e">randomX</span>, <span style="color:#a6e22e">randomY</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// å°†è¿™ä¸ªå°æ–¹å—ä¸­çš„åƒç´ ç‚¹éƒ½åº”ç”¨è¿™ä¸ª RGBA å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">MosaicX</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">MosaicX</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">size</span>; <span style="color:#a6e22e">MosaicX</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">MosaicY</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">MosaicY</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">size</span>; <span style="color:#a6e22e">MosaicY</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">setPixelInfo</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">size</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">MosaicX</span>, <span style="color:#a6e22e">y</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">size</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">MosaicY</span>, <span style="color:#a6e22e">randomPixel</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">æµ‹è¯•</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">img</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Image</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">src</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;./img/react.png&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">img</span>.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ç»˜åˆ¶å›¾åƒ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">drawImage</span>(<span style="color:#a6e22e">img</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// è·å–å›¾åƒçš„ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">imgData</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">getImageData</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// å°†å›¾åƒé©¬èµ›å…‹åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">setMosaicPixel</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// æœ€åé‡æ–°å†™å…¥åˆ°ç”»å¸ƒä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">putImageData</span>(<span style="color:#a6e22e">imgData</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="canvasé€æ˜åº¦">canvasé€æ˜åº¦<a hidden class="anchor" aria-hidden="true" href="#canvasé€æ˜åº¦">#</a></h2>
<p>ctx.globalAlphaï¼šè¿™ä¸ªå±æ€§å½±å“åˆ° <code>canvas</code> é‡Œæ‰€æœ‰å›¾åƒçš„é€æ˜åº¦ï¼Œæœ‰æ•ˆçš„å€¼èŒƒå›´æ˜¯ 0ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ° 1ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ï¼Œé»˜è®¤æ˜¯ 1ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// ç”»å¸ƒå…¨å±€é€æ˜åº¦è®¾ç½®ä¸º 0.2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">globalAlpha</span> <span style="color:#f92672">=</span> .<span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;red&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;blue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span></code></pre></div><h2 id="canvaså›¾åƒåˆæˆè®¾ç½®">canvaså›¾åƒåˆæˆè®¾ç½®<a hidden class="anchor" aria-hidden="true" href="#canvaså›¾åƒåˆæˆè®¾ç½®">#</a></h2>
<p>ctx.globalCompositeOperationï¼šè®¾ç½®æˆ–è¿”å›å¦‚ä½•å°†ä¸€ä¸ªæºï¼ˆæ–°çš„ sourceï¼‰å›¾åƒç»˜åˆ¶åˆ°ç›®æ ‡ï¼ˆå·²æœ‰çš„ destinationï¼‰çš„å›¾åƒä¸Šã€‚</p>
<p>å¯é€‰å€¼å¦‚ä¸‹:</p>
<ol>
<li>
<p>source-over	æºåœ¨ä¸Šé¢ï¼Œæ–°çš„å›¾åƒå±‚çº§æ¯”è¾ƒé«˜ã€‚ï¼ˆé»˜è®¤å€¼ï¼‰</p>
</li>
<li>
<p>source-in	åªç•™ä¸‹æºä¸ç›®æ ‡çš„é‡å éƒ¨åˆ†ã€‚ï¼ˆæºçš„é‚£ä¸€éƒ¨åˆ†ï¼‰</p>
</li>
<li>
<p>source-out	åªç•™ä¸‹æºè¶…è¿‡ç›®æ ‡çš„éƒ¨åˆ†ã€‚</p>
</li>
<li>
<p>source-atop	ç æ‰æºæº¢å‡ºçš„éƒ¨åˆ†ã€‚</p>
</li>
<li>
<p>destination-over	ç›®æ ‡åœ¨ä¸Šé¢ï¼Œæ—§çš„å›¾åƒå±‚çº§æ¯”è¾ƒé«˜ã€‚</p>
</li>
<li>
<p>destination-in	åªç•™ä¸‹æºä¸ç›®æ ‡çš„é‡å éƒ¨åˆ†ã€‚ï¼ˆç›®æ ‡çš„é‚£ä¸€éƒ¨åˆ†ï¼‰</p>
</li>
<li>
<p>destination-out	åªç•™ä¸‹ç›®æ ‡è¶…è¿‡æºçš„éƒ¨åˆ†ã€‚</p>
</li>
<li>
<p>destination-atop	ç æ‰ç›®æ ‡æº¢å‡ºçš„éƒ¨åˆ†ã€‚</p>
</li>
<li>
<p>lighter	æ˜¾ç¤ºæºå›¾åƒ + ç›®æ ‡å›¾åƒã€‚ï¼ˆé‡å å›¾å½¢çš„é¢œè‰²æ˜¯é€šè¿‡é¢œè‰²å€¼ç›¸åŠ æ¥ç¡®å®šçš„ï¼‰</p>
</li>
<li>
<p>copy	æ˜¾ç¤ºæºå›¾åƒï¼Œå¿½ç•¥ç›®æ ‡å›¾åƒã€‚</p>
</li>
<li>
<p>xor	é‚£äº›é‡å å’Œæ­£å¸¸ç»˜åˆ¶ä¹‹å¤–çš„å…¶ä»–åœ°æ–¹æ˜¯é€æ˜çš„ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// è®¾ç½®å›¾åƒé‡å çš„åœ°æ–¹ä¸æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">globalCompositeOperation</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;xor&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;red&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;blue&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">75</span>, <span style="color:#ae81ff">75</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>)
</span></span></code></pre></div></li>
</ol>
<h3 id="åˆ®åˆ®å¡å°ç»ƒä¹ ">åˆ®åˆ®å¡å°ç»ƒä¹ <a hidden class="anchor" aria-hidden="true" href="#åˆ®åˆ®å¡å°ç»ƒä¹ ">#</a></h3>
<p>é€šè¿‡ globalCompositeOperation å±æ€§è®¾ç½®ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„åˆ®åˆ®å¡æ•ˆæœã€‚</p>
<p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>
<p>å°† canvas ç”»å¸ƒå¡«å……ä¸€ä¸ªé¢œè‰²ï¼Œå’Œæœ€åè¦æ˜¾ç¤ºçš„å›¾ç‰‡å®½é«˜è®¾ä¸ºä¸€è‡´ï¼Œé€šè¿‡å®šä½å°†ç”»å¸ƒè¦†ç›–åœ¨å›¾ç‰‡ä¸Šæ–¹</p>
</li>
<li>
<p>ç»™ canvas å…ƒç´ ç»‘å®šé¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ï¼Œè·å–å½“å‰é¼ æ ‡æŒ‰ä¸‹ä½ç½®çš„ offsetX å’Œ offsetYï¼Œç›¸å½“äºåœ¨ç”»å¸ƒä¸­çš„åç§»é‡ï¼Œè®¾ç½®èµ·ç‚¹ moveTo(offsetX, offsetY)ã€‚</p>
</li>
<li>
<p>ç»™ canvas å…ƒç´ ç»‘å®šé¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œé¼ æ ‡æŒ‰ä¸‹ç§»åŠ¨æ—¶ï¼Œå®æ—¶è·å–é¼ æ ‡ç›¸å¯¹äºç”»å¸ƒçš„åç§»é‡ï¼Œè®¾ç½® lineTo(offsetX, offsetY)ï¼Œå¹¶å°†è¿™äº›è·¯å¾„è¿æ¥èµ·æ¥ã€‚</p>
</li>
<li>
<p>è®¾ç½® ctx.globalCompositeOperation = â€˜destination-outâ€™ï¼Œåªç•™ä¸‹ä¸æ˜¯é¼ æ ‡ç§»åŠ¨ç»˜åˆ¶å½¢æˆçš„åŒºåŸŸï¼Œé‡å çš„åŒºåŸŸå°†ä¼šé€æ˜æ˜¾ç¤ºï¼Œæœ€ä¸‹æ–¹çš„å›¾ç‰‡å°±èƒ½çœ‹è§ã€‚</p>
</li>
<li>
<p>ç»™ canvas å…ƒç´ ç»‘å®šé¼ æ ‡æ¾å¼€äº‹ä»¶ï¼Œæ¸…é™¤ canvas èº«ä¸Šçš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶ã€‚</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- ç»“æ„è®¾ç½® --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 400px;height: 200px;position: relative&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">canvas</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;canvas&#34;</span> <span style="color:#a6e22e">width</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;400&#34;</span> <span style="color:#a6e22e">height</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;200&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border: 1px solid;position: absolute&#34;</span>&gt;&lt;/<span style="color:#f92672">canvas</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">img</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;img&#34;</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./img/react.png&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 100%;height: 100%&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// è·å– canvas å…ƒç´ çš„å®½é«˜
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">height</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å°†æ•´ä¸ªç”»å¸ƒå¡«å……ä¸ºç°è‰²
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;gray&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">// åªç•™ä¸‹ç›®æ ‡è¶…è¿‡æºçš„éƒ¨åˆ†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">globalCompositeOperation</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;destination-out&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// åˆ®å¡çš„ç²—ç»†è®¾ç½®ä¸º 20px
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineWidth</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å°†ç»˜çº¿çš„è·¯å¾„è¿æ¥å¤„å’Œä¸¤ç«¯éƒ½è®¾ç½®ä¸ºåœ†å½¢ï¼Œè¿™æ ·æ¯”è¾ƒå¥½çœ‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineJoin</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;round&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineCap</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;round&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ä¸º canvas å…ƒç´ ç»‘å®šé¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">onmousedown</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// è·å–å½“å‰é¼ æ ‡åœ¨ç”»å¸ƒä¸­çš„åç§»é‡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">offsetX</span>, <span style="color:#a6e22e">offsetY</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// è®¾ç½®èµ·ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">moveTo</span>(<span style="color:#a6e22e">offsetX</span>, <span style="color:#a6e22e">offsetY</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ä¸º canvas å…ƒç´ ç»‘å®šé¼ æ ‡ç§»åŠ¨äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">onmousemove</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">event</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å®æ—¶è·å–é¼ æ ‡çš„åç§»é‡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">offsetX</span>, <span style="color:#a6e22e">offsetY</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// è®¾ç½®è·¯å¾„ç‚¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">lineTo</span>(<span style="color:#a6e22e">offsetX</span>, <span style="color:#a6e22e">offsetY</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å°†å­è·¯å¾„è¿æ¥èµ·æ¥ç»˜åˆ¶æ˜¾ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">stroke</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ä¸º canvas å…ƒç´ ç»‘å®šé¼ æ ‡ç¦»å¼€äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">onmouseup</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ¸…é™¤ canvas å…ƒç´ èº«ä¸Šçš„é¼ æ ‡ç§»åŠ¨äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">onmousemove</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="canvaså°†ç”»å¸ƒå¯¼å‡ºä¸ºå›¾åƒ">canvaså°†ç”»å¸ƒå¯¼å‡ºä¸ºå›¾åƒ<a hidden class="anchor" aria-hidden="true" href="#canvaså°†ç”»å¸ƒå¯¼å‡ºä¸ºå›¾åƒ">#</a></h2>
<p>canvas.toDataURL(type, encoderOptions)ã€‚</p>
<p>é€šè¿‡ canvas èº«ä¸Šçš„ toDataURL æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«ç”»å¸ƒå†…å®¹çš„ base64 æ ¼å¼çš„ data urlã€‚</p>
<p>å‚æ•°ï¼š</p>
<ol>
<li>typeï¼šå›¾ç‰‡æ ¼å¼ï¼Œé»˜è®¤ä¸º image/pngã€‚</li>
<li>encoderOptionsï¼šåœ¨æŒ‡å®šå›¾ç‰‡æ ¼å¼ä¸º image/jpeg æˆ– image/webp çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä» 0-1 ä¹‹é—´é€‰æ‹©å›¾ç‰‡çš„è´¨é‡ã€‚å¦‚æœè¶…å‡ºå–å€¼èŒƒå›´ï¼Œå°†ä¼šä½¿ç”¨é»˜è®¤å€¼0.92ã€‚å…¶ä»–å‚æ•°ä¼šè¢«å¿½ç•¥ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillStyle</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;red&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fillRect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">dataUrl</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">toDataURL</span>()
</span></span><span style="display:flex;"><span><span style="color:#75715e">// data:image/png;base64,iVBORw0KGgoAAAANSUh....
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">dataUrl</span>)
</span></span></code></pre></div><p>åœ°å€æ è¾“å…¥ data urlï¼š</p>
<h2 id="canvasäº‹ä»¶æ“ä½œ">canvasäº‹ä»¶æ“ä½œ<a hidden class="anchor" aria-hidden="true" href="#canvasäº‹ä»¶æ“ä½œ">#</a></h2>
<p>canvas ä¸­å‡ ä¹æ²¡æœ‰æä¾›ä»»ä½•äº‹ä»¶æ“ä½œçš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ isPointInPath æ–¹æ³•ï¼Œåˆ¤æ–­å½“å‰åæ ‡æ˜¯å¦åœ¨è·¯å¾„åˆ—è¡¨ä¸­ï¼Œä»è€Œè¿›è¡Œä¸€äº›äº‹ä»¶æ“ä½œã€‚</p>
<p>ctx.isPointInPath(x, y)ï¼šåˆ¤æ–­åœ¨å½“å‰è·¯å¾„ä¸­æ˜¯å¦åŒ…å«æ£€æµ‹ç‚¹ (x, y)ï¼Œè¿”å› true / falseã€‚</p>
<p>ç‰¹åˆ«æ³¨æ„ï¼š</p>
<ul>
<li>
<p>ctx.beginPath() ä¹‹å‰çš„è·¯å¾„æ£€æµ‹ä¸åˆ°ï¼Œå› ä¸ºå®ƒä¼šæ¸…ç©ºè·¯å¾„åˆ—è¡¨ã€‚</p>
</li>
<li>
<p>fillRect å’Œ strokeRect è¿™ä¸¤ä¸ªç›´æ¥ç»˜åˆ¶çŸ©å½¢çš„æ–¹æ³•ä¸ä¼šç”Ÿæˆè·¯å¾„ï¼Œå®ƒä»¬åŒ…å«çš„åæ ‡ç‚¹ isPointInPath æ£€æŸ¥ä¸åˆ°ã€‚</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// ç»˜åˆ¶ä¸€ä¸ªè·¯å¾„çŸ©å½¢
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">rect</span>(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">fill</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ç»™ canvas ç»‘å®šç‚¹å‡»äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">onclick</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span> =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// é¼ æ ‡ç‚¹å‡»ä½ç½®è·ç¦» canvas çš„ offsetX å’Œ offsetYï¼Œå°±ç›¸å½“äºåœ¨ canvas ä¸­çš„åæ ‡ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">offsetX</span>, <span style="color:#a6e22e">offsetY</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">isInPath</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">isPointInPath</span>(<span style="color:#a6e22e">offsetX</span>, <span style="color:#a6e22e">offsetY</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`å½“å‰ç‚¹å‡»åæ ‡ï¼š(</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">offsetX</span><span style="color:#e6db74">}</span><span style="color:#e6db74">, </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">offsetY</span><span style="color:#e6db74">}</span><span style="color:#e6db74">)`</span>, <span style="color:#e6db74">`æ˜¯å¦åœ¨è·¯å¾„åˆ—è¡¨ä¸­ï¼š</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">isInPath</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="https://sirius00.github.io/posts/tech/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>è®¡ç®—æœºç½‘ç»œ</span>
  </a>
  <a class="next" href="https://sirius00.github.io/posts/tech/scss%E7%9A%84%E4%BD%BF%E7%94%A8/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>Scssçš„ä½¿ç”¨</span>
  </a>
</nav>

        </footer>
    </div>
</article>
</main>


<script async src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>


<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<footer class="footer">
    <span>
        Copyright
        &copy;
        2020-2023
        <a href="https://sirius00.github.io/" style="color:#939393;">XP&#39;s Blog</a>
        All Rights Reserved
    </span>

    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;">å¡«å†™è‡ªå·±çš„å¤‡æ¡ˆå·</a>&nbsp;

    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="%e5%a1%ab%e8%87%aa%e5%b7%b1%e7%9a%84%e5%85%ac%e5%ae%89%e5%9b%be%e6%a0%87%e9%93%be%e6%8e%a5" style="float:left;margin: 0px 5px 0px 0px;"/>
            å¡«è‡ªå·±çš„å…¬ç½‘å®‰å¤‡
        </a>
    </span>

    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        æ€»è®¿å®¢æ•°: <span id="busuanzi_value_site_uv"></span>
        æ€»è®¿é—®é‡: <span id="busuanzi_value_site_pv"></span>
    </span>

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ' + {
                { .
                    Site.Title
                }
            }
                +'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ' + {
                { .
                    Site.Title
                }
            }
                +'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'ğŸ“„å¤åˆ¶';

        function copyingDone() {
            copybutton.innerText = 'ğŸ‘ŒğŸ»å·²å¤åˆ¶!';
            setTimeout(() => {
                copybutton.innerText = 'ğŸ“„å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ' + "XP's Blog"
                +'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {
            }
            ;
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild === container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName === "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script>
    $("code[class^=language] ").on("mouseover", function () {
        if (this.clientWidth < this.scrollWidth) {
            $(this).css("width", "135%")
        }
    }).on("mouseout", function () {
        $(this).css("width", "100%")
    })
</script>
</body>

</html>
